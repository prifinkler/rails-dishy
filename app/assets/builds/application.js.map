{"version":3,"file":"application.js","mappings":"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","sources":["webpack://app/./node_modules/@rails/actioncable/src/adapters.js","webpack://app/./node_modules/@rails/actioncable/src/logger.js","webpack://app/./node_modules/@rails/actioncable/src/connection_monitor.js","webpack://app/./node_modules/@rails/actioncable/src/internal.js","webpack://app/./node_modules/@rails/actioncable/src/connection.js","webpack://app/./node_modules/@rails/actioncable/src/subscription.js","webpack://app/./node_modules/@rails/actioncable/src/subscription_guarantor.js","webpack://app/./node_modules/@rails/actioncable/src/subscriptions.js","webpack://app/./node_modules/@rails/actioncable/src/consumer.js","webpack://app/./node_modules/@rails/actioncable/src/index.js","webpack://app/./node_modules/hammerjs/hammer.js","webpack://app/webpack/bootstrap","webpack://app/webpack/runtime/compat get default export","webpack://app/webpack/runtime/define property getters","webpack://app/webpack/runtime/hasOwnProperty shorthand","webpack://app/./node_modules/@hotwired/turbo/dist/turbo.es2017-esm.js","webpack://app/./node_modules/@hotwired/turbo-rails/app/javascript/turbo/cable.js","webpack://app/./node_modules/@hotwired/turbo-rails/app/javascript/turbo/snakeize.js","webpack://app/./node_modules/@hotwired/turbo-rails/app/javascript/turbo/cable_stream_source_element.js","webpack://app/./node_modules/@hotwired/turbo-rails/app/javascript/turbo/index.js","webpack://app/./node_modules/@hotwired/turbo-rails/app/javascript/turbo/fetch_requests.js","webpack://app/./node_modules/@hotwired/stimulus/dist/stimulus.js","webpack://app/./app/javascript/controllers/application.js","webpack://app/./app/javascript/controllers/index.js","webpack://app/./app/javascript/controllers/hello_controller.js","webpack://app/./app/javascript/swiper.js"],"sourcesContent":["export default {\n  logger: self.console,\n  WebSocket: self.WebSocket\n}\n","import adapters from \"./adapters\"\n\n// The logger is disabled by default. You can enable it with:\n//\n//   ActionCable.logger.enabled = true\n//\n//   Example:\n//\n//   import * as ActionCable from '@rails/actioncable'\n//\n//   ActionCable.logger.enabled = true\n//   ActionCable.logger.log('Connection Established.')\n//\n\nexport default {\n  log(...messages) {\n    if (this.enabled) {\n      messages.push(Date.now())\n      adapters.logger.log(\"[ActionCable]\", ...messages)\n    }\n  },\n}\n","import logger from \"./logger\"\n\n// Responsible for ensuring the cable connection is in good health by validating the heartbeat pings sent from the server, and attempting\n// revival reconnections if things go astray. Internal class, not intended for direct user manipulation.\n\nconst now = () => new Date().getTime()\n\nconst secondsSince = time => (now() - time) / 1000\n\nclass ConnectionMonitor {\n  constructor(connection) {\n    this.visibilityDidChange = this.visibilityDidChange.bind(this)\n    this.connection = connection\n    this.reconnectAttempts = 0\n  }\n\n  start() {\n    if (!this.isRunning()) {\n      this.startedAt = now()\n      delete this.stoppedAt\n      this.startPolling()\n      addEventListener(\"visibilitychange\", this.visibilityDidChange)\n      logger.log(`ConnectionMonitor started. stale threshold = ${this.constructor.staleThreshold} s`)\n    }\n  }\n\n  stop() {\n    if (this.isRunning()) {\n      this.stoppedAt = now()\n      this.stopPolling()\n      removeEventListener(\"visibilitychange\", this.visibilityDidChange)\n      logger.log(\"ConnectionMonitor stopped\")\n    }\n  }\n\n  isRunning() {\n    return this.startedAt && !this.stoppedAt\n  }\n\n  recordPing() {\n    this.pingedAt = now()\n  }\n\n  recordConnect() {\n    this.reconnectAttempts = 0\n    this.recordPing()\n    delete this.disconnectedAt\n    logger.log(\"ConnectionMonitor recorded connect\")\n  }\n\n  recordDisconnect() {\n    this.disconnectedAt = now()\n    logger.log(\"ConnectionMonitor recorded disconnect\")\n  }\n\n  // Private\n\n  startPolling() {\n    this.stopPolling()\n    this.poll()\n  }\n\n  stopPolling() {\n    clearTimeout(this.pollTimeout)\n  }\n\n  poll() {\n    this.pollTimeout = setTimeout(() => {\n      this.reconnectIfStale()\n      this.poll()\n    }\n    , this.getPollInterval())\n  }\n\n  getPollInterval() {\n    const { staleThreshold, reconnectionBackoffRate } = this.constructor\n    const backoff = Math.pow(1 + reconnectionBackoffRate, Math.min(this.reconnectAttempts, 10))\n    const jitterMax = this.reconnectAttempts === 0 ? 1.0 : reconnectionBackoffRate\n    const jitter = jitterMax * Math.random()\n    return staleThreshold * 1000 * backoff * (1 + jitter)\n  }\n\n  reconnectIfStale() {\n    if (this.connectionIsStale()) {\n      logger.log(`ConnectionMonitor detected stale connection. reconnectAttempts = ${this.reconnectAttempts}, time stale = ${secondsSince(this.refreshedAt)} s, stale threshold = ${this.constructor.staleThreshold} s`)\n      this.reconnectAttempts++\n      if (this.disconnectedRecently()) {\n        logger.log(`ConnectionMonitor skipping reopening recent disconnect. time disconnected = ${secondsSince(this.disconnectedAt)} s`)\n      } else {\n        logger.log(\"ConnectionMonitor reopening\")\n        this.connection.reopen()\n      }\n    }\n  }\n\n  get refreshedAt() {\n    return this.pingedAt ? this.pingedAt : this.startedAt\n  }\n\n  connectionIsStale() {\n    return secondsSince(this.refreshedAt) > this.constructor.staleThreshold\n  }\n\n  disconnectedRecently() {\n    return this.disconnectedAt && (secondsSince(this.disconnectedAt) < this.constructor.staleThreshold)\n  }\n\n  visibilityDidChange() {\n    if (document.visibilityState === \"visible\") {\n      setTimeout(() => {\n        if (this.connectionIsStale() || !this.connection.isOpen()) {\n          logger.log(`ConnectionMonitor reopening stale connection on visibilitychange. visibilityState = ${document.visibilityState}`)\n          this.connection.reopen()\n        }\n      }\n      , 200)\n    }\n  }\n\n}\n\nConnectionMonitor.staleThreshold = 6 // Server::Connections::BEAT_INTERVAL * 2 (missed two pings)\nConnectionMonitor.reconnectionBackoffRate = 0.15\n\nexport default ConnectionMonitor\n","export default {\n  \"message_types\": {\n    \"welcome\": \"welcome\",\n    \"disconnect\": \"disconnect\",\n    \"ping\": \"ping\",\n    \"confirmation\": \"confirm_subscription\",\n    \"rejection\": \"reject_subscription\"\n  },\n  \"disconnect_reasons\": {\n    \"unauthorized\": \"unauthorized\",\n    \"invalid_request\": \"invalid_request\",\n    \"server_restart\": \"server_restart\"\n  },\n  \"default_mount_path\": \"/cable\",\n  \"protocols\": [\n    \"actioncable-v1-json\",\n    \"actioncable-unsupported\"\n  ]\n}\n","import adapters from \"./adapters\"\nimport ConnectionMonitor from \"./connection_monitor\"\nimport INTERNAL from \"./internal\"\nimport logger from \"./logger\"\n\n// Encapsulate the cable connection held by the consumer. This is an internal class not intended for direct user manipulation.\n\nconst {message_types, protocols} = INTERNAL\nconst supportedProtocols = protocols.slice(0, protocols.length - 1)\n\nconst indexOf = [].indexOf\n\nclass Connection {\n  constructor(consumer) {\n    this.open = this.open.bind(this)\n    this.consumer = consumer\n    this.subscriptions = this.consumer.subscriptions\n    this.monitor = new ConnectionMonitor(this)\n    this.disconnected = true\n  }\n\n  send(data) {\n    if (this.isOpen()) {\n      this.webSocket.send(JSON.stringify(data))\n      return true\n    } else {\n      return false\n    }\n  }\n\n  open() {\n    if (this.isActive()) {\n      logger.log(`Attempted to open WebSocket, but existing socket is ${this.getState()}`)\n      return false\n    } else {\n      logger.log(`Opening WebSocket, current state is ${this.getState()}, subprotocols: ${protocols}`)\n      if (this.webSocket) { this.uninstallEventHandlers() }\n      this.webSocket = new adapters.WebSocket(this.consumer.url, protocols)\n      this.installEventHandlers()\n      this.monitor.start()\n      return true\n    }\n  }\n\n  close({allowReconnect} = {allowReconnect: true}) {\n    if (!allowReconnect) { this.monitor.stop() }\n    // Avoid closing websockets in a \"connecting\" state due to Safari 15.1+ bug. See: https://github.com/rails/rails/issues/43835#issuecomment-1002288478\n    if (this.isOpen()) {\n      return this.webSocket.close()\n    }\n  }\n\n  reopen() {\n    logger.log(`Reopening WebSocket, current state is ${this.getState()}`)\n    if (this.isActive()) {\n      try {\n        return this.close()\n      } catch (error) {\n        logger.log(\"Failed to reopen WebSocket\", error)\n      }\n      finally {\n        logger.log(`Reopening WebSocket in ${this.constructor.reopenDelay}ms`)\n        setTimeout(this.open, this.constructor.reopenDelay)\n      }\n    } else {\n      return this.open()\n    }\n  }\n\n  getProtocol() {\n    if (this.webSocket) {\n      return this.webSocket.protocol\n    }\n  }\n\n  isOpen() {\n    return this.isState(\"open\")\n  }\n\n  isActive() {\n    return this.isState(\"open\", \"connecting\")\n  }\n\n  // Private\n\n  isProtocolSupported() {\n    return indexOf.call(supportedProtocols, this.getProtocol()) >= 0\n  }\n\n  isState(...states) {\n    return indexOf.call(states, this.getState()) >= 0\n  }\n\n  getState() {\n    if (this.webSocket) {\n      for (let state in adapters.WebSocket) {\n        if (adapters.WebSocket[state] === this.webSocket.readyState) {\n          return state.toLowerCase()\n        }\n      }\n    }\n    return null\n  }\n\n  installEventHandlers() {\n    for (let eventName in this.events) {\n      const handler = this.events[eventName].bind(this)\n      this.webSocket[`on${eventName}`] = handler\n    }\n  }\n\n  uninstallEventHandlers() {\n    for (let eventName in this.events) {\n      this.webSocket[`on${eventName}`] = function() {}\n    }\n  }\n\n}\n\nConnection.reopenDelay = 500\n\nConnection.prototype.events = {\n  message(event) {\n    if (!this.isProtocolSupported()) { return }\n    const {identifier, message, reason, reconnect, type} = JSON.parse(event.data)\n    switch (type) {\n      case message_types.welcome:\n        this.monitor.recordConnect()\n        return this.subscriptions.reload()\n      case message_types.disconnect:\n        logger.log(`Disconnecting. Reason: ${reason}`)\n        return this.close({allowReconnect: reconnect})\n      case message_types.ping:\n        return this.monitor.recordPing()\n      case message_types.confirmation:\n        this.subscriptions.confirmSubscription(identifier)\n        return this.subscriptions.notify(identifier, \"connected\")\n      case message_types.rejection:\n        return this.subscriptions.reject(identifier)\n      default:\n        return this.subscriptions.notify(identifier, \"received\", message)\n    }\n  },\n\n  open() {\n    logger.log(`WebSocket onopen event, using '${this.getProtocol()}' subprotocol`)\n    this.disconnected = false\n    if (!this.isProtocolSupported()) {\n      logger.log(\"Protocol is unsupported. Stopping monitor and disconnecting.\")\n      return this.close({allowReconnect: false})\n    }\n  },\n\n  close(event) {\n    logger.log(\"WebSocket onclose event\")\n    if (this.disconnected) { return }\n    this.disconnected = true\n    this.monitor.recordDisconnect()\n    return this.subscriptions.notifyAll(\"disconnected\", {willAttemptReconnect: this.monitor.isRunning()})\n  },\n\n  error() {\n    logger.log(\"WebSocket onerror event\")\n  }\n}\n\nexport default Connection\n","// A new subscription is created through the ActionCable.Subscriptions instance available on the consumer.\n// It provides a number of callbacks and a method for calling remote procedure calls on the corresponding\n// Channel instance on the server side.\n//\n// An example demonstrates the basic functionality:\n//\n//   App.appearance = App.cable.subscriptions.create(\"AppearanceChannel\", {\n//     connected() {\n//       // Called once the subscription has been successfully completed\n//     },\n//\n//     disconnected({ willAttemptReconnect: boolean }) {\n//       // Called when the client has disconnected with the server.\n//       // The object will have an `willAttemptReconnect` property which\n//       // says whether the client has the intention of attempting\n//       // to reconnect.\n//     },\n//\n//     appear() {\n//       this.perform('appear', {appearing_on: this.appearingOn()})\n//     },\n//\n//     away() {\n//       this.perform('away')\n//     },\n//\n//     appearingOn() {\n//       $('main').data('appearing-on')\n//     }\n//   })\n//\n// The methods #appear and #away forward their intent to the remote AppearanceChannel instance on the server\n// by calling the `perform` method with the first parameter being the action (which maps to AppearanceChannel#appear/away).\n// The second parameter is a hash that'll get JSON encoded and made available on the server in the data parameter.\n//\n// This is how the server component would look:\n//\n//   class AppearanceChannel < ApplicationActionCable::Channel\n//     def subscribed\n//       current_user.appear\n//     end\n//\n//     def unsubscribed\n//       current_user.disappear\n//     end\n//\n//     def appear(data)\n//       current_user.appear on: data['appearing_on']\n//     end\n//\n//     def away\n//       current_user.away\n//     end\n//   end\n//\n// The \"AppearanceChannel\" name is automatically mapped between the client-side subscription creation and the server-side Ruby class name.\n// The AppearanceChannel#appear/away public methods are exposed automatically to client-side invocation through the perform method.\n\nconst extend = function(object, properties) {\n  if (properties != null) {\n    for (let key in properties) {\n      const value = properties[key]\n      object[key] = value\n    }\n  }\n  return object\n}\n\nexport default class Subscription {\n  constructor(consumer, params = {}, mixin) {\n    this.consumer = consumer\n    this.identifier = JSON.stringify(params)\n    extend(this, mixin)\n  }\n\n  // Perform a channel action with the optional data passed as an attribute\n  perform(action, data = {}) {\n    data.action = action\n    return this.send(data)\n  }\n\n  send(data) {\n    return this.consumer.send({command: \"message\", identifier: this.identifier, data: JSON.stringify(data)})\n  }\n\n  unsubscribe() {\n    return this.consumer.subscriptions.remove(this)\n  }\n}\n","import logger from \"./logger\"\n\n// Responsible for ensuring channel subscribe command is confirmed, retrying until confirmation is received.\n// Internal class, not intended for direct user manipulation.\n\nclass SubscriptionGuarantor {\n  constructor(subscriptions) {\n    this.subscriptions = subscriptions\n    this.pendingSubscriptions = []\n  }\n\n  guarantee(subscription) {\n    if(this.pendingSubscriptions.indexOf(subscription) == -1){ \n      logger.log(`SubscriptionGuarantor guaranteeing ${subscription.identifier}`)\n      this.pendingSubscriptions.push(subscription) \n    }\n    else {\n      logger.log(`SubscriptionGuarantor already guaranteeing ${subscription.identifier}`)\n    }\n    this.startGuaranteeing()\n  }\n\n  forget(subscription) {\n    logger.log(`SubscriptionGuarantor forgetting ${subscription.identifier}`)\n    this.pendingSubscriptions = (this.pendingSubscriptions.filter((s) => s !== subscription))\n  }\n\n  startGuaranteeing() {\n    this.stopGuaranteeing()\n    this.retrySubscribing()\n  }\n  \n  stopGuaranteeing() {\n    clearTimeout(this.retryTimeout)\n  }\n\n  retrySubscribing() {\n    this.retryTimeout = setTimeout(() => {\n      if (this.subscriptions && typeof(this.subscriptions.subscribe) === \"function\") {\n        this.pendingSubscriptions.map((subscription) => {\n          logger.log(`SubscriptionGuarantor resubscribing ${subscription.identifier}`)\n          this.subscriptions.subscribe(subscription)\n        })\n      }\n    }\n    , 500)\n  }\n}\n\nexport default SubscriptionGuarantor","import Subscription from \"./subscription\"\nimport SubscriptionGuarantor from \"./subscription_guarantor\"\nimport logger from \"./logger\"\n\n// Collection class for creating (and internally managing) channel subscriptions.\n// The only method intended to be triggered by the user is ActionCable.Subscriptions#create,\n// and it should be called through the consumer like so:\n//\n//   App = {}\n//   App.cable = ActionCable.createConsumer(\"ws://example.com/accounts/1\")\n//   App.appearance = App.cable.subscriptions.create(\"AppearanceChannel\")\n//\n// For more details on how you'd configure an actual channel subscription, see ActionCable.Subscription.\n\nexport default class Subscriptions {\n  constructor(consumer) {\n    this.consumer = consumer\n    this.guarantor = new SubscriptionGuarantor(this)\n    this.subscriptions = []\n  }\n\n  create(channelName, mixin) {\n    const channel = channelName\n    const params = typeof channel === \"object\" ? channel : {channel}\n    const subscription = new Subscription(this.consumer, params, mixin)\n    return this.add(subscription)\n  }\n\n  // Private\n\n  add(subscription) {\n    this.subscriptions.push(subscription)\n    this.consumer.ensureActiveConnection()\n    this.notify(subscription, \"initialized\")\n    this.subscribe(subscription)\n    return subscription\n  }\n\n  remove(subscription) {\n    this.forget(subscription)\n    if (!this.findAll(subscription.identifier).length) {\n      this.sendCommand(subscription, \"unsubscribe\")\n    }\n    return subscription\n  }\n\n  reject(identifier) {\n    return this.findAll(identifier).map((subscription) => {\n      this.forget(subscription)\n      this.notify(subscription, \"rejected\")\n      return subscription\n    })\n  }\n\n  forget(subscription) {\n    this.guarantor.forget(subscription)\n    this.subscriptions = (this.subscriptions.filter((s) => s !== subscription))\n    return subscription\n  }\n\n  findAll(identifier) {\n    return this.subscriptions.filter((s) => s.identifier === identifier)\n  }\n\n  reload() {\n    return this.subscriptions.map((subscription) =>\n      this.subscribe(subscription))\n  }\n\n  notifyAll(callbackName, ...args) {\n    return this.subscriptions.map((subscription) =>\n      this.notify(subscription, callbackName, ...args))\n  }\n\n  notify(subscription, callbackName, ...args) {\n    let subscriptions\n    if (typeof subscription === \"string\") {\n      subscriptions = this.findAll(subscription)\n    } else {\n      subscriptions = [subscription]\n    }\n\n    return subscriptions.map((subscription) =>\n      (typeof subscription[callbackName] === \"function\" ? subscription[callbackName](...args) : undefined))\n  }\n\n  subscribe(subscription) {\n    if (this.sendCommand(subscription, \"subscribe\")) {\n      this.guarantor.guarantee(subscription)\n    }\n  }\n\n  confirmSubscription(identifier) {\n    logger.log(`Subscription confirmed ${identifier}`)\n    this.findAll(identifier).map((subscription) =>\n      this.guarantor.forget(subscription))\n  }\n\n  sendCommand(subscription, command) {\n    const {identifier} = subscription\n    return this.consumer.send({command, identifier})\n  }\n}\n","import Connection from \"./connection\"\nimport Subscriptions from \"./subscriptions\"\n\n// The ActionCable.Consumer establishes the connection to a server-side Ruby Connection object. Once established,\n// the ActionCable.ConnectionMonitor will ensure that its properly maintained through heartbeats and checking for stale updates.\n// The Consumer instance is also the gateway to establishing subscriptions to desired channels through the #createSubscription\n// method.\n//\n// The following example shows how this can be set up:\n//\n//   App = {}\n//   App.cable = ActionCable.createConsumer(\"ws://example.com/accounts/1\")\n//   App.appearance = App.cable.subscriptions.create(\"AppearanceChannel\")\n//\n// For more details on how you'd configure an actual channel subscription, see ActionCable.Subscription.\n//\n// When a consumer is created, it automatically connects with the server.\n//\n// To disconnect from the server, call\n//\n//   App.cable.disconnect()\n//\n// and to restart the connection:\n//\n//   App.cable.connect()\n//\n// Any channel subscriptions which existed prior to disconnecting will\n// automatically resubscribe.\n\nexport default class Consumer {\n  constructor(url) {\n    this._url = url\n    this.subscriptions = new Subscriptions(this)\n    this.connection = new Connection(this)\n  }\n\n  get url() {\n    return createWebSocketURL(this._url)\n  }\n\n  send(data) {\n    return this.connection.send(data)\n  }\n\n  connect() {\n    return this.connection.open()\n  }\n\n  disconnect() {\n    return this.connection.close({allowReconnect: false})\n  }\n\n  ensureActiveConnection() {\n    if (!this.connection.isActive()) {\n      return this.connection.open()\n    }\n  }\n}\n\nexport function createWebSocketURL(url) {\n  if (typeof url === \"function\") {\n    url = url()\n  }\n\n  if (url && !/^wss?:/i.test(url)) {\n    const a = document.createElement(\"a\")\n    a.href = url\n    // Fix populating Location properties in IE. Otherwise, protocol will be blank.\n    a.href = a.href\n    a.protocol = a.protocol.replace(\"http\", \"ws\")\n    return a.href\n  } else {\n    return url\n  }\n}\n","import Connection from \"./connection\"\nimport ConnectionMonitor from \"./connection_monitor\"\nimport Consumer, { createWebSocketURL } from \"./consumer\"\nimport INTERNAL from \"./internal\"\nimport Subscription from \"./subscription\"\nimport Subscriptions from \"./subscriptions\"\nimport SubscriptionGuarantor from \"./subscription_guarantor\"\nimport adapters from \"./adapters\"\nimport logger from \"./logger\"\n\nexport {\n  Connection,\n  ConnectionMonitor,\n  Consumer,\n  INTERNAL,\n  Subscription,\n  Subscriptions,\n  SubscriptionGuarantor,\n  adapters,\n  createWebSocketURL,\n  logger,\n}\n\nexport function createConsumer(url = getConfig(\"url\") || INTERNAL.default_mount_path) {\n  return new Consumer(url)\n}\n\nexport function getConfig(name) {\n  const element = document.head.querySelector(`meta[name='action-cable-${name}']`)\n  if (element) {\n    return element.getAttribute(\"content\")\n  }\n}\n","/*! Hammer.JS - v2.0.7 - 2016-04-22\n * http://hammerjs.github.io/\n *\n * Copyright (c) 2016 Jorik Tangelder;\n * Licensed under the MIT license */\n(function(window, document, exportName, undefined) {\n  'use strict';\n\nvar VENDOR_PREFIXES = ['', 'webkit', 'Moz', 'MS', 'ms', 'o'];\nvar TEST_ELEMENT = document.createElement('div');\n\nvar TYPE_FUNCTION = 'function';\n\nvar round = Math.round;\nvar abs = Math.abs;\nvar now = Date.now;\n\n/**\n * set a timeout with a given scope\n * @param {Function} fn\n * @param {Number} timeout\n * @param {Object} context\n * @returns {number}\n */\nfunction setTimeoutContext(fn, timeout, context) {\n    return setTimeout(bindFn(fn, context), timeout);\n}\n\n/**\n * if the argument is an array, we want to execute the fn on each entry\n * if it aint an array we don't want to do a thing.\n * this is used by all the methods that accept a single and array argument.\n * @param {*|Array} arg\n * @param {String} fn\n * @param {Object} [context]\n * @returns {Boolean}\n */\nfunction invokeArrayArg(arg, fn, context) {\n    if (Array.isArray(arg)) {\n        each(arg, context[fn], context);\n        return true;\n    }\n    return false;\n}\n\n/**\n * walk objects and arrays\n * @param {Object} obj\n * @param {Function} iterator\n * @param {Object} context\n */\nfunction each(obj, iterator, context) {\n    var i;\n\n    if (!obj) {\n        return;\n    }\n\n    if (obj.forEach) {\n        obj.forEach(iterator, context);\n    } else if (obj.length !== undefined) {\n        i = 0;\n        while (i < obj.length) {\n            iterator.call(context, obj[i], i, obj);\n            i++;\n        }\n    } else {\n        for (i in obj) {\n            obj.hasOwnProperty(i) && iterator.call(context, obj[i], i, obj);\n        }\n    }\n}\n\n/**\n * wrap a method with a deprecation warning and stack trace\n * @param {Function} method\n * @param {String} name\n * @param {String} message\n * @returns {Function} A new function wrapping the supplied method.\n */\nfunction deprecate(method, name, message) {\n    var deprecationMessage = 'DEPRECATED METHOD: ' + name + '\\n' + message + ' AT \\n';\n    return function() {\n        var e = new Error('get-stack-trace');\n        var stack = e && e.stack ? e.stack.replace(/^[^\\(]+?[\\n$]/gm, '')\n            .replace(/^\\s+at\\s+/gm, '')\n            .replace(/^Object.<anonymous>\\s*\\(/gm, '{anonymous}()@') : 'Unknown Stack Trace';\n\n        var log = window.console && (window.console.warn || window.console.log);\n        if (log) {\n            log.call(window.console, deprecationMessage, stack);\n        }\n        return method.apply(this, arguments);\n    };\n}\n\n/**\n * extend object.\n * means that properties in dest will be overwritten by the ones in src.\n * @param {Object} target\n * @param {...Object} objects_to_assign\n * @returns {Object} target\n */\nvar assign;\nif (typeof Object.assign !== 'function') {\n    assign = function assign(target) {\n        if (target === undefined || target === null) {\n            throw new TypeError('Cannot convert undefined or null to object');\n        }\n\n        var output = Object(target);\n        for (var index = 1; index < arguments.length; index++) {\n            var source = arguments[index];\n            if (source !== undefined && source !== null) {\n                for (var nextKey in source) {\n                    if (source.hasOwnProperty(nextKey)) {\n                        output[nextKey] = source[nextKey];\n                    }\n                }\n            }\n        }\n        return output;\n    };\n} else {\n    assign = Object.assign;\n}\n\n/**\n * extend object.\n * means that properties in dest will be overwritten by the ones in src.\n * @param {Object} dest\n * @param {Object} src\n * @param {Boolean} [merge=false]\n * @returns {Object} dest\n */\nvar extend = deprecate(function extend(dest, src, merge) {\n    var keys = Object.keys(src);\n    var i = 0;\n    while (i < keys.length) {\n        if (!merge || (merge && dest[keys[i]] === undefined)) {\n            dest[keys[i]] = src[keys[i]];\n        }\n        i++;\n    }\n    return dest;\n}, 'extend', 'Use `assign`.');\n\n/**\n * merge the values from src in the dest.\n * means that properties that exist in dest will not be overwritten by src\n * @param {Object} dest\n * @param {Object} src\n * @returns {Object} dest\n */\nvar merge = deprecate(function merge(dest, src) {\n    return extend(dest, src, true);\n}, 'merge', 'Use `assign`.');\n\n/**\n * simple class inheritance\n * @param {Function} child\n * @param {Function} base\n * @param {Object} [properties]\n */\nfunction inherit(child, base, properties) {\n    var baseP = base.prototype,\n        childP;\n\n    childP = child.prototype = Object.create(baseP);\n    childP.constructor = child;\n    childP._super = baseP;\n\n    if (properties) {\n        assign(childP, properties);\n    }\n}\n\n/**\n * simple function bind\n * @param {Function} fn\n * @param {Object} context\n * @returns {Function}\n */\nfunction bindFn(fn, context) {\n    return function boundFn() {\n        return fn.apply(context, arguments);\n    };\n}\n\n/**\n * let a boolean value also be a function that must return a boolean\n * this first item in args will be used as the context\n * @param {Boolean|Function} val\n * @param {Array} [args]\n * @returns {Boolean}\n */\nfunction boolOrFn(val, args) {\n    if (typeof val == TYPE_FUNCTION) {\n        return val.apply(args ? args[0] || undefined : undefined, args);\n    }\n    return val;\n}\n\n/**\n * use the val2 when val1 is undefined\n * @param {*} val1\n * @param {*} val2\n * @returns {*}\n */\nfunction ifUndefined(val1, val2) {\n    return (val1 === undefined) ? val2 : val1;\n}\n\n/**\n * addEventListener with multiple events at once\n * @param {EventTarget} target\n * @param {String} types\n * @param {Function} handler\n */\nfunction addEventListeners(target, types, handler) {\n    each(splitStr(types), function(type) {\n        target.addEventListener(type, handler, false);\n    });\n}\n\n/**\n * removeEventListener with multiple events at once\n * @param {EventTarget} target\n * @param {String} types\n * @param {Function} handler\n */\nfunction removeEventListeners(target, types, handler) {\n    each(splitStr(types), function(type) {\n        target.removeEventListener(type, handler, false);\n    });\n}\n\n/**\n * find if a node is in the given parent\n * @method hasParent\n * @param {HTMLElement} node\n * @param {HTMLElement} parent\n * @return {Boolean} found\n */\nfunction hasParent(node, parent) {\n    while (node) {\n        if (node == parent) {\n            return true;\n        }\n        node = node.parentNode;\n    }\n    return false;\n}\n\n/**\n * small indexOf wrapper\n * @param {String} str\n * @param {String} find\n * @returns {Boolean} found\n */\nfunction inStr(str, find) {\n    return str.indexOf(find) > -1;\n}\n\n/**\n * split string on whitespace\n * @param {String} str\n * @returns {Array} words\n */\nfunction splitStr(str) {\n    return str.trim().split(/\\s+/g);\n}\n\n/**\n * find if a array contains the object using indexOf or a simple polyFill\n * @param {Array} src\n * @param {String} find\n * @param {String} [findByKey]\n * @return {Boolean|Number} false when not found, or the index\n */\nfunction inArray(src, find, findByKey) {\n    if (src.indexOf && !findByKey) {\n        return src.indexOf(find);\n    } else {\n        var i = 0;\n        while (i < src.length) {\n            if ((findByKey && src[i][findByKey] == find) || (!findByKey && src[i] === find)) {\n                return i;\n            }\n            i++;\n        }\n        return -1;\n    }\n}\n\n/**\n * convert array-like objects to real arrays\n * @param {Object} obj\n * @returns {Array}\n */\nfunction toArray(obj) {\n    return Array.prototype.slice.call(obj, 0);\n}\n\n/**\n * unique array with objects based on a key (like 'id') or just by the array's value\n * @param {Array} src [{id:1},{id:2},{id:1}]\n * @param {String} [key]\n * @param {Boolean} [sort=False]\n * @returns {Array} [{id:1},{id:2}]\n */\nfunction uniqueArray(src, key, sort) {\n    var results = [];\n    var values = [];\n    var i = 0;\n\n    while (i < src.length) {\n        var val = key ? src[i][key] : src[i];\n        if (inArray(values, val) < 0) {\n            results.push(src[i]);\n        }\n        values[i] = val;\n        i++;\n    }\n\n    if (sort) {\n        if (!key) {\n            results = results.sort();\n        } else {\n            results = results.sort(function sortUniqueArray(a, b) {\n                return a[key] > b[key];\n            });\n        }\n    }\n\n    return results;\n}\n\n/**\n * get the prefixed property\n * @param {Object} obj\n * @param {String} property\n * @returns {String|Undefined} prefixed\n */\nfunction prefixed(obj, property) {\n    var prefix, prop;\n    var camelProp = property[0].toUpperCase() + property.slice(1);\n\n    var i = 0;\n    while (i < VENDOR_PREFIXES.length) {\n        prefix = VENDOR_PREFIXES[i];\n        prop = (prefix) ? prefix + camelProp : property;\n\n        if (prop in obj) {\n            return prop;\n        }\n        i++;\n    }\n    return undefined;\n}\n\n/**\n * get a unique id\n * @returns {number} uniqueId\n */\nvar _uniqueId = 1;\nfunction uniqueId() {\n    return _uniqueId++;\n}\n\n/**\n * get the window object of an element\n * @param {HTMLElement} element\n * @returns {DocumentView|Window}\n */\nfunction getWindowForElement(element) {\n    var doc = element.ownerDocument || element;\n    return (doc.defaultView || doc.parentWindow || window);\n}\n\nvar MOBILE_REGEX = /mobile|tablet|ip(ad|hone|od)|android/i;\n\nvar SUPPORT_TOUCH = ('ontouchstart' in window);\nvar SUPPORT_POINTER_EVENTS = prefixed(window, 'PointerEvent') !== undefined;\nvar SUPPORT_ONLY_TOUCH = SUPPORT_TOUCH && MOBILE_REGEX.test(navigator.userAgent);\n\nvar INPUT_TYPE_TOUCH = 'touch';\nvar INPUT_TYPE_PEN = 'pen';\nvar INPUT_TYPE_MOUSE = 'mouse';\nvar INPUT_TYPE_KINECT = 'kinect';\n\nvar COMPUTE_INTERVAL = 25;\n\nvar INPUT_START = 1;\nvar INPUT_MOVE = 2;\nvar INPUT_END = 4;\nvar INPUT_CANCEL = 8;\n\nvar DIRECTION_NONE = 1;\nvar DIRECTION_LEFT = 2;\nvar DIRECTION_RIGHT = 4;\nvar DIRECTION_UP = 8;\nvar DIRECTION_DOWN = 16;\n\nvar DIRECTION_HORIZONTAL = DIRECTION_LEFT | DIRECTION_RIGHT;\nvar DIRECTION_VERTICAL = DIRECTION_UP | DIRECTION_DOWN;\nvar DIRECTION_ALL = DIRECTION_HORIZONTAL | DIRECTION_VERTICAL;\n\nvar PROPS_XY = ['x', 'y'];\nvar PROPS_CLIENT_XY = ['clientX', 'clientY'];\n\n/**\n * create new input type manager\n * @param {Manager} manager\n * @param {Function} callback\n * @returns {Input}\n * @constructor\n */\nfunction Input(manager, callback) {\n    var self = this;\n    this.manager = manager;\n    this.callback = callback;\n    this.element = manager.element;\n    this.target = manager.options.inputTarget;\n\n    // smaller wrapper around the handler, for the scope and the enabled state of the manager,\n    // so when disabled the input events are completely bypassed.\n    this.domHandler = function(ev) {\n        if (boolOrFn(manager.options.enable, [manager])) {\n            self.handler(ev);\n        }\n    };\n\n    this.init();\n\n}\n\nInput.prototype = {\n    /**\n     * should handle the inputEvent data and trigger the callback\n     * @virtual\n     */\n    handler: function() { },\n\n    /**\n     * bind the events\n     */\n    init: function() {\n        this.evEl && addEventListeners(this.element, this.evEl, this.domHandler);\n        this.evTarget && addEventListeners(this.target, this.evTarget, this.domHandler);\n        this.evWin && addEventListeners(getWindowForElement(this.element), this.evWin, this.domHandler);\n    },\n\n    /**\n     * unbind the events\n     */\n    destroy: function() {\n        this.evEl && removeEventListeners(this.element, this.evEl, this.domHandler);\n        this.evTarget && removeEventListeners(this.target, this.evTarget, this.domHandler);\n        this.evWin && removeEventListeners(getWindowForElement(this.element), this.evWin, this.domHandler);\n    }\n};\n\n/**\n * create new input type manager\n * called by the Manager constructor\n * @param {Hammer} manager\n * @returns {Input}\n */\nfunction createInputInstance(manager) {\n    var Type;\n    var inputClass = manager.options.inputClass;\n\n    if (inputClass) {\n        Type = inputClass;\n    } else if (SUPPORT_POINTER_EVENTS) {\n        Type = PointerEventInput;\n    } else if (SUPPORT_ONLY_TOUCH) {\n        Type = TouchInput;\n    } else if (!SUPPORT_TOUCH) {\n        Type = MouseInput;\n    } else {\n        Type = TouchMouseInput;\n    }\n    return new (Type)(manager, inputHandler);\n}\n\n/**\n * handle input events\n * @param {Manager} manager\n * @param {String} eventType\n * @param {Object} input\n */\nfunction inputHandler(manager, eventType, input) {\n    var pointersLen = input.pointers.length;\n    var changedPointersLen = input.changedPointers.length;\n    var isFirst = (eventType & INPUT_START && (pointersLen - changedPointersLen === 0));\n    var isFinal = (eventType & (INPUT_END | INPUT_CANCEL) && (pointersLen - changedPointersLen === 0));\n\n    input.isFirst = !!isFirst;\n    input.isFinal = !!isFinal;\n\n    if (isFirst) {\n        manager.session = {};\n    }\n\n    // source event is the normalized value of the domEvents\n    // like 'touchstart, mouseup, pointerdown'\n    input.eventType = eventType;\n\n    // compute scale, rotation etc\n    computeInputData(manager, input);\n\n    // emit secret event\n    manager.emit('hammer.input', input);\n\n    manager.recognize(input);\n    manager.session.prevInput = input;\n}\n\n/**\n * extend the data with some usable properties like scale, rotate, velocity etc\n * @param {Object} manager\n * @param {Object} input\n */\nfunction computeInputData(manager, input) {\n    var session = manager.session;\n    var pointers = input.pointers;\n    var pointersLength = pointers.length;\n\n    // store the first input to calculate the distance and direction\n    if (!session.firstInput) {\n        session.firstInput = simpleCloneInputData(input);\n    }\n\n    // to compute scale and rotation we need to store the multiple touches\n    if (pointersLength > 1 && !session.firstMultiple) {\n        session.firstMultiple = simpleCloneInputData(input);\n    } else if (pointersLength === 1) {\n        session.firstMultiple = false;\n    }\n\n    var firstInput = session.firstInput;\n    var firstMultiple = session.firstMultiple;\n    var offsetCenter = firstMultiple ? firstMultiple.center : firstInput.center;\n\n    var center = input.center = getCenter(pointers);\n    input.timeStamp = now();\n    input.deltaTime = input.timeStamp - firstInput.timeStamp;\n\n    input.angle = getAngle(offsetCenter, center);\n    input.distance = getDistance(offsetCenter, center);\n\n    computeDeltaXY(session, input);\n    input.offsetDirection = getDirection(input.deltaX, input.deltaY);\n\n    var overallVelocity = getVelocity(input.deltaTime, input.deltaX, input.deltaY);\n    input.overallVelocityX = overallVelocity.x;\n    input.overallVelocityY = overallVelocity.y;\n    input.overallVelocity = (abs(overallVelocity.x) > abs(overallVelocity.y)) ? overallVelocity.x : overallVelocity.y;\n\n    input.scale = firstMultiple ? getScale(firstMultiple.pointers, pointers) : 1;\n    input.rotation = firstMultiple ? getRotation(firstMultiple.pointers, pointers) : 0;\n\n    input.maxPointers = !session.prevInput ? input.pointers.length : ((input.pointers.length >\n        session.prevInput.maxPointers) ? input.pointers.length : session.prevInput.maxPointers);\n\n    computeIntervalInputData(session, input);\n\n    // find the correct target\n    var target = manager.element;\n    if (hasParent(input.srcEvent.target, target)) {\n        target = input.srcEvent.target;\n    }\n    input.target = target;\n}\n\nfunction computeDeltaXY(session, input) {\n    var center = input.center;\n    var offset = session.offsetDelta || {};\n    var prevDelta = session.prevDelta || {};\n    var prevInput = session.prevInput || {};\n\n    if (input.eventType === INPUT_START || prevInput.eventType === INPUT_END) {\n        prevDelta = session.prevDelta = {\n            x: prevInput.deltaX || 0,\n            y: prevInput.deltaY || 0\n        };\n\n        offset = session.offsetDelta = {\n            x: center.x,\n            y: center.y\n        };\n    }\n\n    input.deltaX = prevDelta.x + (center.x - offset.x);\n    input.deltaY = prevDelta.y + (center.y - offset.y);\n}\n\n/**\n * velocity is calculated every x ms\n * @param {Object} session\n * @param {Object} input\n */\nfunction computeIntervalInputData(session, input) {\n    var last = session.lastInterval || input,\n        deltaTime = input.timeStamp - last.timeStamp,\n        velocity, velocityX, velocityY, direction;\n\n    if (input.eventType != INPUT_CANCEL && (deltaTime > COMPUTE_INTERVAL || last.velocity === undefined)) {\n        var deltaX = input.deltaX - last.deltaX;\n        var deltaY = input.deltaY - last.deltaY;\n\n        var v = getVelocity(deltaTime, deltaX, deltaY);\n        velocityX = v.x;\n        velocityY = v.y;\n        velocity = (abs(v.x) > abs(v.y)) ? v.x : v.y;\n        direction = getDirection(deltaX, deltaY);\n\n        session.lastInterval = input;\n    } else {\n        // use latest velocity info if it doesn't overtake a minimum period\n        velocity = last.velocity;\n        velocityX = last.velocityX;\n        velocityY = last.velocityY;\n        direction = last.direction;\n    }\n\n    input.velocity = velocity;\n    input.velocityX = velocityX;\n    input.velocityY = velocityY;\n    input.direction = direction;\n}\n\n/**\n * create a simple clone from the input used for storage of firstInput and firstMultiple\n * @param {Object} input\n * @returns {Object} clonedInputData\n */\nfunction simpleCloneInputData(input) {\n    // make a simple copy of the pointers because we will get a reference if we don't\n    // we only need clientXY for the calculations\n    var pointers = [];\n    var i = 0;\n    while (i < input.pointers.length) {\n        pointers[i] = {\n            clientX: round(input.pointers[i].clientX),\n            clientY: round(input.pointers[i].clientY)\n        };\n        i++;\n    }\n\n    return {\n        timeStamp: now(),\n        pointers: pointers,\n        center: getCenter(pointers),\n        deltaX: input.deltaX,\n        deltaY: input.deltaY\n    };\n}\n\n/**\n * get the center of all the pointers\n * @param {Array} pointers\n * @return {Object} center contains `x` and `y` properties\n */\nfunction getCenter(pointers) {\n    var pointersLength = pointers.length;\n\n    // no need to loop when only one touch\n    if (pointersLength === 1) {\n        return {\n            x: round(pointers[0].clientX),\n            y: round(pointers[0].clientY)\n        };\n    }\n\n    var x = 0, y = 0, i = 0;\n    while (i < pointersLength) {\n        x += pointers[i].clientX;\n        y += pointers[i].clientY;\n        i++;\n    }\n\n    return {\n        x: round(x / pointersLength),\n        y: round(y / pointersLength)\n    };\n}\n\n/**\n * calculate the velocity between two points. unit is in px per ms.\n * @param {Number} deltaTime\n * @param {Number} x\n * @param {Number} y\n * @return {Object} velocity `x` and `y`\n */\nfunction getVelocity(deltaTime, x, y) {\n    return {\n        x: x / deltaTime || 0,\n        y: y / deltaTime || 0\n    };\n}\n\n/**\n * get the direction between two points\n * @param {Number} x\n * @param {Number} y\n * @return {Number} direction\n */\nfunction getDirection(x, y) {\n    if (x === y) {\n        return DIRECTION_NONE;\n    }\n\n    if (abs(x) >= abs(y)) {\n        return x < 0 ? DIRECTION_LEFT : DIRECTION_RIGHT;\n    }\n    return y < 0 ? DIRECTION_UP : DIRECTION_DOWN;\n}\n\n/**\n * calculate the absolute distance between two points\n * @param {Object} p1 {x, y}\n * @param {Object} p2 {x, y}\n * @param {Array} [props] containing x and y keys\n * @return {Number} distance\n */\nfunction getDistance(p1, p2, props) {\n    if (!props) {\n        props = PROPS_XY;\n    }\n    var x = p2[props[0]] - p1[props[0]],\n        y = p2[props[1]] - p1[props[1]];\n\n    return Math.sqrt((x * x) + (y * y));\n}\n\n/**\n * calculate the angle between two coordinates\n * @param {Object} p1\n * @param {Object} p2\n * @param {Array} [props] containing x and y keys\n * @return {Number} angle\n */\nfunction getAngle(p1, p2, props) {\n    if (!props) {\n        props = PROPS_XY;\n    }\n    var x = p2[props[0]] - p1[props[0]],\n        y = p2[props[1]] - p1[props[1]];\n    return Math.atan2(y, x) * 180 / Math.PI;\n}\n\n/**\n * calculate the rotation degrees between two pointersets\n * @param {Array} start array of pointers\n * @param {Array} end array of pointers\n * @return {Number} rotation\n */\nfunction getRotation(start, end) {\n    return getAngle(end[1], end[0], PROPS_CLIENT_XY) + getAngle(start[1], start[0], PROPS_CLIENT_XY);\n}\n\n/**\n * calculate the scale factor between two pointersets\n * no scale is 1, and goes down to 0 when pinched together, and bigger when pinched out\n * @param {Array} start array of pointers\n * @param {Array} end array of pointers\n * @return {Number} scale\n */\nfunction getScale(start, end) {\n    return getDistance(end[0], end[1], PROPS_CLIENT_XY) / getDistance(start[0], start[1], PROPS_CLIENT_XY);\n}\n\nvar MOUSE_INPUT_MAP = {\n    mousedown: INPUT_START,\n    mousemove: INPUT_MOVE,\n    mouseup: INPUT_END\n};\n\nvar MOUSE_ELEMENT_EVENTS = 'mousedown';\nvar MOUSE_WINDOW_EVENTS = 'mousemove mouseup';\n\n/**\n * Mouse events input\n * @constructor\n * @extends Input\n */\nfunction MouseInput() {\n    this.evEl = MOUSE_ELEMENT_EVENTS;\n    this.evWin = MOUSE_WINDOW_EVENTS;\n\n    this.pressed = false; // mousedown state\n\n    Input.apply(this, arguments);\n}\n\ninherit(MouseInput, Input, {\n    /**\n     * handle mouse events\n     * @param {Object} ev\n     */\n    handler: function MEhandler(ev) {\n        var eventType = MOUSE_INPUT_MAP[ev.type];\n\n        // on start we want to have the left mouse button down\n        if (eventType & INPUT_START && ev.button === 0) {\n            this.pressed = true;\n        }\n\n        if (eventType & INPUT_MOVE && ev.which !== 1) {\n            eventType = INPUT_END;\n        }\n\n        // mouse must be down\n        if (!this.pressed) {\n            return;\n        }\n\n        if (eventType & INPUT_END) {\n            this.pressed = false;\n        }\n\n        this.callback(this.manager, eventType, {\n            pointers: [ev],\n            changedPointers: [ev],\n            pointerType: INPUT_TYPE_MOUSE,\n            srcEvent: ev\n        });\n    }\n});\n\nvar POINTER_INPUT_MAP = {\n    pointerdown: INPUT_START,\n    pointermove: INPUT_MOVE,\n    pointerup: INPUT_END,\n    pointercancel: INPUT_CANCEL,\n    pointerout: INPUT_CANCEL\n};\n\n// in IE10 the pointer types is defined as an enum\nvar IE10_POINTER_TYPE_ENUM = {\n    2: INPUT_TYPE_TOUCH,\n    3: INPUT_TYPE_PEN,\n    4: INPUT_TYPE_MOUSE,\n    5: INPUT_TYPE_KINECT // see https://twitter.com/jacobrossi/status/480596438489890816\n};\n\nvar POINTER_ELEMENT_EVENTS = 'pointerdown';\nvar POINTER_WINDOW_EVENTS = 'pointermove pointerup pointercancel';\n\n// IE10 has prefixed support, and case-sensitive\nif (window.MSPointerEvent && !window.PointerEvent) {\n    POINTER_ELEMENT_EVENTS = 'MSPointerDown';\n    POINTER_WINDOW_EVENTS = 'MSPointerMove MSPointerUp MSPointerCancel';\n}\n\n/**\n * Pointer events input\n * @constructor\n * @extends Input\n */\nfunction PointerEventInput() {\n    this.evEl = POINTER_ELEMENT_EVENTS;\n    this.evWin = POINTER_WINDOW_EVENTS;\n\n    Input.apply(this, arguments);\n\n    this.store = (this.manager.session.pointerEvents = []);\n}\n\ninherit(PointerEventInput, Input, {\n    /**\n     * handle mouse events\n     * @param {Object} ev\n     */\n    handler: function PEhandler(ev) {\n        var store = this.store;\n        var removePointer = false;\n\n        var eventTypeNormalized = ev.type.toLowerCase().replace('ms', '');\n        var eventType = POINTER_INPUT_MAP[eventTypeNormalized];\n        var pointerType = IE10_POINTER_TYPE_ENUM[ev.pointerType] || ev.pointerType;\n\n        var isTouch = (pointerType == INPUT_TYPE_TOUCH);\n\n        // get index of the event in the store\n        var storeIndex = inArray(store, ev.pointerId, 'pointerId');\n\n        // start and mouse must be down\n        if (eventType & INPUT_START && (ev.button === 0 || isTouch)) {\n            if (storeIndex < 0) {\n                store.push(ev);\n                storeIndex = store.length - 1;\n            }\n        } else if (eventType & (INPUT_END | INPUT_CANCEL)) {\n            removePointer = true;\n        }\n\n        // it not found, so the pointer hasn't been down (so it's probably a hover)\n        if (storeIndex < 0) {\n            return;\n        }\n\n        // update the event in the store\n        store[storeIndex] = ev;\n\n        this.callback(this.manager, eventType, {\n            pointers: store,\n            changedPointers: [ev],\n            pointerType: pointerType,\n            srcEvent: ev\n        });\n\n        if (removePointer) {\n            // remove from the store\n            store.splice(storeIndex, 1);\n        }\n    }\n});\n\nvar SINGLE_TOUCH_INPUT_MAP = {\n    touchstart: INPUT_START,\n    touchmove: INPUT_MOVE,\n    touchend: INPUT_END,\n    touchcancel: INPUT_CANCEL\n};\n\nvar SINGLE_TOUCH_TARGET_EVENTS = 'touchstart';\nvar SINGLE_TOUCH_WINDOW_EVENTS = 'touchstart touchmove touchend touchcancel';\n\n/**\n * Touch events input\n * @constructor\n * @extends Input\n */\nfunction SingleTouchInput() {\n    this.evTarget = SINGLE_TOUCH_TARGET_EVENTS;\n    this.evWin = SINGLE_TOUCH_WINDOW_EVENTS;\n    this.started = false;\n\n    Input.apply(this, arguments);\n}\n\ninherit(SingleTouchInput, Input, {\n    handler: function TEhandler(ev) {\n        var type = SINGLE_TOUCH_INPUT_MAP[ev.type];\n\n        // should we handle the touch events?\n        if (type === INPUT_START) {\n            this.started = true;\n        }\n\n        if (!this.started) {\n            return;\n        }\n\n        var touches = normalizeSingleTouches.call(this, ev, type);\n\n        // when done, reset the started state\n        if (type & (INPUT_END | INPUT_CANCEL) && touches[0].length - touches[1].length === 0) {\n            this.started = false;\n        }\n\n        this.callback(this.manager, type, {\n            pointers: touches[0],\n            changedPointers: touches[1],\n            pointerType: INPUT_TYPE_TOUCH,\n            srcEvent: ev\n        });\n    }\n});\n\n/**\n * @this {TouchInput}\n * @param {Object} ev\n * @param {Number} type flag\n * @returns {undefined|Array} [all, changed]\n */\nfunction normalizeSingleTouches(ev, type) {\n    var all = toArray(ev.touches);\n    var changed = toArray(ev.changedTouches);\n\n    if (type & (INPUT_END | INPUT_CANCEL)) {\n        all = uniqueArray(all.concat(changed), 'identifier', true);\n    }\n\n    return [all, changed];\n}\n\nvar TOUCH_INPUT_MAP = {\n    touchstart: INPUT_START,\n    touchmove: INPUT_MOVE,\n    touchend: INPUT_END,\n    touchcancel: INPUT_CANCEL\n};\n\nvar TOUCH_TARGET_EVENTS = 'touchstart touchmove touchend touchcancel';\n\n/**\n * Multi-user touch events input\n * @constructor\n * @extends Input\n */\nfunction TouchInput() {\n    this.evTarget = TOUCH_TARGET_EVENTS;\n    this.targetIds = {};\n\n    Input.apply(this, arguments);\n}\n\ninherit(TouchInput, Input, {\n    handler: function MTEhandler(ev) {\n        var type = TOUCH_INPUT_MAP[ev.type];\n        var touches = getTouches.call(this, ev, type);\n        if (!touches) {\n            return;\n        }\n\n        this.callback(this.manager, type, {\n            pointers: touches[0],\n            changedPointers: touches[1],\n            pointerType: INPUT_TYPE_TOUCH,\n            srcEvent: ev\n        });\n    }\n});\n\n/**\n * @this {TouchInput}\n * @param {Object} ev\n * @param {Number} type flag\n * @returns {undefined|Array} [all, changed]\n */\nfunction getTouches(ev, type) {\n    var allTouches = toArray(ev.touches);\n    var targetIds = this.targetIds;\n\n    // when there is only one touch, the process can be simplified\n    if (type & (INPUT_START | INPUT_MOVE) && allTouches.length === 1) {\n        targetIds[allTouches[0].identifier] = true;\n        return [allTouches, allTouches];\n    }\n\n    var i,\n        targetTouches,\n        changedTouches = toArray(ev.changedTouches),\n        changedTargetTouches = [],\n        target = this.target;\n\n    // get target touches from touches\n    targetTouches = allTouches.filter(function(touch) {\n        return hasParent(touch.target, target);\n    });\n\n    // collect touches\n    if (type === INPUT_START) {\n        i = 0;\n        while (i < targetTouches.length) {\n            targetIds[targetTouches[i].identifier] = true;\n            i++;\n        }\n    }\n\n    // filter changed touches to only contain touches that exist in the collected target ids\n    i = 0;\n    while (i < changedTouches.length) {\n        if (targetIds[changedTouches[i].identifier]) {\n            changedTargetTouches.push(changedTouches[i]);\n        }\n\n        // cleanup removed touches\n        if (type & (INPUT_END | INPUT_CANCEL)) {\n            delete targetIds[changedTouches[i].identifier];\n        }\n        i++;\n    }\n\n    if (!changedTargetTouches.length) {\n        return;\n    }\n\n    return [\n        // merge targetTouches with changedTargetTouches so it contains ALL touches, including 'end' and 'cancel'\n        uniqueArray(targetTouches.concat(changedTargetTouches), 'identifier', true),\n        changedTargetTouches\n    ];\n}\n\n/**\n * Combined touch and mouse input\n *\n * Touch has a higher priority then mouse, and while touching no mouse events are allowed.\n * This because touch devices also emit mouse events while doing a touch.\n *\n * @constructor\n * @extends Input\n */\n\nvar DEDUP_TIMEOUT = 2500;\nvar DEDUP_DISTANCE = 25;\n\nfunction TouchMouseInput() {\n    Input.apply(this, arguments);\n\n    var handler = bindFn(this.handler, this);\n    this.touch = new TouchInput(this.manager, handler);\n    this.mouse = new MouseInput(this.manager, handler);\n\n    this.primaryTouch = null;\n    this.lastTouches = [];\n}\n\ninherit(TouchMouseInput, Input, {\n    /**\n     * handle mouse and touch events\n     * @param {Hammer} manager\n     * @param {String} inputEvent\n     * @param {Object} inputData\n     */\n    handler: function TMEhandler(manager, inputEvent, inputData) {\n        var isTouch = (inputData.pointerType == INPUT_TYPE_TOUCH),\n            isMouse = (inputData.pointerType == INPUT_TYPE_MOUSE);\n\n        if (isMouse && inputData.sourceCapabilities && inputData.sourceCapabilities.firesTouchEvents) {\n            return;\n        }\n\n        // when we're in a touch event, record touches to  de-dupe synthetic mouse event\n        if (isTouch) {\n            recordTouches.call(this, inputEvent, inputData);\n        } else if (isMouse && isSyntheticEvent.call(this, inputData)) {\n            return;\n        }\n\n        this.callback(manager, inputEvent, inputData);\n    },\n\n    /**\n     * remove the event listeners\n     */\n    destroy: function destroy() {\n        this.touch.destroy();\n        this.mouse.destroy();\n    }\n});\n\nfunction recordTouches(eventType, eventData) {\n    if (eventType & INPUT_START) {\n        this.primaryTouch = eventData.changedPointers[0].identifier;\n        setLastTouch.call(this, eventData);\n    } else if (eventType & (INPUT_END | INPUT_CANCEL)) {\n        setLastTouch.call(this, eventData);\n    }\n}\n\nfunction setLastTouch(eventData) {\n    var touch = eventData.changedPointers[0];\n\n    if (touch.identifier === this.primaryTouch) {\n        var lastTouch = {x: touch.clientX, y: touch.clientY};\n        this.lastTouches.push(lastTouch);\n        var lts = this.lastTouches;\n        var removeLastTouch = function() {\n            var i = lts.indexOf(lastTouch);\n            if (i > -1) {\n                lts.splice(i, 1);\n            }\n        };\n        setTimeout(removeLastTouch, DEDUP_TIMEOUT);\n    }\n}\n\nfunction isSyntheticEvent(eventData) {\n    var x = eventData.srcEvent.clientX, y = eventData.srcEvent.clientY;\n    for (var i = 0; i < this.lastTouches.length; i++) {\n        var t = this.lastTouches[i];\n        var dx = Math.abs(x - t.x), dy = Math.abs(y - t.y);\n        if (dx <= DEDUP_DISTANCE && dy <= DEDUP_DISTANCE) {\n            return true;\n        }\n    }\n    return false;\n}\n\nvar PREFIXED_TOUCH_ACTION = prefixed(TEST_ELEMENT.style, 'touchAction');\nvar NATIVE_TOUCH_ACTION = PREFIXED_TOUCH_ACTION !== undefined;\n\n// magical touchAction value\nvar TOUCH_ACTION_COMPUTE = 'compute';\nvar TOUCH_ACTION_AUTO = 'auto';\nvar TOUCH_ACTION_MANIPULATION = 'manipulation'; // not implemented\nvar TOUCH_ACTION_NONE = 'none';\nvar TOUCH_ACTION_PAN_X = 'pan-x';\nvar TOUCH_ACTION_PAN_Y = 'pan-y';\nvar TOUCH_ACTION_MAP = getTouchActionProps();\n\n/**\n * Touch Action\n * sets the touchAction property or uses the js alternative\n * @param {Manager} manager\n * @param {String} value\n * @constructor\n */\nfunction TouchAction(manager, value) {\n    this.manager = manager;\n    this.set(value);\n}\n\nTouchAction.prototype = {\n    /**\n     * set the touchAction value on the element or enable the polyfill\n     * @param {String} value\n     */\n    set: function(value) {\n        // find out the touch-action by the event handlers\n        if (value == TOUCH_ACTION_COMPUTE) {\n            value = this.compute();\n        }\n\n        if (NATIVE_TOUCH_ACTION && this.manager.element.style && TOUCH_ACTION_MAP[value]) {\n            this.manager.element.style[PREFIXED_TOUCH_ACTION] = value;\n        }\n        this.actions = value.toLowerCase().trim();\n    },\n\n    /**\n     * just re-set the touchAction value\n     */\n    update: function() {\n        this.set(this.manager.options.touchAction);\n    },\n\n    /**\n     * compute the value for the touchAction property based on the recognizer's settings\n     * @returns {String} value\n     */\n    compute: function() {\n        var actions = [];\n        each(this.manager.recognizers, function(recognizer) {\n            if (boolOrFn(recognizer.options.enable, [recognizer])) {\n                actions = actions.concat(recognizer.getTouchAction());\n            }\n        });\n        return cleanTouchActions(actions.join(' '));\n    },\n\n    /**\n     * this method is called on each input cycle and provides the preventing of the browser behavior\n     * @param {Object} input\n     */\n    preventDefaults: function(input) {\n        var srcEvent = input.srcEvent;\n        var direction = input.offsetDirection;\n\n        // if the touch action did prevented once this session\n        if (this.manager.session.prevented) {\n            srcEvent.preventDefault();\n            return;\n        }\n\n        var actions = this.actions;\n        var hasNone = inStr(actions, TOUCH_ACTION_NONE) && !TOUCH_ACTION_MAP[TOUCH_ACTION_NONE];\n        var hasPanY = inStr(actions, TOUCH_ACTION_PAN_Y) && !TOUCH_ACTION_MAP[TOUCH_ACTION_PAN_Y];\n        var hasPanX = inStr(actions, TOUCH_ACTION_PAN_X) && !TOUCH_ACTION_MAP[TOUCH_ACTION_PAN_X];\n\n        if (hasNone) {\n            //do not prevent defaults if this is a tap gesture\n\n            var isTapPointer = input.pointers.length === 1;\n            var isTapMovement = input.distance < 2;\n            var isTapTouchTime = input.deltaTime < 250;\n\n            if (isTapPointer && isTapMovement && isTapTouchTime) {\n                return;\n            }\n        }\n\n        if (hasPanX && hasPanY) {\n            // `pan-x pan-y` means browser handles all scrolling/panning, do not prevent\n            return;\n        }\n\n        if (hasNone ||\n            (hasPanY && direction & DIRECTION_HORIZONTAL) ||\n            (hasPanX && direction & DIRECTION_VERTICAL)) {\n            return this.preventSrc(srcEvent);\n        }\n    },\n\n    /**\n     * call preventDefault to prevent the browser's default behavior (scrolling in most cases)\n     * @param {Object} srcEvent\n     */\n    preventSrc: function(srcEvent) {\n        this.manager.session.prevented = true;\n        srcEvent.preventDefault();\n    }\n};\n\n/**\n * when the touchActions are collected they are not a valid value, so we need to clean things up. *\n * @param {String} actions\n * @returns {*}\n */\nfunction cleanTouchActions(actions) {\n    // none\n    if (inStr(actions, TOUCH_ACTION_NONE)) {\n        return TOUCH_ACTION_NONE;\n    }\n\n    var hasPanX = inStr(actions, TOUCH_ACTION_PAN_X);\n    var hasPanY = inStr(actions, TOUCH_ACTION_PAN_Y);\n\n    // if both pan-x and pan-y are set (different recognizers\n    // for different directions, e.g. horizontal pan but vertical swipe?)\n    // we need none (as otherwise with pan-x pan-y combined none of these\n    // recognizers will work, since the browser would handle all panning\n    if (hasPanX && hasPanY) {\n        return TOUCH_ACTION_NONE;\n    }\n\n    // pan-x OR pan-y\n    if (hasPanX || hasPanY) {\n        return hasPanX ? TOUCH_ACTION_PAN_X : TOUCH_ACTION_PAN_Y;\n    }\n\n    // manipulation\n    if (inStr(actions, TOUCH_ACTION_MANIPULATION)) {\n        return TOUCH_ACTION_MANIPULATION;\n    }\n\n    return TOUCH_ACTION_AUTO;\n}\n\nfunction getTouchActionProps() {\n    if (!NATIVE_TOUCH_ACTION) {\n        return false;\n    }\n    var touchMap = {};\n    var cssSupports = window.CSS && window.CSS.supports;\n    ['auto', 'manipulation', 'pan-y', 'pan-x', 'pan-x pan-y', 'none'].forEach(function(val) {\n\n        // If css.supports is not supported but there is native touch-action assume it supports\n        // all values. This is the case for IE 10 and 11.\n        touchMap[val] = cssSupports ? window.CSS.supports('touch-action', val) : true;\n    });\n    return touchMap;\n}\n\n/**\n * Recognizer flow explained; *\n * All recognizers have the initial state of POSSIBLE when a input session starts.\n * The definition of a input session is from the first input until the last input, with all it's movement in it. *\n * Example session for mouse-input: mousedown -> mousemove -> mouseup\n *\n * On each recognizing cycle (see Manager.recognize) the .recognize() method is executed\n * which determines with state it should be.\n *\n * If the recognizer has the state FAILED, CANCELLED or RECOGNIZED (equals ENDED), it is reset to\n * POSSIBLE to give it another change on the next cycle.\n *\n *               Possible\n *                  |\n *            +-----+---------------+\n *            |                     |\n *      +-----+-----+               |\n *      |           |               |\n *   Failed      Cancelled          |\n *                          +-------+------+\n *                          |              |\n *                      Recognized       Began\n *                                         |\n *                                      Changed\n *                                         |\n *                                  Ended/Recognized\n */\nvar STATE_POSSIBLE = 1;\nvar STATE_BEGAN = 2;\nvar STATE_CHANGED = 4;\nvar STATE_ENDED = 8;\nvar STATE_RECOGNIZED = STATE_ENDED;\nvar STATE_CANCELLED = 16;\nvar STATE_FAILED = 32;\n\n/**\n * Recognizer\n * Every recognizer needs to extend from this class.\n * @constructor\n * @param {Object} options\n */\nfunction Recognizer(options) {\n    this.options = assign({}, this.defaults, options || {});\n\n    this.id = uniqueId();\n\n    this.manager = null;\n\n    // default is enable true\n    this.options.enable = ifUndefined(this.options.enable, true);\n\n    this.state = STATE_POSSIBLE;\n\n    this.simultaneous = {};\n    this.requireFail = [];\n}\n\nRecognizer.prototype = {\n    /**\n     * @virtual\n     * @type {Object}\n     */\n    defaults: {},\n\n    /**\n     * set options\n     * @param {Object} options\n     * @return {Recognizer}\n     */\n    set: function(options) {\n        assign(this.options, options);\n\n        // also update the touchAction, in case something changed about the directions/enabled state\n        this.manager && this.manager.touchAction.update();\n        return this;\n    },\n\n    /**\n     * recognize simultaneous with an other recognizer.\n     * @param {Recognizer} otherRecognizer\n     * @returns {Recognizer} this\n     */\n    recognizeWith: function(otherRecognizer) {\n        if (invokeArrayArg(otherRecognizer, 'recognizeWith', this)) {\n            return this;\n        }\n\n        var simultaneous = this.simultaneous;\n        otherRecognizer = getRecognizerByNameIfManager(otherRecognizer, this);\n        if (!simultaneous[otherRecognizer.id]) {\n            simultaneous[otherRecognizer.id] = otherRecognizer;\n            otherRecognizer.recognizeWith(this);\n        }\n        return this;\n    },\n\n    /**\n     * drop the simultaneous link. it doesnt remove the link on the other recognizer.\n     * @param {Recognizer} otherRecognizer\n     * @returns {Recognizer} this\n     */\n    dropRecognizeWith: function(otherRecognizer) {\n        if (invokeArrayArg(otherRecognizer, 'dropRecognizeWith', this)) {\n            return this;\n        }\n\n        otherRecognizer = getRecognizerByNameIfManager(otherRecognizer, this);\n        delete this.simultaneous[otherRecognizer.id];\n        return this;\n    },\n\n    /**\n     * recognizer can only run when an other is failing\n     * @param {Recognizer} otherRecognizer\n     * @returns {Recognizer} this\n     */\n    requireFailure: function(otherRecognizer) {\n        if (invokeArrayArg(otherRecognizer, 'requireFailure', this)) {\n            return this;\n        }\n\n        var requireFail = this.requireFail;\n        otherRecognizer = getRecognizerByNameIfManager(otherRecognizer, this);\n        if (inArray(requireFail, otherRecognizer) === -1) {\n            requireFail.push(otherRecognizer);\n            otherRecognizer.requireFailure(this);\n        }\n        return this;\n    },\n\n    /**\n     * drop the requireFailure link. it does not remove the link on the other recognizer.\n     * @param {Recognizer} otherRecognizer\n     * @returns {Recognizer} this\n     */\n    dropRequireFailure: function(otherRecognizer) {\n        if (invokeArrayArg(otherRecognizer, 'dropRequireFailure', this)) {\n            return this;\n        }\n\n        otherRecognizer = getRecognizerByNameIfManager(otherRecognizer, this);\n        var index = inArray(this.requireFail, otherRecognizer);\n        if (index > -1) {\n            this.requireFail.splice(index, 1);\n        }\n        return this;\n    },\n\n    /**\n     * has require failures boolean\n     * @returns {boolean}\n     */\n    hasRequireFailures: function() {\n        return this.requireFail.length > 0;\n    },\n\n    /**\n     * if the recognizer can recognize simultaneous with an other recognizer\n     * @param {Recognizer} otherRecognizer\n     * @returns {Boolean}\n     */\n    canRecognizeWith: function(otherRecognizer) {\n        return !!this.simultaneous[otherRecognizer.id];\n    },\n\n    /**\n     * You should use `tryEmit` instead of `emit` directly to check\n     * that all the needed recognizers has failed before emitting.\n     * @param {Object} input\n     */\n    emit: function(input) {\n        var self = this;\n        var state = this.state;\n\n        function emit(event) {\n            self.manager.emit(event, input);\n        }\n\n        // 'panstart' and 'panmove'\n        if (state < STATE_ENDED) {\n            emit(self.options.event + stateStr(state));\n        }\n\n        emit(self.options.event); // simple 'eventName' events\n\n        if (input.additionalEvent) { // additional event(panleft, panright, pinchin, pinchout...)\n            emit(input.additionalEvent);\n        }\n\n        // panend and pancancel\n        if (state >= STATE_ENDED) {\n            emit(self.options.event + stateStr(state));\n        }\n    },\n\n    /**\n     * Check that all the require failure recognizers has failed,\n     * if true, it emits a gesture event,\n     * otherwise, setup the state to FAILED.\n     * @param {Object} input\n     */\n    tryEmit: function(input) {\n        if (this.canEmit()) {\n            return this.emit(input);\n        }\n        // it's failing anyway\n        this.state = STATE_FAILED;\n    },\n\n    /**\n     * can we emit?\n     * @returns {boolean}\n     */\n    canEmit: function() {\n        var i = 0;\n        while (i < this.requireFail.length) {\n            if (!(this.requireFail[i].state & (STATE_FAILED | STATE_POSSIBLE))) {\n                return false;\n            }\n            i++;\n        }\n        return true;\n    },\n\n    /**\n     * update the recognizer\n     * @param {Object} inputData\n     */\n    recognize: function(inputData) {\n        // make a new copy of the inputData\n        // so we can change the inputData without messing up the other recognizers\n        var inputDataClone = assign({}, inputData);\n\n        // is is enabled and allow recognizing?\n        if (!boolOrFn(this.options.enable, [this, inputDataClone])) {\n            this.reset();\n            this.state = STATE_FAILED;\n            return;\n        }\n\n        // reset when we've reached the end\n        if (this.state & (STATE_RECOGNIZED | STATE_CANCELLED | STATE_FAILED)) {\n            this.state = STATE_POSSIBLE;\n        }\n\n        this.state = this.process(inputDataClone);\n\n        // the recognizer has recognized a gesture\n        // so trigger an event\n        if (this.state & (STATE_BEGAN | STATE_CHANGED | STATE_ENDED | STATE_CANCELLED)) {\n            this.tryEmit(inputDataClone);\n        }\n    },\n\n    /**\n     * return the state of the recognizer\n     * the actual recognizing happens in this method\n     * @virtual\n     * @param {Object} inputData\n     * @returns {Const} STATE\n     */\n    process: function(inputData) { }, // jshint ignore:line\n\n    /**\n     * return the preferred touch-action\n     * @virtual\n     * @returns {Array}\n     */\n    getTouchAction: function() { },\n\n    /**\n     * called when the gesture isn't allowed to recognize\n     * like when another is being recognized or it is disabled\n     * @virtual\n     */\n    reset: function() { }\n};\n\n/**\n * get a usable string, used as event postfix\n * @param {Const} state\n * @returns {String} state\n */\nfunction stateStr(state) {\n    if (state & STATE_CANCELLED) {\n        return 'cancel';\n    } else if (state & STATE_ENDED) {\n        return 'end';\n    } else if (state & STATE_CHANGED) {\n        return 'move';\n    } else if (state & STATE_BEGAN) {\n        return 'start';\n    }\n    return '';\n}\n\n/**\n * direction cons to string\n * @param {Const} direction\n * @returns {String}\n */\nfunction directionStr(direction) {\n    if (direction == DIRECTION_DOWN) {\n        return 'down';\n    } else if (direction == DIRECTION_UP) {\n        return 'up';\n    } else if (direction == DIRECTION_LEFT) {\n        return 'left';\n    } else if (direction == DIRECTION_RIGHT) {\n        return 'right';\n    }\n    return '';\n}\n\n/**\n * get a recognizer by name if it is bound to a manager\n * @param {Recognizer|String} otherRecognizer\n * @param {Recognizer} recognizer\n * @returns {Recognizer}\n */\nfunction getRecognizerByNameIfManager(otherRecognizer, recognizer) {\n    var manager = recognizer.manager;\n    if (manager) {\n        return manager.get(otherRecognizer);\n    }\n    return otherRecognizer;\n}\n\n/**\n * This recognizer is just used as a base for the simple attribute recognizers.\n * @constructor\n * @extends Recognizer\n */\nfunction AttrRecognizer() {\n    Recognizer.apply(this, arguments);\n}\n\ninherit(AttrRecognizer, Recognizer, {\n    /**\n     * @namespace\n     * @memberof AttrRecognizer\n     */\n    defaults: {\n        /**\n         * @type {Number}\n         * @default 1\n         */\n        pointers: 1\n    },\n\n    /**\n     * Used to check if it the recognizer receives valid input, like input.distance > 10.\n     * @memberof AttrRecognizer\n     * @param {Object} input\n     * @returns {Boolean} recognized\n     */\n    attrTest: function(input) {\n        var optionPointers = this.options.pointers;\n        return optionPointers === 0 || input.pointers.length === optionPointers;\n    },\n\n    /**\n     * Process the input and return the state for the recognizer\n     * @memberof AttrRecognizer\n     * @param {Object} input\n     * @returns {*} State\n     */\n    process: function(input) {\n        var state = this.state;\n        var eventType = input.eventType;\n\n        var isRecognized = state & (STATE_BEGAN | STATE_CHANGED);\n        var isValid = this.attrTest(input);\n\n        // on cancel input and we've recognized before, return STATE_CANCELLED\n        if (isRecognized && (eventType & INPUT_CANCEL || !isValid)) {\n            return state | STATE_CANCELLED;\n        } else if (isRecognized || isValid) {\n            if (eventType & INPUT_END) {\n                return state | STATE_ENDED;\n            } else if (!(state & STATE_BEGAN)) {\n                return STATE_BEGAN;\n            }\n            return state | STATE_CHANGED;\n        }\n        return STATE_FAILED;\n    }\n});\n\n/**\n * Pan\n * Recognized when the pointer is down and moved in the allowed direction.\n * @constructor\n * @extends AttrRecognizer\n */\nfunction PanRecognizer() {\n    AttrRecognizer.apply(this, arguments);\n\n    this.pX = null;\n    this.pY = null;\n}\n\ninherit(PanRecognizer, AttrRecognizer, {\n    /**\n     * @namespace\n     * @memberof PanRecognizer\n     */\n    defaults: {\n        event: 'pan',\n        threshold: 10,\n        pointers: 1,\n        direction: DIRECTION_ALL\n    },\n\n    getTouchAction: function() {\n        var direction = this.options.direction;\n        var actions = [];\n        if (direction & DIRECTION_HORIZONTAL) {\n            actions.push(TOUCH_ACTION_PAN_Y);\n        }\n        if (direction & DIRECTION_VERTICAL) {\n            actions.push(TOUCH_ACTION_PAN_X);\n        }\n        return actions;\n    },\n\n    directionTest: function(input) {\n        var options = this.options;\n        var hasMoved = true;\n        var distance = input.distance;\n        var direction = input.direction;\n        var x = input.deltaX;\n        var y = input.deltaY;\n\n        // lock to axis?\n        if (!(direction & options.direction)) {\n            if (options.direction & DIRECTION_HORIZONTAL) {\n                direction = (x === 0) ? DIRECTION_NONE : (x < 0) ? DIRECTION_LEFT : DIRECTION_RIGHT;\n                hasMoved = x != this.pX;\n                distance = Math.abs(input.deltaX);\n            } else {\n                direction = (y === 0) ? DIRECTION_NONE : (y < 0) ? DIRECTION_UP : DIRECTION_DOWN;\n                hasMoved = y != this.pY;\n                distance = Math.abs(input.deltaY);\n            }\n        }\n        input.direction = direction;\n        return hasMoved && distance > options.threshold && direction & options.direction;\n    },\n\n    attrTest: function(input) {\n        return AttrRecognizer.prototype.attrTest.call(this, input) &&\n            (this.state & STATE_BEGAN || (!(this.state & STATE_BEGAN) && this.directionTest(input)));\n    },\n\n    emit: function(input) {\n\n        this.pX = input.deltaX;\n        this.pY = input.deltaY;\n\n        var direction = directionStr(input.direction);\n\n        if (direction) {\n            input.additionalEvent = this.options.event + direction;\n        }\n        this._super.emit.call(this, input);\n    }\n});\n\n/**\n * Pinch\n * Recognized when two or more pointers are moving toward (zoom-in) or away from each other (zoom-out).\n * @constructor\n * @extends AttrRecognizer\n */\nfunction PinchRecognizer() {\n    AttrRecognizer.apply(this, arguments);\n}\n\ninherit(PinchRecognizer, AttrRecognizer, {\n    /**\n     * @namespace\n     * @memberof PinchRecognizer\n     */\n    defaults: {\n        event: 'pinch',\n        threshold: 0,\n        pointers: 2\n    },\n\n    getTouchAction: function() {\n        return [TOUCH_ACTION_NONE];\n    },\n\n    attrTest: function(input) {\n        return this._super.attrTest.call(this, input) &&\n            (Math.abs(input.scale - 1) > this.options.threshold || this.state & STATE_BEGAN);\n    },\n\n    emit: function(input) {\n        if (input.scale !== 1) {\n            var inOut = input.scale < 1 ? 'in' : 'out';\n            input.additionalEvent = this.options.event + inOut;\n        }\n        this._super.emit.call(this, input);\n    }\n});\n\n/**\n * Press\n * Recognized when the pointer is down for x ms without any movement.\n * @constructor\n * @extends Recognizer\n */\nfunction PressRecognizer() {\n    Recognizer.apply(this, arguments);\n\n    this._timer = null;\n    this._input = null;\n}\n\ninherit(PressRecognizer, Recognizer, {\n    /**\n     * @namespace\n     * @memberof PressRecognizer\n     */\n    defaults: {\n        event: 'press',\n        pointers: 1,\n        time: 251, // minimal time of the pointer to be pressed\n        threshold: 9 // a minimal movement is ok, but keep it low\n    },\n\n    getTouchAction: function() {\n        return [TOUCH_ACTION_AUTO];\n    },\n\n    process: function(input) {\n        var options = this.options;\n        var validPointers = input.pointers.length === options.pointers;\n        var validMovement = input.distance < options.threshold;\n        var validTime = input.deltaTime > options.time;\n\n        this._input = input;\n\n        // we only allow little movement\n        // and we've reached an end event, so a tap is possible\n        if (!validMovement || !validPointers || (input.eventType & (INPUT_END | INPUT_CANCEL) && !validTime)) {\n            this.reset();\n        } else if (input.eventType & INPUT_START) {\n            this.reset();\n            this._timer = setTimeoutContext(function() {\n                this.state = STATE_RECOGNIZED;\n                this.tryEmit();\n            }, options.time, this);\n        } else if (input.eventType & INPUT_END) {\n            return STATE_RECOGNIZED;\n        }\n        return STATE_FAILED;\n    },\n\n    reset: function() {\n        clearTimeout(this._timer);\n    },\n\n    emit: function(input) {\n        if (this.state !== STATE_RECOGNIZED) {\n            return;\n        }\n\n        if (input && (input.eventType & INPUT_END)) {\n            this.manager.emit(this.options.event + 'up', input);\n        } else {\n            this._input.timeStamp = now();\n            this.manager.emit(this.options.event, this._input);\n        }\n    }\n});\n\n/**\n * Rotate\n * Recognized when two or more pointer are moving in a circular motion.\n * @constructor\n * @extends AttrRecognizer\n */\nfunction RotateRecognizer() {\n    AttrRecognizer.apply(this, arguments);\n}\n\ninherit(RotateRecognizer, AttrRecognizer, {\n    /**\n     * @namespace\n     * @memberof RotateRecognizer\n     */\n    defaults: {\n        event: 'rotate',\n        threshold: 0,\n        pointers: 2\n    },\n\n    getTouchAction: function() {\n        return [TOUCH_ACTION_NONE];\n    },\n\n    attrTest: function(input) {\n        return this._super.attrTest.call(this, input) &&\n            (Math.abs(input.rotation) > this.options.threshold || this.state & STATE_BEGAN);\n    }\n});\n\n/**\n * Swipe\n * Recognized when the pointer is moving fast (velocity), with enough distance in the allowed direction.\n * @constructor\n * @extends AttrRecognizer\n */\nfunction SwipeRecognizer() {\n    AttrRecognizer.apply(this, arguments);\n}\n\ninherit(SwipeRecognizer, AttrRecognizer, {\n    /**\n     * @namespace\n     * @memberof SwipeRecognizer\n     */\n    defaults: {\n        event: 'swipe',\n        threshold: 10,\n        velocity: 0.3,\n        direction: DIRECTION_HORIZONTAL | DIRECTION_VERTICAL,\n        pointers: 1\n    },\n\n    getTouchAction: function() {\n        return PanRecognizer.prototype.getTouchAction.call(this);\n    },\n\n    attrTest: function(input) {\n        var direction = this.options.direction;\n        var velocity;\n\n        if (direction & (DIRECTION_HORIZONTAL | DIRECTION_VERTICAL)) {\n            velocity = input.overallVelocity;\n        } else if (direction & DIRECTION_HORIZONTAL) {\n            velocity = input.overallVelocityX;\n        } else if (direction & DIRECTION_VERTICAL) {\n            velocity = input.overallVelocityY;\n        }\n\n        return this._super.attrTest.call(this, input) &&\n            direction & input.offsetDirection &&\n            input.distance > this.options.threshold &&\n            input.maxPointers == this.options.pointers &&\n            abs(velocity) > this.options.velocity && input.eventType & INPUT_END;\n    },\n\n    emit: function(input) {\n        var direction = directionStr(input.offsetDirection);\n        if (direction) {\n            this.manager.emit(this.options.event + direction, input);\n        }\n\n        this.manager.emit(this.options.event, input);\n    }\n});\n\n/**\n * A tap is ecognized when the pointer is doing a small tap/click. Multiple taps are recognized if they occur\n * between the given interval and position. The delay option can be used to recognize multi-taps without firing\n * a single tap.\n *\n * The eventData from the emitted event contains the property `tapCount`, which contains the amount of\n * multi-taps being recognized.\n * @constructor\n * @extends Recognizer\n */\nfunction TapRecognizer() {\n    Recognizer.apply(this, arguments);\n\n    // previous time and center,\n    // used for tap counting\n    this.pTime = false;\n    this.pCenter = false;\n\n    this._timer = null;\n    this._input = null;\n    this.count = 0;\n}\n\ninherit(TapRecognizer, Recognizer, {\n    /**\n     * @namespace\n     * @memberof PinchRecognizer\n     */\n    defaults: {\n        event: 'tap',\n        pointers: 1,\n        taps: 1,\n        interval: 300, // max time between the multi-tap taps\n        time: 250, // max time of the pointer to be down (like finger on the screen)\n        threshold: 9, // a minimal movement is ok, but keep it low\n        posThreshold: 10 // a multi-tap can be a bit off the initial position\n    },\n\n    getTouchAction: function() {\n        return [TOUCH_ACTION_MANIPULATION];\n    },\n\n    process: function(input) {\n        var options = this.options;\n\n        var validPointers = input.pointers.length === options.pointers;\n        var validMovement = input.distance < options.threshold;\n        var validTouchTime = input.deltaTime < options.time;\n\n        this.reset();\n\n        if ((input.eventType & INPUT_START) && (this.count === 0)) {\n            return this.failTimeout();\n        }\n\n        // we only allow little movement\n        // and we've reached an end event, so a tap is possible\n        if (validMovement && validTouchTime && validPointers) {\n            if (input.eventType != INPUT_END) {\n                return this.failTimeout();\n            }\n\n            var validInterval = this.pTime ? (input.timeStamp - this.pTime < options.interval) : true;\n            var validMultiTap = !this.pCenter || getDistance(this.pCenter, input.center) < options.posThreshold;\n\n            this.pTime = input.timeStamp;\n            this.pCenter = input.center;\n\n            if (!validMultiTap || !validInterval) {\n                this.count = 1;\n            } else {\n                this.count += 1;\n            }\n\n            this._input = input;\n\n            // if tap count matches we have recognized it,\n            // else it has began recognizing...\n            var tapCount = this.count % options.taps;\n            if (tapCount === 0) {\n                // no failing requirements, immediately trigger the tap event\n                // or wait as long as the multitap interval to trigger\n                if (!this.hasRequireFailures()) {\n                    return STATE_RECOGNIZED;\n                } else {\n                    this._timer = setTimeoutContext(function() {\n                        this.state = STATE_RECOGNIZED;\n                        this.tryEmit();\n                    }, options.interval, this);\n                    return STATE_BEGAN;\n                }\n            }\n        }\n        return STATE_FAILED;\n    },\n\n    failTimeout: function() {\n        this._timer = setTimeoutContext(function() {\n            this.state = STATE_FAILED;\n        }, this.options.interval, this);\n        return STATE_FAILED;\n    },\n\n    reset: function() {\n        clearTimeout(this._timer);\n    },\n\n    emit: function() {\n        if (this.state == STATE_RECOGNIZED) {\n            this._input.tapCount = this.count;\n            this.manager.emit(this.options.event, this._input);\n        }\n    }\n});\n\n/**\n * Simple way to create a manager with a default set of recognizers.\n * @param {HTMLElement} element\n * @param {Object} [options]\n * @constructor\n */\nfunction Hammer(element, options) {\n    options = options || {};\n    options.recognizers = ifUndefined(options.recognizers, Hammer.defaults.preset);\n    return new Manager(element, options);\n}\n\n/**\n * @const {string}\n */\nHammer.VERSION = '2.0.7';\n\n/**\n * default settings\n * @namespace\n */\nHammer.defaults = {\n    /**\n     * set if DOM events are being triggered.\n     * But this is slower and unused by simple implementations, so disabled by default.\n     * @type {Boolean}\n     * @default false\n     */\n    domEvents: false,\n\n    /**\n     * The value for the touchAction property/fallback.\n     * When set to `compute` it will magically set the correct value based on the added recognizers.\n     * @type {String}\n     * @default compute\n     */\n    touchAction: TOUCH_ACTION_COMPUTE,\n\n    /**\n     * @type {Boolean}\n     * @default true\n     */\n    enable: true,\n\n    /**\n     * EXPERIMENTAL FEATURE -- can be removed/changed\n     * Change the parent input target element.\n     * If Null, then it is being set the to main element.\n     * @type {Null|EventTarget}\n     * @default null\n     */\n    inputTarget: null,\n\n    /**\n     * force an input class\n     * @type {Null|Function}\n     * @default null\n     */\n    inputClass: null,\n\n    /**\n     * Default recognizer setup when calling `Hammer()`\n     * When creating a new Manager these will be skipped.\n     * @type {Array}\n     */\n    preset: [\n        // RecognizerClass, options, [recognizeWith, ...], [requireFailure, ...]\n        [RotateRecognizer, {enable: false}],\n        [PinchRecognizer, {enable: false}, ['rotate']],\n        [SwipeRecognizer, {direction: DIRECTION_HORIZONTAL}],\n        [PanRecognizer, {direction: DIRECTION_HORIZONTAL}, ['swipe']],\n        [TapRecognizer],\n        [TapRecognizer, {event: 'doubletap', taps: 2}, ['tap']],\n        [PressRecognizer]\n    ],\n\n    /**\n     * Some CSS properties can be used to improve the working of Hammer.\n     * Add them to this method and they will be set when creating a new Manager.\n     * @namespace\n     */\n    cssProps: {\n        /**\n         * Disables text selection to improve the dragging gesture. Mainly for desktop browsers.\n         * @type {String}\n         * @default 'none'\n         */\n        userSelect: 'none',\n\n        /**\n         * Disable the Windows Phone grippers when pressing an element.\n         * @type {String}\n         * @default 'none'\n         */\n        touchSelect: 'none',\n\n        /**\n         * Disables the default callout shown when you touch and hold a touch target.\n         * On iOS, when you touch and hold a touch target such as a link, Safari displays\n         * a callout containing information about the link. This property allows you to disable that callout.\n         * @type {String}\n         * @default 'none'\n         */\n        touchCallout: 'none',\n\n        /**\n         * Specifies whether zooming is enabled. Used by IE10>\n         * @type {String}\n         * @default 'none'\n         */\n        contentZooming: 'none',\n\n        /**\n         * Specifies that an entire element should be draggable instead of its contents. Mainly for desktop browsers.\n         * @type {String}\n         * @default 'none'\n         */\n        userDrag: 'none',\n\n        /**\n         * Overrides the highlight color shown when the user taps a link or a JavaScript\n         * clickable element in iOS. This property obeys the alpha value, if specified.\n         * @type {String}\n         * @default 'rgba(0,0,0,0)'\n         */\n        tapHighlightColor: 'rgba(0,0,0,0)'\n    }\n};\n\nvar STOP = 1;\nvar FORCED_STOP = 2;\n\n/**\n * Manager\n * @param {HTMLElement} element\n * @param {Object} [options]\n * @constructor\n */\nfunction Manager(element, options) {\n    this.options = assign({}, Hammer.defaults, options || {});\n\n    this.options.inputTarget = this.options.inputTarget || element;\n\n    this.handlers = {};\n    this.session = {};\n    this.recognizers = [];\n    this.oldCssProps = {};\n\n    this.element = element;\n    this.input = createInputInstance(this);\n    this.touchAction = new TouchAction(this, this.options.touchAction);\n\n    toggleCssProps(this, true);\n\n    each(this.options.recognizers, function(item) {\n        var recognizer = this.add(new (item[0])(item[1]));\n        item[2] && recognizer.recognizeWith(item[2]);\n        item[3] && recognizer.requireFailure(item[3]);\n    }, this);\n}\n\nManager.prototype = {\n    /**\n     * set options\n     * @param {Object} options\n     * @returns {Manager}\n     */\n    set: function(options) {\n        assign(this.options, options);\n\n        // Options that need a little more setup\n        if (options.touchAction) {\n            this.touchAction.update();\n        }\n        if (options.inputTarget) {\n            // Clean up existing event listeners and reinitialize\n            this.input.destroy();\n            this.input.target = options.inputTarget;\n            this.input.init();\n        }\n        return this;\n    },\n\n    /**\n     * stop recognizing for this session.\n     * This session will be discarded, when a new [input]start event is fired.\n     * When forced, the recognizer cycle is stopped immediately.\n     * @param {Boolean} [force]\n     */\n    stop: function(force) {\n        this.session.stopped = force ? FORCED_STOP : STOP;\n    },\n\n    /**\n     * run the recognizers!\n     * called by the inputHandler function on every movement of the pointers (touches)\n     * it walks through all the recognizers and tries to detect the gesture that is being made\n     * @param {Object} inputData\n     */\n    recognize: function(inputData) {\n        var session = this.session;\n        if (session.stopped) {\n            return;\n        }\n\n        // run the touch-action polyfill\n        this.touchAction.preventDefaults(inputData);\n\n        var recognizer;\n        var recognizers = this.recognizers;\n\n        // this holds the recognizer that is being recognized.\n        // so the recognizer's state needs to be BEGAN, CHANGED, ENDED or RECOGNIZED\n        // if no recognizer is detecting a thing, it is set to `null`\n        var curRecognizer = session.curRecognizer;\n\n        // reset when the last recognizer is recognized\n        // or when we're in a new session\n        if (!curRecognizer || (curRecognizer && curRecognizer.state & STATE_RECOGNIZED)) {\n            curRecognizer = session.curRecognizer = null;\n        }\n\n        var i = 0;\n        while (i < recognizers.length) {\n            recognizer = recognizers[i];\n\n            // find out if we are allowed try to recognize the input for this one.\n            // 1.   allow if the session is NOT forced stopped (see the .stop() method)\n            // 2.   allow if we still haven't recognized a gesture in this session, or the this recognizer is the one\n            //      that is being recognized.\n            // 3.   allow if the recognizer is allowed to run simultaneous with the current recognized recognizer.\n            //      this can be setup with the `recognizeWith()` method on the recognizer.\n            if (session.stopped !== FORCED_STOP && ( // 1\n                    !curRecognizer || recognizer == curRecognizer || // 2\n                    recognizer.canRecognizeWith(curRecognizer))) { // 3\n                recognizer.recognize(inputData);\n            } else {\n                recognizer.reset();\n            }\n\n            // if the recognizer has been recognizing the input as a valid gesture, we want to store this one as the\n            // current active recognizer. but only if we don't already have an active recognizer\n            if (!curRecognizer && recognizer.state & (STATE_BEGAN | STATE_CHANGED | STATE_ENDED)) {\n                curRecognizer = session.curRecognizer = recognizer;\n            }\n            i++;\n        }\n    },\n\n    /**\n     * get a recognizer by its event name.\n     * @param {Recognizer|String} recognizer\n     * @returns {Recognizer|Null}\n     */\n    get: function(recognizer) {\n        if (recognizer instanceof Recognizer) {\n            return recognizer;\n        }\n\n        var recognizers = this.recognizers;\n        for (var i = 0; i < recognizers.length; i++) {\n            if (recognizers[i].options.event == recognizer) {\n                return recognizers[i];\n            }\n        }\n        return null;\n    },\n\n    /**\n     * add a recognizer to the manager\n     * existing recognizers with the same event name will be removed\n     * @param {Recognizer} recognizer\n     * @returns {Recognizer|Manager}\n     */\n    add: function(recognizer) {\n        if (invokeArrayArg(recognizer, 'add', this)) {\n            return this;\n        }\n\n        // remove existing\n        var existing = this.get(recognizer.options.event);\n        if (existing) {\n            this.remove(existing);\n        }\n\n        this.recognizers.push(recognizer);\n        recognizer.manager = this;\n\n        this.touchAction.update();\n        return recognizer;\n    },\n\n    /**\n     * remove a recognizer by name or instance\n     * @param {Recognizer|String} recognizer\n     * @returns {Manager}\n     */\n    remove: function(recognizer) {\n        if (invokeArrayArg(recognizer, 'remove', this)) {\n            return this;\n        }\n\n        recognizer = this.get(recognizer);\n\n        // let's make sure this recognizer exists\n        if (recognizer) {\n            var recognizers = this.recognizers;\n            var index = inArray(recognizers, recognizer);\n\n            if (index !== -1) {\n                recognizers.splice(index, 1);\n                this.touchAction.update();\n            }\n        }\n\n        return this;\n    },\n\n    /**\n     * bind event\n     * @param {String} events\n     * @param {Function} handler\n     * @returns {EventEmitter} this\n     */\n    on: function(events, handler) {\n        if (events === undefined) {\n            return;\n        }\n        if (handler === undefined) {\n            return;\n        }\n\n        var handlers = this.handlers;\n        each(splitStr(events), function(event) {\n            handlers[event] = handlers[event] || [];\n            handlers[event].push(handler);\n        });\n        return this;\n    },\n\n    /**\n     * unbind event, leave emit blank to remove all handlers\n     * @param {String} events\n     * @param {Function} [handler]\n     * @returns {EventEmitter} this\n     */\n    off: function(events, handler) {\n        if (events === undefined) {\n            return;\n        }\n\n        var handlers = this.handlers;\n        each(splitStr(events), function(event) {\n            if (!handler) {\n                delete handlers[event];\n            } else {\n                handlers[event] && handlers[event].splice(inArray(handlers[event], handler), 1);\n            }\n        });\n        return this;\n    },\n\n    /**\n     * emit event to the listeners\n     * @param {String} event\n     * @param {Object} data\n     */\n    emit: function(event, data) {\n        // we also want to trigger dom events\n        if (this.options.domEvents) {\n            triggerDomEvent(event, data);\n        }\n\n        // no handlers, so skip it all\n        var handlers = this.handlers[event] && this.handlers[event].slice();\n        if (!handlers || !handlers.length) {\n            return;\n        }\n\n        data.type = event;\n        data.preventDefault = function() {\n            data.srcEvent.preventDefault();\n        };\n\n        var i = 0;\n        while (i < handlers.length) {\n            handlers[i](data);\n            i++;\n        }\n    },\n\n    /**\n     * destroy the manager and unbinds all events\n     * it doesn't unbind dom events, that is the user own responsibility\n     */\n    destroy: function() {\n        this.element && toggleCssProps(this, false);\n\n        this.handlers = {};\n        this.session = {};\n        this.input.destroy();\n        this.element = null;\n    }\n};\n\n/**\n * add/remove the css properties as defined in manager.options.cssProps\n * @param {Manager} manager\n * @param {Boolean} add\n */\nfunction toggleCssProps(manager, add) {\n    var element = manager.element;\n    if (!element.style) {\n        return;\n    }\n    var prop;\n    each(manager.options.cssProps, function(value, name) {\n        prop = prefixed(element.style, name);\n        if (add) {\n            manager.oldCssProps[prop] = element.style[prop];\n            element.style[prop] = value;\n        } else {\n            element.style[prop] = manager.oldCssProps[prop] || '';\n        }\n    });\n    if (!add) {\n        manager.oldCssProps = {};\n    }\n}\n\n/**\n * trigger dom event\n * @param {String} event\n * @param {Object} data\n */\nfunction triggerDomEvent(event, data) {\n    var gestureEvent = document.createEvent('Event');\n    gestureEvent.initEvent(event, true, true);\n    gestureEvent.gesture = data;\n    data.target.dispatchEvent(gestureEvent);\n}\n\nassign(Hammer, {\n    INPUT_START: INPUT_START,\n    INPUT_MOVE: INPUT_MOVE,\n    INPUT_END: INPUT_END,\n    INPUT_CANCEL: INPUT_CANCEL,\n\n    STATE_POSSIBLE: STATE_POSSIBLE,\n    STATE_BEGAN: STATE_BEGAN,\n    STATE_CHANGED: STATE_CHANGED,\n    STATE_ENDED: STATE_ENDED,\n    STATE_RECOGNIZED: STATE_RECOGNIZED,\n    STATE_CANCELLED: STATE_CANCELLED,\n    STATE_FAILED: STATE_FAILED,\n\n    DIRECTION_NONE: DIRECTION_NONE,\n    DIRECTION_LEFT: DIRECTION_LEFT,\n    DIRECTION_RIGHT: DIRECTION_RIGHT,\n    DIRECTION_UP: DIRECTION_UP,\n    DIRECTION_DOWN: DIRECTION_DOWN,\n    DIRECTION_HORIZONTAL: DIRECTION_HORIZONTAL,\n    DIRECTION_VERTICAL: DIRECTION_VERTICAL,\n    DIRECTION_ALL: DIRECTION_ALL,\n\n    Manager: Manager,\n    Input: Input,\n    TouchAction: TouchAction,\n\n    TouchInput: TouchInput,\n    MouseInput: MouseInput,\n    PointerEventInput: PointerEventInput,\n    TouchMouseInput: TouchMouseInput,\n    SingleTouchInput: SingleTouchInput,\n\n    Recognizer: Recognizer,\n    AttrRecognizer: AttrRecognizer,\n    Tap: TapRecognizer,\n    Pan: PanRecognizer,\n    Swipe: SwipeRecognizer,\n    Pinch: PinchRecognizer,\n    Rotate: RotateRecognizer,\n    Press: PressRecognizer,\n\n    on: addEventListeners,\n    off: removeEventListeners,\n    each: each,\n    merge: merge,\n    extend: extend,\n    assign: assign,\n    inherit: inherit,\n    bindFn: bindFn,\n    prefixed: prefixed\n});\n\n// this prevents errors when Hammer is loaded in the presence of an AMD\n//  style loader but by script tag, not by the loader.\nvar freeGlobal = (typeof window !== 'undefined' ? window : (typeof self !== 'undefined' ? self : {})); // jshint ignore:line\nfreeGlobal.Hammer = Hammer;\n\nif (typeof define === 'function' && define.amd) {\n    define(function() {\n        return Hammer;\n    });\n} else if (typeof module != 'undefined' && module.exports) {\n    module.exports = Hammer;\n} else {\n    window[exportName] = Hammer;\n}\n\n})(window, document, 'Hammer');\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","/*\nTurbo 7.3.0\nCopyright  2023 37signals LLC\n */\n(function () {\n    if (window.Reflect === undefined ||\n        window.customElements === undefined ||\n        window.customElements.polyfillWrapFlushCallback) {\n        return;\n    }\n    const BuiltInHTMLElement = HTMLElement;\n    const wrapperForTheName = {\n        HTMLElement: function HTMLElement() {\n            return Reflect.construct(BuiltInHTMLElement, [], this.constructor);\n        },\n    };\n    window.HTMLElement = wrapperForTheName[\"HTMLElement\"];\n    HTMLElement.prototype = BuiltInHTMLElement.prototype;\n    HTMLElement.prototype.constructor = HTMLElement;\n    Object.setPrototypeOf(HTMLElement, BuiltInHTMLElement);\n})();\n\n/**\n * The MIT License (MIT)\n * \n * Copyright (c) 2019 Javan Makhmali\n * \n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n * \n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n * \n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n * THE SOFTWARE.\n */\n\n(function(prototype) {\n  if (typeof prototype.requestSubmit == \"function\") return\n\n  prototype.requestSubmit = function(submitter) {\n    if (submitter) {\n      validateSubmitter(submitter, this);\n      submitter.click();\n    } else {\n      submitter = document.createElement(\"input\");\n      submitter.type = \"submit\";\n      submitter.hidden = true;\n      this.appendChild(submitter);\n      submitter.click();\n      this.removeChild(submitter);\n    }\n  };\n\n  function validateSubmitter(submitter, form) {\n    submitter instanceof HTMLElement || raise(TypeError, \"parameter 1 is not of type 'HTMLElement'\");\n    submitter.type == \"submit\" || raise(TypeError, \"The specified element is not a submit button\");\n    submitter.form == form || raise(DOMException, \"The specified element is not owned by this form element\", \"NotFoundError\");\n  }\n\n  function raise(errorConstructor, message, name) {\n    throw new errorConstructor(\"Failed to execute 'requestSubmit' on 'HTMLFormElement': \" + message + \".\", name)\n  }\n})(HTMLFormElement.prototype);\n\nconst submittersByForm = new WeakMap();\nfunction findSubmitterFromClickTarget(target) {\n    const element = target instanceof Element ? target : target instanceof Node ? target.parentElement : null;\n    const candidate = element ? element.closest(\"input, button\") : null;\n    return (candidate === null || candidate === void 0 ? void 0 : candidate.type) == \"submit\" ? candidate : null;\n}\nfunction clickCaptured(event) {\n    const submitter = findSubmitterFromClickTarget(event.target);\n    if (submitter && submitter.form) {\n        submittersByForm.set(submitter.form, submitter);\n    }\n}\n(function () {\n    if (\"submitter\" in Event.prototype)\n        return;\n    let prototype = window.Event.prototype;\n    if (\"SubmitEvent\" in window && /Apple Computer/.test(navigator.vendor)) {\n        prototype = window.SubmitEvent.prototype;\n    }\n    else if (\"SubmitEvent\" in window) {\n        return;\n    }\n    addEventListener(\"click\", clickCaptured, true);\n    Object.defineProperty(prototype, \"submitter\", {\n        get() {\n            if (this.type == \"submit\" && this.target instanceof HTMLFormElement) {\n                return submittersByForm.get(this.target);\n            }\n        },\n    });\n})();\n\nvar FrameLoadingStyle;\n(function (FrameLoadingStyle) {\n    FrameLoadingStyle[\"eager\"] = \"eager\";\n    FrameLoadingStyle[\"lazy\"] = \"lazy\";\n})(FrameLoadingStyle || (FrameLoadingStyle = {}));\nclass FrameElement extends HTMLElement {\n    static get observedAttributes() {\n        return [\"disabled\", \"complete\", \"loading\", \"src\"];\n    }\n    constructor() {\n        super();\n        this.loaded = Promise.resolve();\n        this.delegate = new FrameElement.delegateConstructor(this);\n    }\n    connectedCallback() {\n        this.delegate.connect();\n    }\n    disconnectedCallback() {\n        this.delegate.disconnect();\n    }\n    reload() {\n        return this.delegate.sourceURLReloaded();\n    }\n    attributeChangedCallback(name) {\n        if (name == \"loading\") {\n            this.delegate.loadingStyleChanged();\n        }\n        else if (name == \"complete\") {\n            this.delegate.completeChanged();\n        }\n        else if (name == \"src\") {\n            this.delegate.sourceURLChanged();\n        }\n        else {\n            this.delegate.disabledChanged();\n        }\n    }\n    get src() {\n        return this.getAttribute(\"src\");\n    }\n    set src(value) {\n        if (value) {\n            this.setAttribute(\"src\", value);\n        }\n        else {\n            this.removeAttribute(\"src\");\n        }\n    }\n    get loading() {\n        return frameLoadingStyleFromString(this.getAttribute(\"loading\") || \"\");\n    }\n    set loading(value) {\n        if (value) {\n            this.setAttribute(\"loading\", value);\n        }\n        else {\n            this.removeAttribute(\"loading\");\n        }\n    }\n    get disabled() {\n        return this.hasAttribute(\"disabled\");\n    }\n    set disabled(value) {\n        if (value) {\n            this.setAttribute(\"disabled\", \"\");\n        }\n        else {\n            this.removeAttribute(\"disabled\");\n        }\n    }\n    get autoscroll() {\n        return this.hasAttribute(\"autoscroll\");\n    }\n    set autoscroll(value) {\n        if (value) {\n            this.setAttribute(\"autoscroll\", \"\");\n        }\n        else {\n            this.removeAttribute(\"autoscroll\");\n        }\n    }\n    get complete() {\n        return !this.delegate.isLoading;\n    }\n    get isActive() {\n        return this.ownerDocument === document && !this.isPreview;\n    }\n    get isPreview() {\n        var _a, _b;\n        return (_b = (_a = this.ownerDocument) === null || _a === void 0 ? void 0 : _a.documentElement) === null || _b === void 0 ? void 0 : _b.hasAttribute(\"data-turbo-preview\");\n    }\n}\nfunction frameLoadingStyleFromString(style) {\n    switch (style.toLowerCase()) {\n        case \"lazy\":\n            return FrameLoadingStyle.lazy;\n        default:\n            return FrameLoadingStyle.eager;\n    }\n}\n\nfunction expandURL(locatable) {\n    return new URL(locatable.toString(), document.baseURI);\n}\nfunction getAnchor(url) {\n    let anchorMatch;\n    if (url.hash) {\n        return url.hash.slice(1);\n    }\n    else if ((anchorMatch = url.href.match(/#(.*)$/))) {\n        return anchorMatch[1];\n    }\n}\nfunction getAction(form, submitter) {\n    const action = (submitter === null || submitter === void 0 ? void 0 : submitter.getAttribute(\"formaction\")) || form.getAttribute(\"action\") || form.action;\n    return expandURL(action);\n}\nfunction getExtension(url) {\n    return (getLastPathComponent(url).match(/\\.[^.]*$/) || [])[0] || \"\";\n}\nfunction isHTML(url) {\n    return !!getExtension(url).match(/^(?:|\\.(?:htm|html|xhtml|php))$/);\n}\nfunction isPrefixedBy(baseURL, url) {\n    const prefix = getPrefix(url);\n    return baseURL.href === expandURL(prefix).href || baseURL.href.startsWith(prefix);\n}\nfunction locationIsVisitable(location, rootLocation) {\n    return isPrefixedBy(location, rootLocation) && isHTML(location);\n}\nfunction getRequestURL(url) {\n    const anchor = getAnchor(url);\n    return anchor != null ? url.href.slice(0, -(anchor.length + 1)) : url.href;\n}\nfunction toCacheKey(url) {\n    return getRequestURL(url);\n}\nfunction urlsAreEqual(left, right) {\n    return expandURL(left).href == expandURL(right).href;\n}\nfunction getPathComponents(url) {\n    return url.pathname.split(\"/\").slice(1);\n}\nfunction getLastPathComponent(url) {\n    return getPathComponents(url).slice(-1)[0];\n}\nfunction getPrefix(url) {\n    return addTrailingSlash(url.origin + url.pathname);\n}\nfunction addTrailingSlash(value) {\n    return value.endsWith(\"/\") ? value : value + \"/\";\n}\n\nclass FetchResponse {\n    constructor(response) {\n        this.response = response;\n    }\n    get succeeded() {\n        return this.response.ok;\n    }\n    get failed() {\n        return !this.succeeded;\n    }\n    get clientError() {\n        return this.statusCode >= 400 && this.statusCode <= 499;\n    }\n    get serverError() {\n        return this.statusCode >= 500 && this.statusCode <= 599;\n    }\n    get redirected() {\n        return this.response.redirected;\n    }\n    get location() {\n        return expandURL(this.response.url);\n    }\n    get isHTML() {\n        return this.contentType && this.contentType.match(/^(?:text\\/([^\\s;,]+\\b)?html|application\\/xhtml\\+xml)\\b/);\n    }\n    get statusCode() {\n        return this.response.status;\n    }\n    get contentType() {\n        return this.header(\"Content-Type\");\n    }\n    get responseText() {\n        return this.response.clone().text();\n    }\n    get responseHTML() {\n        if (this.isHTML) {\n            return this.response.clone().text();\n        }\n        else {\n            return Promise.resolve(undefined);\n        }\n    }\n    header(name) {\n        return this.response.headers.get(name);\n    }\n}\n\nfunction activateScriptElement(element) {\n    if (element.getAttribute(\"data-turbo-eval\") == \"false\") {\n        return element;\n    }\n    else {\n        const createdScriptElement = document.createElement(\"script\");\n        const cspNonce = getMetaContent(\"csp-nonce\");\n        if (cspNonce) {\n            createdScriptElement.nonce = cspNonce;\n        }\n        createdScriptElement.textContent = element.textContent;\n        createdScriptElement.async = false;\n        copyElementAttributes(createdScriptElement, element);\n        return createdScriptElement;\n    }\n}\nfunction copyElementAttributes(destinationElement, sourceElement) {\n    for (const { name, value } of sourceElement.attributes) {\n        destinationElement.setAttribute(name, value);\n    }\n}\nfunction createDocumentFragment(html) {\n    const template = document.createElement(\"template\");\n    template.innerHTML = html;\n    return template.content;\n}\nfunction dispatch(eventName, { target, cancelable, detail } = {}) {\n    const event = new CustomEvent(eventName, {\n        cancelable,\n        bubbles: true,\n        composed: true,\n        detail,\n    });\n    if (target && target.isConnected) {\n        target.dispatchEvent(event);\n    }\n    else {\n        document.documentElement.dispatchEvent(event);\n    }\n    return event;\n}\nfunction nextAnimationFrame() {\n    return new Promise((resolve) => requestAnimationFrame(() => resolve()));\n}\nfunction nextEventLoopTick() {\n    return new Promise((resolve) => setTimeout(() => resolve(), 0));\n}\nfunction nextMicrotask() {\n    return Promise.resolve();\n}\nfunction parseHTMLDocument(html = \"\") {\n    return new DOMParser().parseFromString(html, \"text/html\");\n}\nfunction unindent(strings, ...values) {\n    const lines = interpolate(strings, values).replace(/^\\n/, \"\").split(\"\\n\");\n    const match = lines[0].match(/^\\s+/);\n    const indent = match ? match[0].length : 0;\n    return lines.map((line) => line.slice(indent)).join(\"\\n\");\n}\nfunction interpolate(strings, values) {\n    return strings.reduce((result, string, i) => {\n        const value = values[i] == undefined ? \"\" : values[i];\n        return result + string + value;\n    }, \"\");\n}\nfunction uuid() {\n    return Array.from({ length: 36 })\n        .map((_, i) => {\n        if (i == 8 || i == 13 || i == 18 || i == 23) {\n            return \"-\";\n        }\n        else if (i == 14) {\n            return \"4\";\n        }\n        else if (i == 19) {\n            return (Math.floor(Math.random() * 4) + 8).toString(16);\n        }\n        else {\n            return Math.floor(Math.random() * 15).toString(16);\n        }\n    })\n        .join(\"\");\n}\nfunction getAttribute(attributeName, ...elements) {\n    for (const value of elements.map((element) => element === null || element === void 0 ? void 0 : element.getAttribute(attributeName))) {\n        if (typeof value == \"string\")\n            return value;\n    }\n    return null;\n}\nfunction hasAttribute(attributeName, ...elements) {\n    return elements.some((element) => element && element.hasAttribute(attributeName));\n}\nfunction markAsBusy(...elements) {\n    for (const element of elements) {\n        if (element.localName == \"turbo-frame\") {\n            element.setAttribute(\"busy\", \"\");\n        }\n        element.setAttribute(\"aria-busy\", \"true\");\n    }\n}\nfunction clearBusyState(...elements) {\n    for (const element of elements) {\n        if (element.localName == \"turbo-frame\") {\n            element.removeAttribute(\"busy\");\n        }\n        element.removeAttribute(\"aria-busy\");\n    }\n}\nfunction waitForLoad(element, timeoutInMilliseconds = 2000) {\n    return new Promise((resolve) => {\n        const onComplete = () => {\n            element.removeEventListener(\"error\", onComplete);\n            element.removeEventListener(\"load\", onComplete);\n            resolve();\n        };\n        element.addEventListener(\"load\", onComplete, { once: true });\n        element.addEventListener(\"error\", onComplete, { once: true });\n        setTimeout(resolve, timeoutInMilliseconds);\n    });\n}\nfunction getHistoryMethodForAction(action) {\n    switch (action) {\n        case \"replace\":\n            return history.replaceState;\n        case \"advance\":\n        case \"restore\":\n            return history.pushState;\n    }\n}\nfunction isAction(action) {\n    return action == \"advance\" || action == \"replace\" || action == \"restore\";\n}\nfunction getVisitAction(...elements) {\n    const action = getAttribute(\"data-turbo-action\", ...elements);\n    return isAction(action) ? action : null;\n}\nfunction getMetaElement(name) {\n    return document.querySelector(`meta[name=\"${name}\"]`);\n}\nfunction getMetaContent(name) {\n    const element = getMetaElement(name);\n    return element && element.content;\n}\nfunction setMetaContent(name, content) {\n    let element = getMetaElement(name);\n    if (!element) {\n        element = document.createElement(\"meta\");\n        element.setAttribute(\"name\", name);\n        document.head.appendChild(element);\n    }\n    element.setAttribute(\"content\", content);\n    return element;\n}\nfunction findClosestRecursively(element, selector) {\n    var _a;\n    if (element instanceof Element) {\n        return (element.closest(selector) ||\n            findClosestRecursively(element.assignedSlot || ((_a = element.getRootNode()) === null || _a === void 0 ? void 0 : _a.host), selector));\n    }\n}\n\nvar FetchMethod;\n(function (FetchMethod) {\n    FetchMethod[FetchMethod[\"get\"] = 0] = \"get\";\n    FetchMethod[FetchMethod[\"post\"] = 1] = \"post\";\n    FetchMethod[FetchMethod[\"put\"] = 2] = \"put\";\n    FetchMethod[FetchMethod[\"patch\"] = 3] = \"patch\";\n    FetchMethod[FetchMethod[\"delete\"] = 4] = \"delete\";\n})(FetchMethod || (FetchMethod = {}));\nfunction fetchMethodFromString(method) {\n    switch (method.toLowerCase()) {\n        case \"get\":\n            return FetchMethod.get;\n        case \"post\":\n            return FetchMethod.post;\n        case \"put\":\n            return FetchMethod.put;\n        case \"patch\":\n            return FetchMethod.patch;\n        case \"delete\":\n            return FetchMethod.delete;\n    }\n}\nclass FetchRequest {\n    constructor(delegate, method, location, body = new URLSearchParams(), target = null) {\n        this.abortController = new AbortController();\n        this.resolveRequestPromise = (_value) => { };\n        this.delegate = delegate;\n        this.method = method;\n        this.headers = this.defaultHeaders;\n        this.body = body;\n        this.url = location;\n        this.target = target;\n    }\n    get location() {\n        return this.url;\n    }\n    get params() {\n        return this.url.searchParams;\n    }\n    get entries() {\n        return this.body ? Array.from(this.body.entries()) : [];\n    }\n    cancel() {\n        this.abortController.abort();\n    }\n    async perform() {\n        const { fetchOptions } = this;\n        this.delegate.prepareRequest(this);\n        await this.allowRequestToBeIntercepted(fetchOptions);\n        try {\n            this.delegate.requestStarted(this);\n            const response = await fetch(this.url.href, fetchOptions);\n            return await this.receive(response);\n        }\n        catch (error) {\n            if (error.name !== \"AbortError\") {\n                if (this.willDelegateErrorHandling(error)) {\n                    this.delegate.requestErrored(this, error);\n                }\n                throw error;\n            }\n        }\n        finally {\n            this.delegate.requestFinished(this);\n        }\n    }\n    async receive(response) {\n        const fetchResponse = new FetchResponse(response);\n        const event = dispatch(\"turbo:before-fetch-response\", {\n            cancelable: true,\n            detail: { fetchResponse },\n            target: this.target,\n        });\n        if (event.defaultPrevented) {\n            this.delegate.requestPreventedHandlingResponse(this, fetchResponse);\n        }\n        else if (fetchResponse.succeeded) {\n            this.delegate.requestSucceededWithResponse(this, fetchResponse);\n        }\n        else {\n            this.delegate.requestFailedWithResponse(this, fetchResponse);\n        }\n        return fetchResponse;\n    }\n    get fetchOptions() {\n        var _a;\n        return {\n            method: FetchMethod[this.method].toUpperCase(),\n            credentials: \"same-origin\",\n            headers: this.headers,\n            redirect: \"follow\",\n            body: this.isSafe ? null : this.body,\n            signal: this.abortSignal,\n            referrer: (_a = this.delegate.referrer) === null || _a === void 0 ? void 0 : _a.href,\n        };\n    }\n    get defaultHeaders() {\n        return {\n            Accept: \"text/html, application/xhtml+xml\",\n        };\n    }\n    get isSafe() {\n        return this.method === FetchMethod.get;\n    }\n    get abortSignal() {\n        return this.abortController.signal;\n    }\n    acceptResponseType(mimeType) {\n        this.headers[\"Accept\"] = [mimeType, this.headers[\"Accept\"]].join(\", \");\n    }\n    async allowRequestToBeIntercepted(fetchOptions) {\n        const requestInterception = new Promise((resolve) => (this.resolveRequestPromise = resolve));\n        const event = dispatch(\"turbo:before-fetch-request\", {\n            cancelable: true,\n            detail: {\n                fetchOptions,\n                url: this.url,\n                resume: this.resolveRequestPromise,\n            },\n            target: this.target,\n        });\n        if (event.defaultPrevented)\n            await requestInterception;\n    }\n    willDelegateErrorHandling(error) {\n        const event = dispatch(\"turbo:fetch-request-error\", {\n            target: this.target,\n            cancelable: true,\n            detail: { request: this, error: error },\n        });\n        return !event.defaultPrevented;\n    }\n}\n\nclass AppearanceObserver {\n    constructor(delegate, element) {\n        this.started = false;\n        this.intersect = (entries) => {\n            const lastEntry = entries.slice(-1)[0];\n            if (lastEntry === null || lastEntry === void 0 ? void 0 : lastEntry.isIntersecting) {\n                this.delegate.elementAppearedInViewport(this.element);\n            }\n        };\n        this.delegate = delegate;\n        this.element = element;\n        this.intersectionObserver = new IntersectionObserver(this.intersect);\n    }\n    start() {\n        if (!this.started) {\n            this.started = true;\n            this.intersectionObserver.observe(this.element);\n        }\n    }\n    stop() {\n        if (this.started) {\n            this.started = false;\n            this.intersectionObserver.unobserve(this.element);\n        }\n    }\n}\n\nclass StreamMessage {\n    static wrap(message) {\n        if (typeof message == \"string\") {\n            return new this(createDocumentFragment(message));\n        }\n        else {\n            return message;\n        }\n    }\n    constructor(fragment) {\n        this.fragment = importStreamElements(fragment);\n    }\n}\nStreamMessage.contentType = \"text/vnd.turbo-stream.html\";\nfunction importStreamElements(fragment) {\n    for (const element of fragment.querySelectorAll(\"turbo-stream\")) {\n        const streamElement = document.importNode(element, true);\n        for (const inertScriptElement of streamElement.templateElement.content.querySelectorAll(\"script\")) {\n            inertScriptElement.replaceWith(activateScriptElement(inertScriptElement));\n        }\n        element.replaceWith(streamElement);\n    }\n    return fragment;\n}\n\nvar FormSubmissionState;\n(function (FormSubmissionState) {\n    FormSubmissionState[FormSubmissionState[\"initialized\"] = 0] = \"initialized\";\n    FormSubmissionState[FormSubmissionState[\"requesting\"] = 1] = \"requesting\";\n    FormSubmissionState[FormSubmissionState[\"waiting\"] = 2] = \"waiting\";\n    FormSubmissionState[FormSubmissionState[\"receiving\"] = 3] = \"receiving\";\n    FormSubmissionState[FormSubmissionState[\"stopping\"] = 4] = \"stopping\";\n    FormSubmissionState[FormSubmissionState[\"stopped\"] = 5] = \"stopped\";\n})(FormSubmissionState || (FormSubmissionState = {}));\nvar FormEnctype;\n(function (FormEnctype) {\n    FormEnctype[\"urlEncoded\"] = \"application/x-www-form-urlencoded\";\n    FormEnctype[\"multipart\"] = \"multipart/form-data\";\n    FormEnctype[\"plain\"] = \"text/plain\";\n})(FormEnctype || (FormEnctype = {}));\nfunction formEnctypeFromString(encoding) {\n    switch (encoding.toLowerCase()) {\n        case FormEnctype.multipart:\n            return FormEnctype.multipart;\n        case FormEnctype.plain:\n            return FormEnctype.plain;\n        default:\n            return FormEnctype.urlEncoded;\n    }\n}\nclass FormSubmission {\n    static confirmMethod(message, _element, _submitter) {\n        return Promise.resolve(confirm(message));\n    }\n    constructor(delegate, formElement, submitter, mustRedirect = false) {\n        this.state = FormSubmissionState.initialized;\n        this.delegate = delegate;\n        this.formElement = formElement;\n        this.submitter = submitter;\n        this.formData = buildFormData(formElement, submitter);\n        this.location = expandURL(this.action);\n        if (this.method == FetchMethod.get) {\n            mergeFormDataEntries(this.location, [...this.body.entries()]);\n        }\n        this.fetchRequest = new FetchRequest(this, this.method, this.location, this.body, this.formElement);\n        this.mustRedirect = mustRedirect;\n    }\n    get method() {\n        var _a;\n        const method = ((_a = this.submitter) === null || _a === void 0 ? void 0 : _a.getAttribute(\"formmethod\")) || this.formElement.getAttribute(\"method\") || \"\";\n        return fetchMethodFromString(method.toLowerCase()) || FetchMethod.get;\n    }\n    get action() {\n        var _a;\n        const formElementAction = typeof this.formElement.action === \"string\" ? this.formElement.action : null;\n        if ((_a = this.submitter) === null || _a === void 0 ? void 0 : _a.hasAttribute(\"formaction\")) {\n            return this.submitter.getAttribute(\"formaction\") || \"\";\n        }\n        else {\n            return this.formElement.getAttribute(\"action\") || formElementAction || \"\";\n        }\n    }\n    get body() {\n        if (this.enctype == FormEnctype.urlEncoded || this.method == FetchMethod.get) {\n            return new URLSearchParams(this.stringFormData);\n        }\n        else {\n            return this.formData;\n        }\n    }\n    get enctype() {\n        var _a;\n        return formEnctypeFromString(((_a = this.submitter) === null || _a === void 0 ? void 0 : _a.getAttribute(\"formenctype\")) || this.formElement.enctype);\n    }\n    get isSafe() {\n        return this.fetchRequest.isSafe;\n    }\n    get stringFormData() {\n        return [...this.formData].reduce((entries, [name, value]) => {\n            return entries.concat(typeof value == \"string\" ? [[name, value]] : []);\n        }, []);\n    }\n    async start() {\n        const { initialized, requesting } = FormSubmissionState;\n        const confirmationMessage = getAttribute(\"data-turbo-confirm\", this.submitter, this.formElement);\n        if (typeof confirmationMessage === \"string\") {\n            const answer = await FormSubmission.confirmMethod(confirmationMessage, this.formElement, this.submitter);\n            if (!answer) {\n                return;\n            }\n        }\n        if (this.state == initialized) {\n            this.state = requesting;\n            return this.fetchRequest.perform();\n        }\n    }\n    stop() {\n        const { stopping, stopped } = FormSubmissionState;\n        if (this.state != stopping && this.state != stopped) {\n            this.state = stopping;\n            this.fetchRequest.cancel();\n            return true;\n        }\n    }\n    prepareRequest(request) {\n        if (!request.isSafe) {\n            const token = getCookieValue(getMetaContent(\"csrf-param\")) || getMetaContent(\"csrf-token\");\n            if (token) {\n                request.headers[\"X-CSRF-Token\"] = token;\n            }\n        }\n        if (this.requestAcceptsTurboStreamResponse(request)) {\n            request.acceptResponseType(StreamMessage.contentType);\n        }\n    }\n    requestStarted(_request) {\n        var _a;\n        this.state = FormSubmissionState.waiting;\n        (_a = this.submitter) === null || _a === void 0 ? void 0 : _a.setAttribute(\"disabled\", \"\");\n        this.setSubmitsWith();\n        dispatch(\"turbo:submit-start\", {\n            target: this.formElement,\n            detail: { formSubmission: this },\n        });\n        this.delegate.formSubmissionStarted(this);\n    }\n    requestPreventedHandlingResponse(request, response) {\n        this.result = { success: response.succeeded, fetchResponse: response };\n    }\n    requestSucceededWithResponse(request, response) {\n        if (response.clientError || response.serverError) {\n            this.delegate.formSubmissionFailedWithResponse(this, response);\n        }\n        else if (this.requestMustRedirect(request) && responseSucceededWithoutRedirect(response)) {\n            const error = new Error(\"Form responses must redirect to another location\");\n            this.delegate.formSubmissionErrored(this, error);\n        }\n        else {\n            this.state = FormSubmissionState.receiving;\n            this.result = { success: true, fetchResponse: response };\n            this.delegate.formSubmissionSucceededWithResponse(this, response);\n        }\n    }\n    requestFailedWithResponse(request, response) {\n        this.result = { success: false, fetchResponse: response };\n        this.delegate.formSubmissionFailedWithResponse(this, response);\n    }\n    requestErrored(request, error) {\n        this.result = { success: false, error };\n        this.delegate.formSubmissionErrored(this, error);\n    }\n    requestFinished(_request) {\n        var _a;\n        this.state = FormSubmissionState.stopped;\n        (_a = this.submitter) === null || _a === void 0 ? void 0 : _a.removeAttribute(\"disabled\");\n        this.resetSubmitterText();\n        dispatch(\"turbo:submit-end\", {\n            target: this.formElement,\n            detail: Object.assign({ formSubmission: this }, this.result),\n        });\n        this.delegate.formSubmissionFinished(this);\n    }\n    setSubmitsWith() {\n        if (!this.submitter || !this.submitsWith)\n            return;\n        if (this.submitter.matches(\"button\")) {\n            this.originalSubmitText = this.submitter.innerHTML;\n            this.submitter.innerHTML = this.submitsWith;\n        }\n        else if (this.submitter.matches(\"input\")) {\n            const input = this.submitter;\n            this.originalSubmitText = input.value;\n            input.value = this.submitsWith;\n        }\n    }\n    resetSubmitterText() {\n        if (!this.submitter || !this.originalSubmitText)\n            return;\n        if (this.submitter.matches(\"button\")) {\n            this.submitter.innerHTML = this.originalSubmitText;\n        }\n        else if (this.submitter.matches(\"input\")) {\n            const input = this.submitter;\n            input.value = this.originalSubmitText;\n        }\n    }\n    requestMustRedirect(request) {\n        return !request.isSafe && this.mustRedirect;\n    }\n    requestAcceptsTurboStreamResponse(request) {\n        return !request.isSafe || hasAttribute(\"data-turbo-stream\", this.submitter, this.formElement);\n    }\n    get submitsWith() {\n        var _a;\n        return (_a = this.submitter) === null || _a === void 0 ? void 0 : _a.getAttribute(\"data-turbo-submits-with\");\n    }\n}\nfunction buildFormData(formElement, submitter) {\n    const formData = new FormData(formElement);\n    const name = submitter === null || submitter === void 0 ? void 0 : submitter.getAttribute(\"name\");\n    const value = submitter === null || submitter === void 0 ? void 0 : submitter.getAttribute(\"value\");\n    if (name) {\n        formData.append(name, value || \"\");\n    }\n    return formData;\n}\nfunction getCookieValue(cookieName) {\n    if (cookieName != null) {\n        const cookies = document.cookie ? document.cookie.split(\"; \") : [];\n        const cookie = cookies.find((cookie) => cookie.startsWith(cookieName));\n        if (cookie) {\n            const value = cookie.split(\"=\").slice(1).join(\"=\");\n            return value ? decodeURIComponent(value) : undefined;\n        }\n    }\n}\nfunction responseSucceededWithoutRedirect(response) {\n    return response.statusCode == 200 && !response.redirected;\n}\nfunction mergeFormDataEntries(url, entries) {\n    const searchParams = new URLSearchParams();\n    for (const [name, value] of entries) {\n        if (value instanceof File)\n            continue;\n        searchParams.append(name, value);\n    }\n    url.search = searchParams.toString();\n    return url;\n}\n\nclass Snapshot {\n    constructor(element) {\n        this.element = element;\n    }\n    get activeElement() {\n        return this.element.ownerDocument.activeElement;\n    }\n    get children() {\n        return [...this.element.children];\n    }\n    hasAnchor(anchor) {\n        return this.getElementForAnchor(anchor) != null;\n    }\n    getElementForAnchor(anchor) {\n        return anchor ? this.element.querySelector(`[id='${anchor}'], a[name='${anchor}']`) : null;\n    }\n    get isConnected() {\n        return this.element.isConnected;\n    }\n    get firstAutofocusableElement() {\n        const inertDisabledOrHidden = \"[inert], :disabled, [hidden], details:not([open]), dialog:not([open])\";\n        for (const element of this.element.querySelectorAll(\"[autofocus]\")) {\n            if (element.closest(inertDisabledOrHidden) == null)\n                return element;\n            else\n                continue;\n        }\n        return null;\n    }\n    get permanentElements() {\n        return queryPermanentElementsAll(this.element);\n    }\n    getPermanentElementById(id) {\n        return getPermanentElementById(this.element, id);\n    }\n    getPermanentElementMapForSnapshot(snapshot) {\n        const permanentElementMap = {};\n        for (const currentPermanentElement of this.permanentElements) {\n            const { id } = currentPermanentElement;\n            const newPermanentElement = snapshot.getPermanentElementById(id);\n            if (newPermanentElement) {\n                permanentElementMap[id] = [currentPermanentElement, newPermanentElement];\n            }\n        }\n        return permanentElementMap;\n    }\n}\nfunction getPermanentElementById(node, id) {\n    return node.querySelector(`#${id}[data-turbo-permanent]`);\n}\nfunction queryPermanentElementsAll(node) {\n    return node.querySelectorAll(\"[id][data-turbo-permanent]\");\n}\n\nclass FormSubmitObserver {\n    constructor(delegate, eventTarget) {\n        this.started = false;\n        this.submitCaptured = () => {\n            this.eventTarget.removeEventListener(\"submit\", this.submitBubbled, false);\n            this.eventTarget.addEventListener(\"submit\", this.submitBubbled, false);\n        };\n        this.submitBubbled = ((event) => {\n            if (!event.defaultPrevented) {\n                const form = event.target instanceof HTMLFormElement ? event.target : undefined;\n                const submitter = event.submitter || undefined;\n                if (form &&\n                    submissionDoesNotDismissDialog(form, submitter) &&\n                    submissionDoesNotTargetIFrame(form, submitter) &&\n                    this.delegate.willSubmitForm(form, submitter)) {\n                    event.preventDefault();\n                    event.stopImmediatePropagation();\n                    this.delegate.formSubmitted(form, submitter);\n                }\n            }\n        });\n        this.delegate = delegate;\n        this.eventTarget = eventTarget;\n    }\n    start() {\n        if (!this.started) {\n            this.eventTarget.addEventListener(\"submit\", this.submitCaptured, true);\n            this.started = true;\n        }\n    }\n    stop() {\n        if (this.started) {\n            this.eventTarget.removeEventListener(\"submit\", this.submitCaptured, true);\n            this.started = false;\n        }\n    }\n}\nfunction submissionDoesNotDismissDialog(form, submitter) {\n    const method = (submitter === null || submitter === void 0 ? void 0 : submitter.getAttribute(\"formmethod\")) || form.getAttribute(\"method\");\n    return method != \"dialog\";\n}\nfunction submissionDoesNotTargetIFrame(form, submitter) {\n    if ((submitter === null || submitter === void 0 ? void 0 : submitter.hasAttribute(\"formtarget\")) || form.hasAttribute(\"target\")) {\n        const target = (submitter === null || submitter === void 0 ? void 0 : submitter.getAttribute(\"formtarget\")) || form.target;\n        for (const element of document.getElementsByName(target)) {\n            if (element instanceof HTMLIFrameElement)\n                return false;\n        }\n        return true;\n    }\n    else {\n        return true;\n    }\n}\n\nclass View {\n    constructor(delegate, element) {\n        this.resolveRenderPromise = (_value) => { };\n        this.resolveInterceptionPromise = (_value) => { };\n        this.delegate = delegate;\n        this.element = element;\n    }\n    scrollToAnchor(anchor) {\n        const element = this.snapshot.getElementForAnchor(anchor);\n        if (element) {\n            this.scrollToElement(element);\n            this.focusElement(element);\n        }\n        else {\n            this.scrollToPosition({ x: 0, y: 0 });\n        }\n    }\n    scrollToAnchorFromLocation(location) {\n        this.scrollToAnchor(getAnchor(location));\n    }\n    scrollToElement(element) {\n        element.scrollIntoView();\n    }\n    focusElement(element) {\n        if (element instanceof HTMLElement) {\n            if (element.hasAttribute(\"tabindex\")) {\n                element.focus();\n            }\n            else {\n                element.setAttribute(\"tabindex\", \"-1\");\n                element.focus();\n                element.removeAttribute(\"tabindex\");\n            }\n        }\n    }\n    scrollToPosition({ x, y }) {\n        this.scrollRoot.scrollTo(x, y);\n    }\n    scrollToTop() {\n        this.scrollToPosition({ x: 0, y: 0 });\n    }\n    get scrollRoot() {\n        return window;\n    }\n    async render(renderer) {\n        const { isPreview, shouldRender, newSnapshot: snapshot } = renderer;\n        if (shouldRender) {\n            try {\n                this.renderPromise = new Promise((resolve) => (this.resolveRenderPromise = resolve));\n                this.renderer = renderer;\n                await this.prepareToRenderSnapshot(renderer);\n                const renderInterception = new Promise((resolve) => (this.resolveInterceptionPromise = resolve));\n                const options = { resume: this.resolveInterceptionPromise, render: this.renderer.renderElement };\n                const immediateRender = this.delegate.allowsImmediateRender(snapshot, options);\n                if (!immediateRender)\n                    await renderInterception;\n                await this.renderSnapshot(renderer);\n                this.delegate.viewRenderedSnapshot(snapshot, isPreview);\n                this.delegate.preloadOnLoadLinksForView(this.element);\n                this.finishRenderingSnapshot(renderer);\n            }\n            finally {\n                delete this.renderer;\n                this.resolveRenderPromise(undefined);\n                delete this.renderPromise;\n            }\n        }\n        else {\n            this.invalidate(renderer.reloadReason);\n        }\n    }\n    invalidate(reason) {\n        this.delegate.viewInvalidated(reason);\n    }\n    async prepareToRenderSnapshot(renderer) {\n        this.markAsPreview(renderer.isPreview);\n        await renderer.prepareToRender();\n    }\n    markAsPreview(isPreview) {\n        if (isPreview) {\n            this.element.setAttribute(\"data-turbo-preview\", \"\");\n        }\n        else {\n            this.element.removeAttribute(\"data-turbo-preview\");\n        }\n    }\n    async renderSnapshot(renderer) {\n        await renderer.render();\n    }\n    finishRenderingSnapshot(renderer) {\n        renderer.finishRendering();\n    }\n}\n\nclass FrameView extends View {\n    missing() {\n        this.element.innerHTML = `<strong class=\"turbo-frame-error\">Content missing</strong>`;\n    }\n    get snapshot() {\n        return new Snapshot(this.element);\n    }\n}\n\nclass LinkInterceptor {\n    constructor(delegate, element) {\n        this.clickBubbled = (event) => {\n            if (this.respondsToEventTarget(event.target)) {\n                this.clickEvent = event;\n            }\n            else {\n                delete this.clickEvent;\n            }\n        };\n        this.linkClicked = ((event) => {\n            if (this.clickEvent && this.respondsToEventTarget(event.target) && event.target instanceof Element) {\n                if (this.delegate.shouldInterceptLinkClick(event.target, event.detail.url, event.detail.originalEvent)) {\n                    this.clickEvent.preventDefault();\n                    event.preventDefault();\n                    this.delegate.linkClickIntercepted(event.target, event.detail.url, event.detail.originalEvent);\n                }\n            }\n            delete this.clickEvent;\n        });\n        this.willVisit = ((_event) => {\n            delete this.clickEvent;\n        });\n        this.delegate = delegate;\n        this.element = element;\n    }\n    start() {\n        this.element.addEventListener(\"click\", this.clickBubbled);\n        document.addEventListener(\"turbo:click\", this.linkClicked);\n        document.addEventListener(\"turbo:before-visit\", this.willVisit);\n    }\n    stop() {\n        this.element.removeEventListener(\"click\", this.clickBubbled);\n        document.removeEventListener(\"turbo:click\", this.linkClicked);\n        document.removeEventListener(\"turbo:before-visit\", this.willVisit);\n    }\n    respondsToEventTarget(target) {\n        const element = target instanceof Element ? target : target instanceof Node ? target.parentElement : null;\n        return element && element.closest(\"turbo-frame, html\") == this.element;\n    }\n}\n\nclass LinkClickObserver {\n    constructor(delegate, eventTarget) {\n        this.started = false;\n        this.clickCaptured = () => {\n            this.eventTarget.removeEventListener(\"click\", this.clickBubbled, false);\n            this.eventTarget.addEventListener(\"click\", this.clickBubbled, false);\n        };\n        this.clickBubbled = (event) => {\n            if (event instanceof MouseEvent && this.clickEventIsSignificant(event)) {\n                const target = (event.composedPath && event.composedPath()[0]) || event.target;\n                const link = this.findLinkFromClickTarget(target);\n                if (link && doesNotTargetIFrame(link)) {\n                    const location = this.getLocationForLink(link);\n                    if (this.delegate.willFollowLinkToLocation(link, location, event)) {\n                        event.preventDefault();\n                        this.delegate.followedLinkToLocation(link, location);\n                    }\n                }\n            }\n        };\n        this.delegate = delegate;\n        this.eventTarget = eventTarget;\n    }\n    start() {\n        if (!this.started) {\n            this.eventTarget.addEventListener(\"click\", this.clickCaptured, true);\n            this.started = true;\n        }\n    }\n    stop() {\n        if (this.started) {\n            this.eventTarget.removeEventListener(\"click\", this.clickCaptured, true);\n            this.started = false;\n        }\n    }\n    clickEventIsSignificant(event) {\n        return !((event.target && event.target.isContentEditable) ||\n            event.defaultPrevented ||\n            event.which > 1 ||\n            event.altKey ||\n            event.ctrlKey ||\n            event.metaKey ||\n            event.shiftKey);\n    }\n    findLinkFromClickTarget(target) {\n        return findClosestRecursively(target, \"a[href]:not([target^=_]):not([download])\");\n    }\n    getLocationForLink(link) {\n        return expandURL(link.getAttribute(\"href\") || \"\");\n    }\n}\nfunction doesNotTargetIFrame(anchor) {\n    if (anchor.hasAttribute(\"target\")) {\n        for (const element of document.getElementsByName(anchor.target)) {\n            if (element instanceof HTMLIFrameElement)\n                return false;\n        }\n        return true;\n    }\n    else {\n        return true;\n    }\n}\n\nclass FormLinkClickObserver {\n    constructor(delegate, element) {\n        this.delegate = delegate;\n        this.linkInterceptor = new LinkClickObserver(this, element);\n    }\n    start() {\n        this.linkInterceptor.start();\n    }\n    stop() {\n        this.linkInterceptor.stop();\n    }\n    willFollowLinkToLocation(link, location, originalEvent) {\n        return (this.delegate.willSubmitFormLinkToLocation(link, location, originalEvent) &&\n            link.hasAttribute(\"data-turbo-method\"));\n    }\n    followedLinkToLocation(link, location) {\n        const form = document.createElement(\"form\");\n        const type = \"hidden\";\n        for (const [name, value] of location.searchParams) {\n            form.append(Object.assign(document.createElement(\"input\"), { type, name, value }));\n        }\n        const action = Object.assign(location, { search: \"\" });\n        form.setAttribute(\"data-turbo\", \"true\");\n        form.setAttribute(\"action\", action.href);\n        form.setAttribute(\"hidden\", \"\");\n        const method = link.getAttribute(\"data-turbo-method\");\n        if (method)\n            form.setAttribute(\"method\", method);\n        const turboFrame = link.getAttribute(\"data-turbo-frame\");\n        if (turboFrame)\n            form.setAttribute(\"data-turbo-frame\", turboFrame);\n        const turboAction = getVisitAction(link);\n        if (turboAction)\n            form.setAttribute(\"data-turbo-action\", turboAction);\n        const turboConfirm = link.getAttribute(\"data-turbo-confirm\");\n        if (turboConfirm)\n            form.setAttribute(\"data-turbo-confirm\", turboConfirm);\n        const turboStream = link.hasAttribute(\"data-turbo-stream\");\n        if (turboStream)\n            form.setAttribute(\"data-turbo-stream\", \"\");\n        this.delegate.submittedFormLinkToLocation(link, location, form);\n        document.body.appendChild(form);\n        form.addEventListener(\"turbo:submit-end\", () => form.remove(), { once: true });\n        requestAnimationFrame(() => form.requestSubmit());\n    }\n}\n\nclass Bardo {\n    static async preservingPermanentElements(delegate, permanentElementMap, callback) {\n        const bardo = new this(delegate, permanentElementMap);\n        bardo.enter();\n        await callback();\n        bardo.leave();\n    }\n    constructor(delegate, permanentElementMap) {\n        this.delegate = delegate;\n        this.permanentElementMap = permanentElementMap;\n    }\n    enter() {\n        for (const id in this.permanentElementMap) {\n            const [currentPermanentElement, newPermanentElement] = this.permanentElementMap[id];\n            this.delegate.enteringBardo(currentPermanentElement, newPermanentElement);\n            this.replaceNewPermanentElementWithPlaceholder(newPermanentElement);\n        }\n    }\n    leave() {\n        for (const id in this.permanentElementMap) {\n            const [currentPermanentElement] = this.permanentElementMap[id];\n            this.replaceCurrentPermanentElementWithClone(currentPermanentElement);\n            this.replacePlaceholderWithPermanentElement(currentPermanentElement);\n            this.delegate.leavingBardo(currentPermanentElement);\n        }\n    }\n    replaceNewPermanentElementWithPlaceholder(permanentElement) {\n        const placeholder = createPlaceholderForPermanentElement(permanentElement);\n        permanentElement.replaceWith(placeholder);\n    }\n    replaceCurrentPermanentElementWithClone(permanentElement) {\n        const clone = permanentElement.cloneNode(true);\n        permanentElement.replaceWith(clone);\n    }\n    replacePlaceholderWithPermanentElement(permanentElement) {\n        const placeholder = this.getPlaceholderById(permanentElement.id);\n        placeholder === null || placeholder === void 0 ? void 0 : placeholder.replaceWith(permanentElement);\n    }\n    getPlaceholderById(id) {\n        return this.placeholders.find((element) => element.content == id);\n    }\n    get placeholders() {\n        return [...document.querySelectorAll(\"meta[name=turbo-permanent-placeholder][content]\")];\n    }\n}\nfunction createPlaceholderForPermanentElement(permanentElement) {\n    const element = document.createElement(\"meta\");\n    element.setAttribute(\"name\", \"turbo-permanent-placeholder\");\n    element.setAttribute(\"content\", permanentElement.id);\n    return element;\n}\n\nclass Renderer {\n    constructor(currentSnapshot, newSnapshot, renderElement, isPreview, willRender = true) {\n        this.activeElement = null;\n        this.currentSnapshot = currentSnapshot;\n        this.newSnapshot = newSnapshot;\n        this.isPreview = isPreview;\n        this.willRender = willRender;\n        this.renderElement = renderElement;\n        this.promise = new Promise((resolve, reject) => (this.resolvingFunctions = { resolve, reject }));\n    }\n    get shouldRender() {\n        return true;\n    }\n    get reloadReason() {\n        return;\n    }\n    prepareToRender() {\n        return;\n    }\n    finishRendering() {\n        if (this.resolvingFunctions) {\n            this.resolvingFunctions.resolve();\n            delete this.resolvingFunctions;\n        }\n    }\n    async preservingPermanentElements(callback) {\n        await Bardo.preservingPermanentElements(this, this.permanentElementMap, callback);\n    }\n    focusFirstAutofocusableElement() {\n        const element = this.connectedSnapshot.firstAutofocusableElement;\n        if (elementIsFocusable(element)) {\n            element.focus();\n        }\n    }\n    enteringBardo(currentPermanentElement) {\n        if (this.activeElement)\n            return;\n        if (currentPermanentElement.contains(this.currentSnapshot.activeElement)) {\n            this.activeElement = this.currentSnapshot.activeElement;\n        }\n    }\n    leavingBardo(currentPermanentElement) {\n        if (currentPermanentElement.contains(this.activeElement) && this.activeElement instanceof HTMLElement) {\n            this.activeElement.focus();\n            this.activeElement = null;\n        }\n    }\n    get connectedSnapshot() {\n        return this.newSnapshot.isConnected ? this.newSnapshot : this.currentSnapshot;\n    }\n    get currentElement() {\n        return this.currentSnapshot.element;\n    }\n    get newElement() {\n        return this.newSnapshot.element;\n    }\n    get permanentElementMap() {\n        return this.currentSnapshot.getPermanentElementMapForSnapshot(this.newSnapshot);\n    }\n}\nfunction elementIsFocusable(element) {\n    return element && typeof element.focus == \"function\";\n}\n\nclass FrameRenderer extends Renderer {\n    static renderElement(currentElement, newElement) {\n        var _a;\n        const destinationRange = document.createRange();\n        destinationRange.selectNodeContents(currentElement);\n        destinationRange.deleteContents();\n        const frameElement = newElement;\n        const sourceRange = (_a = frameElement.ownerDocument) === null || _a === void 0 ? void 0 : _a.createRange();\n        if (sourceRange) {\n            sourceRange.selectNodeContents(frameElement);\n            currentElement.appendChild(sourceRange.extractContents());\n        }\n    }\n    constructor(delegate, currentSnapshot, newSnapshot, renderElement, isPreview, willRender = true) {\n        super(currentSnapshot, newSnapshot, renderElement, isPreview, willRender);\n        this.delegate = delegate;\n    }\n    get shouldRender() {\n        return true;\n    }\n    async render() {\n        await nextAnimationFrame();\n        this.preservingPermanentElements(() => {\n            this.loadFrameElement();\n        });\n        this.scrollFrameIntoView();\n        await nextAnimationFrame();\n        this.focusFirstAutofocusableElement();\n        await nextAnimationFrame();\n        this.activateScriptElements();\n    }\n    loadFrameElement() {\n        this.delegate.willRenderFrame(this.currentElement, this.newElement);\n        this.renderElement(this.currentElement, this.newElement);\n    }\n    scrollFrameIntoView() {\n        if (this.currentElement.autoscroll || this.newElement.autoscroll) {\n            const element = this.currentElement.firstElementChild;\n            const block = readScrollLogicalPosition(this.currentElement.getAttribute(\"data-autoscroll-block\"), \"end\");\n            const behavior = readScrollBehavior(this.currentElement.getAttribute(\"data-autoscroll-behavior\"), \"auto\");\n            if (element) {\n                element.scrollIntoView({ block, behavior });\n                return true;\n            }\n        }\n        return false;\n    }\n    activateScriptElements() {\n        for (const inertScriptElement of this.newScriptElements) {\n            const activatedScriptElement = activateScriptElement(inertScriptElement);\n            inertScriptElement.replaceWith(activatedScriptElement);\n        }\n    }\n    get newScriptElements() {\n        return this.currentElement.querySelectorAll(\"script\");\n    }\n}\nfunction readScrollLogicalPosition(value, defaultValue) {\n    if (value == \"end\" || value == \"start\" || value == \"center\" || value == \"nearest\") {\n        return value;\n    }\n    else {\n        return defaultValue;\n    }\n}\nfunction readScrollBehavior(value, defaultValue) {\n    if (value == \"auto\" || value == \"smooth\") {\n        return value;\n    }\n    else {\n        return defaultValue;\n    }\n}\n\nclass ProgressBar {\n    static get defaultCSS() {\n        return unindent `\n      .turbo-progress-bar {\n        position: fixed;\n        display: block;\n        top: 0;\n        left: 0;\n        height: 3px;\n        background: #0076ff;\n        z-index: 2147483647;\n        transition:\n          width ${ProgressBar.animationDuration}ms ease-out,\n          opacity ${ProgressBar.animationDuration / 2}ms ${ProgressBar.animationDuration / 2}ms ease-in;\n        transform: translate3d(0, 0, 0);\n      }\n    `;\n    }\n    constructor() {\n        this.hiding = false;\n        this.value = 0;\n        this.visible = false;\n        this.trickle = () => {\n            this.setValue(this.value + Math.random() / 100);\n        };\n        this.stylesheetElement = this.createStylesheetElement();\n        this.progressElement = this.createProgressElement();\n        this.installStylesheetElement();\n        this.setValue(0);\n    }\n    show() {\n        if (!this.visible) {\n            this.visible = true;\n            this.installProgressElement();\n            this.startTrickling();\n        }\n    }\n    hide() {\n        if (this.visible && !this.hiding) {\n            this.hiding = true;\n            this.fadeProgressElement(() => {\n                this.uninstallProgressElement();\n                this.stopTrickling();\n                this.visible = false;\n                this.hiding = false;\n            });\n        }\n    }\n    setValue(value) {\n        this.value = value;\n        this.refresh();\n    }\n    installStylesheetElement() {\n        document.head.insertBefore(this.stylesheetElement, document.head.firstChild);\n    }\n    installProgressElement() {\n        this.progressElement.style.width = \"0\";\n        this.progressElement.style.opacity = \"1\";\n        document.documentElement.insertBefore(this.progressElement, document.body);\n        this.refresh();\n    }\n    fadeProgressElement(callback) {\n        this.progressElement.style.opacity = \"0\";\n        setTimeout(callback, ProgressBar.animationDuration * 1.5);\n    }\n    uninstallProgressElement() {\n        if (this.progressElement.parentNode) {\n            document.documentElement.removeChild(this.progressElement);\n        }\n    }\n    startTrickling() {\n        if (!this.trickleInterval) {\n            this.trickleInterval = window.setInterval(this.trickle, ProgressBar.animationDuration);\n        }\n    }\n    stopTrickling() {\n        window.clearInterval(this.trickleInterval);\n        delete this.trickleInterval;\n    }\n    refresh() {\n        requestAnimationFrame(() => {\n            this.progressElement.style.width = `${10 + this.value * 90}%`;\n        });\n    }\n    createStylesheetElement() {\n        const element = document.createElement(\"style\");\n        element.type = \"text/css\";\n        element.textContent = ProgressBar.defaultCSS;\n        if (this.cspNonce) {\n            element.nonce = this.cspNonce;\n        }\n        return element;\n    }\n    createProgressElement() {\n        const element = document.createElement(\"div\");\n        element.className = \"turbo-progress-bar\";\n        return element;\n    }\n    get cspNonce() {\n        return getMetaContent(\"csp-nonce\");\n    }\n}\nProgressBar.animationDuration = 300;\n\nclass HeadSnapshot extends Snapshot {\n    constructor() {\n        super(...arguments);\n        this.detailsByOuterHTML = this.children\n            .filter((element) => !elementIsNoscript(element))\n            .map((element) => elementWithoutNonce(element))\n            .reduce((result, element) => {\n            const { outerHTML } = element;\n            const details = outerHTML in result\n                ? result[outerHTML]\n                : {\n                    type: elementType(element),\n                    tracked: elementIsTracked(element),\n                    elements: [],\n                };\n            return Object.assign(Object.assign({}, result), { [outerHTML]: Object.assign(Object.assign({}, details), { elements: [...details.elements, element] }) });\n        }, {});\n    }\n    get trackedElementSignature() {\n        return Object.keys(this.detailsByOuterHTML)\n            .filter((outerHTML) => this.detailsByOuterHTML[outerHTML].tracked)\n            .join(\"\");\n    }\n    getScriptElementsNotInSnapshot(snapshot) {\n        return this.getElementsMatchingTypeNotInSnapshot(\"script\", snapshot);\n    }\n    getStylesheetElementsNotInSnapshot(snapshot) {\n        return this.getElementsMatchingTypeNotInSnapshot(\"stylesheet\", snapshot);\n    }\n    getElementsMatchingTypeNotInSnapshot(matchedType, snapshot) {\n        return Object.keys(this.detailsByOuterHTML)\n            .filter((outerHTML) => !(outerHTML in snapshot.detailsByOuterHTML))\n            .map((outerHTML) => this.detailsByOuterHTML[outerHTML])\n            .filter(({ type }) => type == matchedType)\n            .map(({ elements: [element] }) => element);\n    }\n    get provisionalElements() {\n        return Object.keys(this.detailsByOuterHTML).reduce((result, outerHTML) => {\n            const { type, tracked, elements } = this.detailsByOuterHTML[outerHTML];\n            if (type == null && !tracked) {\n                return [...result, ...elements];\n            }\n            else if (elements.length > 1) {\n                return [...result, ...elements.slice(1)];\n            }\n            else {\n                return result;\n            }\n        }, []);\n    }\n    getMetaValue(name) {\n        const element = this.findMetaElementByName(name);\n        return element ? element.getAttribute(\"content\") : null;\n    }\n    findMetaElementByName(name) {\n        return Object.keys(this.detailsByOuterHTML).reduce((result, outerHTML) => {\n            const { elements: [element], } = this.detailsByOuterHTML[outerHTML];\n            return elementIsMetaElementWithName(element, name) ? element : result;\n        }, undefined);\n    }\n}\nfunction elementType(element) {\n    if (elementIsScript(element)) {\n        return \"script\";\n    }\n    else if (elementIsStylesheet(element)) {\n        return \"stylesheet\";\n    }\n}\nfunction elementIsTracked(element) {\n    return element.getAttribute(\"data-turbo-track\") == \"reload\";\n}\nfunction elementIsScript(element) {\n    const tagName = element.localName;\n    return tagName == \"script\";\n}\nfunction elementIsNoscript(element) {\n    const tagName = element.localName;\n    return tagName == \"noscript\";\n}\nfunction elementIsStylesheet(element) {\n    const tagName = element.localName;\n    return tagName == \"style\" || (tagName == \"link\" && element.getAttribute(\"rel\") == \"stylesheet\");\n}\nfunction elementIsMetaElementWithName(element, name) {\n    const tagName = element.localName;\n    return tagName == \"meta\" && element.getAttribute(\"name\") == name;\n}\nfunction elementWithoutNonce(element) {\n    if (element.hasAttribute(\"nonce\")) {\n        element.setAttribute(\"nonce\", \"\");\n    }\n    return element;\n}\n\nclass PageSnapshot extends Snapshot {\n    static fromHTMLString(html = \"\") {\n        return this.fromDocument(parseHTMLDocument(html));\n    }\n    static fromElement(element) {\n        return this.fromDocument(element.ownerDocument);\n    }\n    static fromDocument({ head, body }) {\n        return new this(body, new HeadSnapshot(head));\n    }\n    constructor(element, headSnapshot) {\n        super(element);\n        this.headSnapshot = headSnapshot;\n    }\n    clone() {\n        const clonedElement = this.element.cloneNode(true);\n        const selectElements = this.element.querySelectorAll(\"select\");\n        const clonedSelectElements = clonedElement.querySelectorAll(\"select\");\n        for (const [index, source] of selectElements.entries()) {\n            const clone = clonedSelectElements[index];\n            for (const option of clone.selectedOptions)\n                option.selected = false;\n            for (const option of source.selectedOptions)\n                clone.options[option.index].selected = true;\n        }\n        for (const clonedPasswordInput of clonedElement.querySelectorAll('input[type=\"password\"]')) {\n            clonedPasswordInput.value = \"\";\n        }\n        return new PageSnapshot(clonedElement, this.headSnapshot);\n    }\n    get headElement() {\n        return this.headSnapshot.element;\n    }\n    get rootLocation() {\n        var _a;\n        const root = (_a = this.getSetting(\"root\")) !== null && _a !== void 0 ? _a : \"/\";\n        return expandURL(root);\n    }\n    get cacheControlValue() {\n        return this.getSetting(\"cache-control\");\n    }\n    get isPreviewable() {\n        return this.cacheControlValue != \"no-preview\";\n    }\n    get isCacheable() {\n        return this.cacheControlValue != \"no-cache\";\n    }\n    get isVisitable() {\n        return this.getSetting(\"visit-control\") != \"reload\";\n    }\n    getSetting(name) {\n        return this.headSnapshot.getMetaValue(`turbo-${name}`);\n    }\n}\n\nvar TimingMetric;\n(function (TimingMetric) {\n    TimingMetric[\"visitStart\"] = \"visitStart\";\n    TimingMetric[\"requestStart\"] = \"requestStart\";\n    TimingMetric[\"requestEnd\"] = \"requestEnd\";\n    TimingMetric[\"visitEnd\"] = \"visitEnd\";\n})(TimingMetric || (TimingMetric = {}));\nvar VisitState;\n(function (VisitState) {\n    VisitState[\"initialized\"] = \"initialized\";\n    VisitState[\"started\"] = \"started\";\n    VisitState[\"canceled\"] = \"canceled\";\n    VisitState[\"failed\"] = \"failed\";\n    VisitState[\"completed\"] = \"completed\";\n})(VisitState || (VisitState = {}));\nconst defaultOptions = {\n    action: \"advance\",\n    historyChanged: false,\n    visitCachedSnapshot: () => { },\n    willRender: true,\n    updateHistory: true,\n    shouldCacheSnapshot: true,\n    acceptsStreamResponse: false,\n};\nvar SystemStatusCode;\n(function (SystemStatusCode) {\n    SystemStatusCode[SystemStatusCode[\"networkFailure\"] = 0] = \"networkFailure\";\n    SystemStatusCode[SystemStatusCode[\"timeoutFailure\"] = -1] = \"timeoutFailure\";\n    SystemStatusCode[SystemStatusCode[\"contentTypeMismatch\"] = -2] = \"contentTypeMismatch\";\n})(SystemStatusCode || (SystemStatusCode = {}));\nclass Visit {\n    constructor(delegate, location, restorationIdentifier, options = {}) {\n        this.identifier = uuid();\n        this.timingMetrics = {};\n        this.followedRedirect = false;\n        this.historyChanged = false;\n        this.scrolled = false;\n        this.shouldCacheSnapshot = true;\n        this.acceptsStreamResponse = false;\n        this.snapshotCached = false;\n        this.state = VisitState.initialized;\n        this.delegate = delegate;\n        this.location = location;\n        this.restorationIdentifier = restorationIdentifier || uuid();\n        const { action, historyChanged, referrer, snapshot, snapshotHTML, response, visitCachedSnapshot, willRender, updateHistory, shouldCacheSnapshot, acceptsStreamResponse, } = Object.assign(Object.assign({}, defaultOptions), options);\n        this.action = action;\n        this.historyChanged = historyChanged;\n        this.referrer = referrer;\n        this.snapshot = snapshot;\n        this.snapshotHTML = snapshotHTML;\n        this.response = response;\n        this.isSamePage = this.delegate.locationWithActionIsSamePage(this.location, this.action);\n        this.visitCachedSnapshot = visitCachedSnapshot;\n        this.willRender = willRender;\n        this.updateHistory = updateHistory;\n        this.scrolled = !willRender;\n        this.shouldCacheSnapshot = shouldCacheSnapshot;\n        this.acceptsStreamResponse = acceptsStreamResponse;\n    }\n    get adapter() {\n        return this.delegate.adapter;\n    }\n    get view() {\n        return this.delegate.view;\n    }\n    get history() {\n        return this.delegate.history;\n    }\n    get restorationData() {\n        return this.history.getRestorationDataForIdentifier(this.restorationIdentifier);\n    }\n    get silent() {\n        return this.isSamePage;\n    }\n    start() {\n        if (this.state == VisitState.initialized) {\n            this.recordTimingMetric(TimingMetric.visitStart);\n            this.state = VisitState.started;\n            this.adapter.visitStarted(this);\n            this.delegate.visitStarted(this);\n        }\n    }\n    cancel() {\n        if (this.state == VisitState.started) {\n            if (this.request) {\n                this.request.cancel();\n            }\n            this.cancelRender();\n            this.state = VisitState.canceled;\n        }\n    }\n    complete() {\n        if (this.state == VisitState.started) {\n            this.recordTimingMetric(TimingMetric.visitEnd);\n            this.state = VisitState.completed;\n            this.followRedirect();\n            if (!this.followedRedirect) {\n                this.adapter.visitCompleted(this);\n                this.delegate.visitCompleted(this);\n            }\n        }\n    }\n    fail() {\n        if (this.state == VisitState.started) {\n            this.state = VisitState.failed;\n            this.adapter.visitFailed(this);\n        }\n    }\n    changeHistory() {\n        var _a;\n        if (!this.historyChanged && this.updateHistory) {\n            const actionForHistory = this.location.href === ((_a = this.referrer) === null || _a === void 0 ? void 0 : _a.href) ? \"replace\" : this.action;\n            const method = getHistoryMethodForAction(actionForHistory);\n            this.history.update(method, this.location, this.restorationIdentifier);\n            this.historyChanged = true;\n        }\n    }\n    issueRequest() {\n        if (this.hasPreloadedResponse()) {\n            this.simulateRequest();\n        }\n        else if (this.shouldIssueRequest() && !this.request) {\n            this.request = new FetchRequest(this, FetchMethod.get, this.location);\n            this.request.perform();\n        }\n    }\n    simulateRequest() {\n        if (this.response) {\n            this.startRequest();\n            this.recordResponse();\n            this.finishRequest();\n        }\n    }\n    startRequest() {\n        this.recordTimingMetric(TimingMetric.requestStart);\n        this.adapter.visitRequestStarted(this);\n    }\n    recordResponse(response = this.response) {\n        this.response = response;\n        if (response) {\n            const { statusCode } = response;\n            if (isSuccessful(statusCode)) {\n                this.adapter.visitRequestCompleted(this);\n            }\n            else {\n                this.adapter.visitRequestFailedWithStatusCode(this, statusCode);\n            }\n        }\n    }\n    finishRequest() {\n        this.recordTimingMetric(TimingMetric.requestEnd);\n        this.adapter.visitRequestFinished(this);\n    }\n    loadResponse() {\n        if (this.response) {\n            const { statusCode, responseHTML } = this.response;\n            this.render(async () => {\n                if (this.shouldCacheSnapshot)\n                    this.cacheSnapshot();\n                if (this.view.renderPromise)\n                    await this.view.renderPromise;\n                if (isSuccessful(statusCode) && responseHTML != null) {\n                    await this.view.renderPage(PageSnapshot.fromHTMLString(responseHTML), false, this.willRender, this);\n                    this.performScroll();\n                    this.adapter.visitRendered(this);\n                    this.complete();\n                }\n                else {\n                    await this.view.renderError(PageSnapshot.fromHTMLString(responseHTML), this);\n                    this.adapter.visitRendered(this);\n                    this.fail();\n                }\n            });\n        }\n    }\n    getCachedSnapshot() {\n        const snapshot = this.view.getCachedSnapshotForLocation(this.location) || this.getPreloadedSnapshot();\n        if (snapshot && (!getAnchor(this.location) || snapshot.hasAnchor(getAnchor(this.location)))) {\n            if (this.action == \"restore\" || snapshot.isPreviewable) {\n                return snapshot;\n            }\n        }\n    }\n    getPreloadedSnapshot() {\n        if (this.snapshotHTML) {\n            return PageSnapshot.fromHTMLString(this.snapshotHTML);\n        }\n    }\n    hasCachedSnapshot() {\n        return this.getCachedSnapshot() != null;\n    }\n    loadCachedSnapshot() {\n        const snapshot = this.getCachedSnapshot();\n        if (snapshot) {\n            const isPreview = this.shouldIssueRequest();\n            this.render(async () => {\n                this.cacheSnapshot();\n                if (this.isSamePage) {\n                    this.adapter.visitRendered(this);\n                }\n                else {\n                    if (this.view.renderPromise)\n                        await this.view.renderPromise;\n                    await this.view.renderPage(snapshot, isPreview, this.willRender, this);\n                    this.performScroll();\n                    this.adapter.visitRendered(this);\n                    if (!isPreview) {\n                        this.complete();\n                    }\n                }\n            });\n        }\n    }\n    followRedirect() {\n        var _a;\n        if (this.redirectedToLocation && !this.followedRedirect && ((_a = this.response) === null || _a === void 0 ? void 0 : _a.redirected)) {\n            this.adapter.visitProposedToLocation(this.redirectedToLocation, {\n                action: \"replace\",\n                response: this.response,\n                shouldCacheSnapshot: false,\n                willRender: false,\n            });\n            this.followedRedirect = true;\n        }\n    }\n    goToSamePageAnchor() {\n        if (this.isSamePage) {\n            this.render(async () => {\n                this.cacheSnapshot();\n                this.performScroll();\n                this.changeHistory();\n                this.adapter.visitRendered(this);\n            });\n        }\n    }\n    prepareRequest(request) {\n        if (this.acceptsStreamResponse) {\n            request.acceptResponseType(StreamMessage.contentType);\n        }\n    }\n    requestStarted() {\n        this.startRequest();\n    }\n    requestPreventedHandlingResponse(_request, _response) { }\n    async requestSucceededWithResponse(request, response) {\n        const responseHTML = await response.responseHTML;\n        const { redirected, statusCode } = response;\n        if (responseHTML == undefined) {\n            this.recordResponse({\n                statusCode: SystemStatusCode.contentTypeMismatch,\n                redirected,\n            });\n        }\n        else {\n            this.redirectedToLocation = response.redirected ? response.location : undefined;\n            this.recordResponse({ statusCode: statusCode, responseHTML, redirected });\n        }\n    }\n    async requestFailedWithResponse(request, response) {\n        const responseHTML = await response.responseHTML;\n        const { redirected, statusCode } = response;\n        if (responseHTML == undefined) {\n            this.recordResponse({\n                statusCode: SystemStatusCode.contentTypeMismatch,\n                redirected,\n            });\n        }\n        else {\n            this.recordResponse({ statusCode: statusCode, responseHTML, redirected });\n        }\n    }\n    requestErrored(_request, _error) {\n        this.recordResponse({\n            statusCode: SystemStatusCode.networkFailure,\n            redirected: false,\n        });\n    }\n    requestFinished() {\n        this.finishRequest();\n    }\n    performScroll() {\n        if (!this.scrolled && !this.view.forceReloaded) {\n            if (this.action == \"restore\") {\n                this.scrollToRestoredPosition() || this.scrollToAnchor() || this.view.scrollToTop();\n            }\n            else {\n                this.scrollToAnchor() || this.view.scrollToTop();\n            }\n            if (this.isSamePage) {\n                this.delegate.visitScrolledToSamePageLocation(this.view.lastRenderedLocation, this.location);\n            }\n            this.scrolled = true;\n        }\n    }\n    scrollToRestoredPosition() {\n        const { scrollPosition } = this.restorationData;\n        if (scrollPosition) {\n            this.view.scrollToPosition(scrollPosition);\n            return true;\n        }\n    }\n    scrollToAnchor() {\n        const anchor = getAnchor(this.location);\n        if (anchor != null) {\n            this.view.scrollToAnchor(anchor);\n            return true;\n        }\n    }\n    recordTimingMetric(metric) {\n        this.timingMetrics[metric] = new Date().getTime();\n    }\n    getTimingMetrics() {\n        return Object.assign({}, this.timingMetrics);\n    }\n    getHistoryMethodForAction(action) {\n        switch (action) {\n            case \"replace\":\n                return history.replaceState;\n            case \"advance\":\n            case \"restore\":\n                return history.pushState;\n        }\n    }\n    hasPreloadedResponse() {\n        return typeof this.response == \"object\";\n    }\n    shouldIssueRequest() {\n        if (this.isSamePage) {\n            return false;\n        }\n        else if (this.action == \"restore\") {\n            return !this.hasCachedSnapshot();\n        }\n        else {\n            return this.willRender;\n        }\n    }\n    cacheSnapshot() {\n        if (!this.snapshotCached) {\n            this.view.cacheSnapshot(this.snapshot).then((snapshot) => snapshot && this.visitCachedSnapshot(snapshot));\n            this.snapshotCached = true;\n        }\n    }\n    async render(callback) {\n        this.cancelRender();\n        await new Promise((resolve) => {\n            this.frame = requestAnimationFrame(() => resolve());\n        });\n        await callback();\n        delete this.frame;\n    }\n    cancelRender() {\n        if (this.frame) {\n            cancelAnimationFrame(this.frame);\n            delete this.frame;\n        }\n    }\n}\nfunction isSuccessful(statusCode) {\n    return statusCode >= 200 && statusCode < 300;\n}\n\nclass BrowserAdapter {\n    constructor(session) {\n        this.progressBar = new ProgressBar();\n        this.showProgressBar = () => {\n            this.progressBar.show();\n        };\n        this.session = session;\n    }\n    visitProposedToLocation(location, options) {\n        this.navigator.startVisit(location, (options === null || options === void 0 ? void 0 : options.restorationIdentifier) || uuid(), options);\n    }\n    visitStarted(visit) {\n        this.location = visit.location;\n        visit.loadCachedSnapshot();\n        visit.issueRequest();\n        visit.goToSamePageAnchor();\n    }\n    visitRequestStarted(visit) {\n        this.progressBar.setValue(0);\n        if (visit.hasCachedSnapshot() || visit.action != \"restore\") {\n            this.showVisitProgressBarAfterDelay();\n        }\n        else {\n            this.showProgressBar();\n        }\n    }\n    visitRequestCompleted(visit) {\n        visit.loadResponse();\n    }\n    visitRequestFailedWithStatusCode(visit, statusCode) {\n        switch (statusCode) {\n            case SystemStatusCode.networkFailure:\n            case SystemStatusCode.timeoutFailure:\n            case SystemStatusCode.contentTypeMismatch:\n                return this.reload({\n                    reason: \"request_failed\",\n                    context: {\n                        statusCode,\n                    },\n                });\n            default:\n                return visit.loadResponse();\n        }\n    }\n    visitRequestFinished(_visit) {\n        this.progressBar.setValue(1);\n        this.hideVisitProgressBar();\n    }\n    visitCompleted(_visit) { }\n    pageInvalidated(reason) {\n        this.reload(reason);\n    }\n    visitFailed(_visit) { }\n    visitRendered(_visit) { }\n    formSubmissionStarted(_formSubmission) {\n        this.progressBar.setValue(0);\n        this.showFormProgressBarAfterDelay();\n    }\n    formSubmissionFinished(_formSubmission) {\n        this.progressBar.setValue(1);\n        this.hideFormProgressBar();\n    }\n    showVisitProgressBarAfterDelay() {\n        this.visitProgressBarTimeout = window.setTimeout(this.showProgressBar, this.session.progressBarDelay);\n    }\n    hideVisitProgressBar() {\n        this.progressBar.hide();\n        if (this.visitProgressBarTimeout != null) {\n            window.clearTimeout(this.visitProgressBarTimeout);\n            delete this.visitProgressBarTimeout;\n        }\n    }\n    showFormProgressBarAfterDelay() {\n        if (this.formProgressBarTimeout == null) {\n            this.formProgressBarTimeout = window.setTimeout(this.showProgressBar, this.session.progressBarDelay);\n        }\n    }\n    hideFormProgressBar() {\n        this.progressBar.hide();\n        if (this.formProgressBarTimeout != null) {\n            window.clearTimeout(this.formProgressBarTimeout);\n            delete this.formProgressBarTimeout;\n        }\n    }\n    reload(reason) {\n        var _a;\n        dispatch(\"turbo:reload\", { detail: reason });\n        window.location.href = ((_a = this.location) === null || _a === void 0 ? void 0 : _a.toString()) || window.location.href;\n    }\n    get navigator() {\n        return this.session.navigator;\n    }\n}\n\nclass CacheObserver {\n    constructor() {\n        this.selector = \"[data-turbo-temporary]\";\n        this.deprecatedSelector = \"[data-turbo-cache=false]\";\n        this.started = false;\n        this.removeTemporaryElements = ((_event) => {\n            for (const element of this.temporaryElements) {\n                element.remove();\n            }\n        });\n    }\n    start() {\n        if (!this.started) {\n            this.started = true;\n            addEventListener(\"turbo:before-cache\", this.removeTemporaryElements, false);\n        }\n    }\n    stop() {\n        if (this.started) {\n            this.started = false;\n            removeEventListener(\"turbo:before-cache\", this.removeTemporaryElements, false);\n        }\n    }\n    get temporaryElements() {\n        return [...document.querySelectorAll(this.selector), ...this.temporaryElementsWithDeprecation];\n    }\n    get temporaryElementsWithDeprecation() {\n        const elements = document.querySelectorAll(this.deprecatedSelector);\n        if (elements.length) {\n            console.warn(`The ${this.deprecatedSelector} selector is deprecated and will be removed in a future version. Use ${this.selector} instead.`);\n        }\n        return [...elements];\n    }\n}\n\nclass FrameRedirector {\n    constructor(session, element) {\n        this.session = session;\n        this.element = element;\n        this.linkInterceptor = new LinkInterceptor(this, element);\n        this.formSubmitObserver = new FormSubmitObserver(this, element);\n    }\n    start() {\n        this.linkInterceptor.start();\n        this.formSubmitObserver.start();\n    }\n    stop() {\n        this.linkInterceptor.stop();\n        this.formSubmitObserver.stop();\n    }\n    shouldInterceptLinkClick(element, _location, _event) {\n        return this.shouldRedirect(element);\n    }\n    linkClickIntercepted(element, url, event) {\n        const frame = this.findFrameElement(element);\n        if (frame) {\n            frame.delegate.linkClickIntercepted(element, url, event);\n        }\n    }\n    willSubmitForm(element, submitter) {\n        return (element.closest(\"turbo-frame\") == null &&\n            this.shouldSubmit(element, submitter) &&\n            this.shouldRedirect(element, submitter));\n    }\n    formSubmitted(element, submitter) {\n        const frame = this.findFrameElement(element, submitter);\n        if (frame) {\n            frame.delegate.formSubmitted(element, submitter);\n        }\n    }\n    shouldSubmit(form, submitter) {\n        var _a;\n        const action = getAction(form, submitter);\n        const meta = this.element.ownerDocument.querySelector(`meta[name=\"turbo-root\"]`);\n        const rootLocation = expandURL((_a = meta === null || meta === void 0 ? void 0 : meta.content) !== null && _a !== void 0 ? _a : \"/\");\n        return this.shouldRedirect(form, submitter) && locationIsVisitable(action, rootLocation);\n    }\n    shouldRedirect(element, submitter) {\n        const isNavigatable = element instanceof HTMLFormElement\n            ? this.session.submissionIsNavigatable(element, submitter)\n            : this.session.elementIsNavigatable(element);\n        if (isNavigatable) {\n            const frame = this.findFrameElement(element, submitter);\n            return frame ? frame != element.closest(\"turbo-frame\") : false;\n        }\n        else {\n            return false;\n        }\n    }\n    findFrameElement(element, submitter) {\n        const id = (submitter === null || submitter === void 0 ? void 0 : submitter.getAttribute(\"data-turbo-frame\")) || element.getAttribute(\"data-turbo-frame\");\n        if (id && id != \"_top\") {\n            const frame = this.element.querySelector(`#${id}:not([disabled])`);\n            if (frame instanceof FrameElement) {\n                return frame;\n            }\n        }\n    }\n}\n\nclass History {\n    constructor(delegate) {\n        this.restorationIdentifier = uuid();\n        this.restorationData = {};\n        this.started = false;\n        this.pageLoaded = false;\n        this.onPopState = (event) => {\n            if (this.shouldHandlePopState()) {\n                const { turbo } = event.state || {};\n                if (turbo) {\n                    this.location = new URL(window.location.href);\n                    const { restorationIdentifier } = turbo;\n                    this.restorationIdentifier = restorationIdentifier;\n                    this.delegate.historyPoppedToLocationWithRestorationIdentifier(this.location, restorationIdentifier);\n                }\n            }\n        };\n        this.onPageLoad = async (_event) => {\n            await nextMicrotask();\n            this.pageLoaded = true;\n        };\n        this.delegate = delegate;\n    }\n    start() {\n        if (!this.started) {\n            addEventListener(\"popstate\", this.onPopState, false);\n            addEventListener(\"load\", this.onPageLoad, false);\n            this.started = true;\n            this.replace(new URL(window.location.href));\n        }\n    }\n    stop() {\n        if (this.started) {\n            removeEventListener(\"popstate\", this.onPopState, false);\n            removeEventListener(\"load\", this.onPageLoad, false);\n            this.started = false;\n        }\n    }\n    push(location, restorationIdentifier) {\n        this.update(history.pushState, location, restorationIdentifier);\n    }\n    replace(location, restorationIdentifier) {\n        this.update(history.replaceState, location, restorationIdentifier);\n    }\n    update(method, location, restorationIdentifier = uuid()) {\n        const state = { turbo: { restorationIdentifier } };\n        method.call(history, state, \"\", location.href);\n        this.location = location;\n        this.restorationIdentifier = restorationIdentifier;\n    }\n    getRestorationDataForIdentifier(restorationIdentifier) {\n        return this.restorationData[restorationIdentifier] || {};\n    }\n    updateRestorationData(additionalData) {\n        const { restorationIdentifier } = this;\n        const restorationData = this.restorationData[restorationIdentifier];\n        this.restorationData[restorationIdentifier] = Object.assign(Object.assign({}, restorationData), additionalData);\n    }\n    assumeControlOfScrollRestoration() {\n        var _a;\n        if (!this.previousScrollRestoration) {\n            this.previousScrollRestoration = (_a = history.scrollRestoration) !== null && _a !== void 0 ? _a : \"auto\";\n            history.scrollRestoration = \"manual\";\n        }\n    }\n    relinquishControlOfScrollRestoration() {\n        if (this.previousScrollRestoration) {\n            history.scrollRestoration = this.previousScrollRestoration;\n            delete this.previousScrollRestoration;\n        }\n    }\n    shouldHandlePopState() {\n        return this.pageIsLoaded();\n    }\n    pageIsLoaded() {\n        return this.pageLoaded || document.readyState == \"complete\";\n    }\n}\n\nclass Navigator {\n    constructor(delegate) {\n        this.delegate = delegate;\n    }\n    proposeVisit(location, options = {}) {\n        if (this.delegate.allowsVisitingLocationWithAction(location, options.action)) {\n            if (locationIsVisitable(location, this.view.snapshot.rootLocation)) {\n                this.delegate.visitProposedToLocation(location, options);\n            }\n            else {\n                window.location.href = location.toString();\n            }\n        }\n    }\n    startVisit(locatable, restorationIdentifier, options = {}) {\n        this.stop();\n        this.currentVisit = new Visit(this, expandURL(locatable), restorationIdentifier, Object.assign({ referrer: this.location }, options));\n        this.currentVisit.start();\n    }\n    submitForm(form, submitter) {\n        this.stop();\n        this.formSubmission = new FormSubmission(this, form, submitter, true);\n        this.formSubmission.start();\n    }\n    stop() {\n        if (this.formSubmission) {\n            this.formSubmission.stop();\n            delete this.formSubmission;\n        }\n        if (this.currentVisit) {\n            this.currentVisit.cancel();\n            delete this.currentVisit;\n        }\n    }\n    get adapter() {\n        return this.delegate.adapter;\n    }\n    get view() {\n        return this.delegate.view;\n    }\n    get history() {\n        return this.delegate.history;\n    }\n    formSubmissionStarted(formSubmission) {\n        if (typeof this.adapter.formSubmissionStarted === \"function\") {\n            this.adapter.formSubmissionStarted(formSubmission);\n        }\n    }\n    async formSubmissionSucceededWithResponse(formSubmission, fetchResponse) {\n        if (formSubmission == this.formSubmission) {\n            const responseHTML = await fetchResponse.responseHTML;\n            if (responseHTML) {\n                const shouldCacheSnapshot = formSubmission.isSafe;\n                if (!shouldCacheSnapshot) {\n                    this.view.clearSnapshotCache();\n                }\n                const { statusCode, redirected } = fetchResponse;\n                const action = this.getActionForFormSubmission(formSubmission);\n                const visitOptions = {\n                    action,\n                    shouldCacheSnapshot,\n                    response: { statusCode, responseHTML, redirected },\n                };\n                this.proposeVisit(fetchResponse.location, visitOptions);\n            }\n        }\n    }\n    async formSubmissionFailedWithResponse(formSubmission, fetchResponse) {\n        const responseHTML = await fetchResponse.responseHTML;\n        if (responseHTML) {\n            const snapshot = PageSnapshot.fromHTMLString(responseHTML);\n            if (fetchResponse.serverError) {\n                await this.view.renderError(snapshot, this.currentVisit);\n            }\n            else {\n                await this.view.renderPage(snapshot, false, true, this.currentVisit);\n            }\n            this.view.scrollToTop();\n            this.view.clearSnapshotCache();\n        }\n    }\n    formSubmissionErrored(formSubmission, error) {\n        console.error(error);\n    }\n    formSubmissionFinished(formSubmission) {\n        if (typeof this.adapter.formSubmissionFinished === \"function\") {\n            this.adapter.formSubmissionFinished(formSubmission);\n        }\n    }\n    visitStarted(visit) {\n        this.delegate.visitStarted(visit);\n    }\n    visitCompleted(visit) {\n        this.delegate.visitCompleted(visit);\n    }\n    locationWithActionIsSamePage(location, action) {\n        const anchor = getAnchor(location);\n        const currentAnchor = getAnchor(this.view.lastRenderedLocation);\n        const isRestorationToTop = action === \"restore\" && typeof anchor === \"undefined\";\n        return (action !== \"replace\" &&\n            getRequestURL(location) === getRequestURL(this.view.lastRenderedLocation) &&\n            (isRestorationToTop || (anchor != null && anchor !== currentAnchor)));\n    }\n    visitScrolledToSamePageLocation(oldURL, newURL) {\n        this.delegate.visitScrolledToSamePageLocation(oldURL, newURL);\n    }\n    get location() {\n        return this.history.location;\n    }\n    get restorationIdentifier() {\n        return this.history.restorationIdentifier;\n    }\n    getActionForFormSubmission({ submitter, formElement }) {\n        return getVisitAction(submitter, formElement) || \"advance\";\n    }\n}\n\nvar PageStage;\n(function (PageStage) {\n    PageStage[PageStage[\"initial\"] = 0] = \"initial\";\n    PageStage[PageStage[\"loading\"] = 1] = \"loading\";\n    PageStage[PageStage[\"interactive\"] = 2] = \"interactive\";\n    PageStage[PageStage[\"complete\"] = 3] = \"complete\";\n})(PageStage || (PageStage = {}));\nclass PageObserver {\n    constructor(delegate) {\n        this.stage = PageStage.initial;\n        this.started = false;\n        this.interpretReadyState = () => {\n            const { readyState } = this;\n            if (readyState == \"interactive\") {\n                this.pageIsInteractive();\n            }\n            else if (readyState == \"complete\") {\n                this.pageIsComplete();\n            }\n        };\n        this.pageWillUnload = () => {\n            this.delegate.pageWillUnload();\n        };\n        this.delegate = delegate;\n    }\n    start() {\n        if (!this.started) {\n            if (this.stage == PageStage.initial) {\n                this.stage = PageStage.loading;\n            }\n            document.addEventListener(\"readystatechange\", this.interpretReadyState, false);\n            addEventListener(\"pagehide\", this.pageWillUnload, false);\n            this.started = true;\n        }\n    }\n    stop() {\n        if (this.started) {\n            document.removeEventListener(\"readystatechange\", this.interpretReadyState, false);\n            removeEventListener(\"pagehide\", this.pageWillUnload, false);\n            this.started = false;\n        }\n    }\n    pageIsInteractive() {\n        if (this.stage == PageStage.loading) {\n            this.stage = PageStage.interactive;\n            this.delegate.pageBecameInteractive();\n        }\n    }\n    pageIsComplete() {\n        this.pageIsInteractive();\n        if (this.stage == PageStage.interactive) {\n            this.stage = PageStage.complete;\n            this.delegate.pageLoaded();\n        }\n    }\n    get readyState() {\n        return document.readyState;\n    }\n}\n\nclass ScrollObserver {\n    constructor(delegate) {\n        this.started = false;\n        this.onScroll = () => {\n            this.updatePosition({ x: window.pageXOffset, y: window.pageYOffset });\n        };\n        this.delegate = delegate;\n    }\n    start() {\n        if (!this.started) {\n            addEventListener(\"scroll\", this.onScroll, false);\n            this.onScroll();\n            this.started = true;\n        }\n    }\n    stop() {\n        if (this.started) {\n            removeEventListener(\"scroll\", this.onScroll, false);\n            this.started = false;\n        }\n    }\n    updatePosition(position) {\n        this.delegate.scrollPositionChanged(position);\n    }\n}\n\nclass StreamMessageRenderer {\n    render({ fragment }) {\n        Bardo.preservingPermanentElements(this, getPermanentElementMapForFragment(fragment), () => document.documentElement.appendChild(fragment));\n    }\n    enteringBardo(currentPermanentElement, newPermanentElement) {\n        newPermanentElement.replaceWith(currentPermanentElement.cloneNode(true));\n    }\n    leavingBardo() { }\n}\nfunction getPermanentElementMapForFragment(fragment) {\n    const permanentElementsInDocument = queryPermanentElementsAll(document.documentElement);\n    const permanentElementMap = {};\n    for (const permanentElementInDocument of permanentElementsInDocument) {\n        const { id } = permanentElementInDocument;\n        for (const streamElement of fragment.querySelectorAll(\"turbo-stream\")) {\n            const elementInStream = getPermanentElementById(streamElement.templateElement.content, id);\n            if (elementInStream) {\n                permanentElementMap[id] = [permanentElementInDocument, elementInStream];\n            }\n        }\n    }\n    return permanentElementMap;\n}\n\nclass StreamObserver {\n    constructor(delegate) {\n        this.sources = new Set();\n        this.started = false;\n        this.inspectFetchResponse = ((event) => {\n            const response = fetchResponseFromEvent(event);\n            if (response && fetchResponseIsStream(response)) {\n                event.preventDefault();\n                this.receiveMessageResponse(response);\n            }\n        });\n        this.receiveMessageEvent = (event) => {\n            if (this.started && typeof event.data == \"string\") {\n                this.receiveMessageHTML(event.data);\n            }\n        };\n        this.delegate = delegate;\n    }\n    start() {\n        if (!this.started) {\n            this.started = true;\n            addEventListener(\"turbo:before-fetch-response\", this.inspectFetchResponse, false);\n        }\n    }\n    stop() {\n        if (this.started) {\n            this.started = false;\n            removeEventListener(\"turbo:before-fetch-response\", this.inspectFetchResponse, false);\n        }\n    }\n    connectStreamSource(source) {\n        if (!this.streamSourceIsConnected(source)) {\n            this.sources.add(source);\n            source.addEventListener(\"message\", this.receiveMessageEvent, false);\n        }\n    }\n    disconnectStreamSource(source) {\n        if (this.streamSourceIsConnected(source)) {\n            this.sources.delete(source);\n            source.removeEventListener(\"message\", this.receiveMessageEvent, false);\n        }\n    }\n    streamSourceIsConnected(source) {\n        return this.sources.has(source);\n    }\n    async receiveMessageResponse(response) {\n        const html = await response.responseHTML;\n        if (html) {\n            this.receiveMessageHTML(html);\n        }\n    }\n    receiveMessageHTML(html) {\n        this.delegate.receivedMessageFromStream(StreamMessage.wrap(html));\n    }\n}\nfunction fetchResponseFromEvent(event) {\n    var _a;\n    const fetchResponse = (_a = event.detail) === null || _a === void 0 ? void 0 : _a.fetchResponse;\n    if (fetchResponse instanceof FetchResponse) {\n        return fetchResponse;\n    }\n}\nfunction fetchResponseIsStream(response) {\n    var _a;\n    const contentType = (_a = response.contentType) !== null && _a !== void 0 ? _a : \"\";\n    return contentType.startsWith(StreamMessage.contentType);\n}\n\nclass ErrorRenderer extends Renderer {\n    static renderElement(currentElement, newElement) {\n        const { documentElement, body } = document;\n        documentElement.replaceChild(newElement, body);\n    }\n    async render() {\n        this.replaceHeadAndBody();\n        this.activateScriptElements();\n    }\n    replaceHeadAndBody() {\n        const { documentElement, head } = document;\n        documentElement.replaceChild(this.newHead, head);\n        this.renderElement(this.currentElement, this.newElement);\n    }\n    activateScriptElements() {\n        for (const replaceableElement of this.scriptElements) {\n            const parentNode = replaceableElement.parentNode;\n            if (parentNode) {\n                const element = activateScriptElement(replaceableElement);\n                parentNode.replaceChild(element, replaceableElement);\n            }\n        }\n    }\n    get newHead() {\n        return this.newSnapshot.headSnapshot.element;\n    }\n    get scriptElements() {\n        return document.documentElement.querySelectorAll(\"script\");\n    }\n}\n\nclass PageRenderer extends Renderer {\n    static renderElement(currentElement, newElement) {\n        if (document.body && newElement instanceof HTMLBodyElement) {\n            document.body.replaceWith(newElement);\n        }\n        else {\n            document.documentElement.appendChild(newElement);\n        }\n    }\n    get shouldRender() {\n        return this.newSnapshot.isVisitable && this.trackedElementsAreIdentical;\n    }\n    get reloadReason() {\n        if (!this.newSnapshot.isVisitable) {\n            return {\n                reason: \"turbo_visit_control_is_reload\",\n            };\n        }\n        if (!this.trackedElementsAreIdentical) {\n            return {\n                reason: \"tracked_element_mismatch\",\n            };\n        }\n    }\n    async prepareToRender() {\n        await this.mergeHead();\n    }\n    async render() {\n        if (this.willRender) {\n            await this.replaceBody();\n        }\n    }\n    finishRendering() {\n        super.finishRendering();\n        if (!this.isPreview) {\n            this.focusFirstAutofocusableElement();\n        }\n    }\n    get currentHeadSnapshot() {\n        return this.currentSnapshot.headSnapshot;\n    }\n    get newHeadSnapshot() {\n        return this.newSnapshot.headSnapshot;\n    }\n    get newElement() {\n        return this.newSnapshot.element;\n    }\n    async mergeHead() {\n        const mergedHeadElements = this.mergeProvisionalElements();\n        const newStylesheetElements = this.copyNewHeadStylesheetElements();\n        this.copyNewHeadScriptElements();\n        await mergedHeadElements;\n        await newStylesheetElements;\n    }\n    async replaceBody() {\n        await this.preservingPermanentElements(async () => {\n            this.activateNewBody();\n            await this.assignNewBody();\n        });\n    }\n    get trackedElementsAreIdentical() {\n        return this.currentHeadSnapshot.trackedElementSignature == this.newHeadSnapshot.trackedElementSignature;\n    }\n    async copyNewHeadStylesheetElements() {\n        const loadingElements = [];\n        for (const element of this.newHeadStylesheetElements) {\n            loadingElements.push(waitForLoad(element));\n            document.head.appendChild(element);\n        }\n        await Promise.all(loadingElements);\n    }\n    copyNewHeadScriptElements() {\n        for (const element of this.newHeadScriptElements) {\n            document.head.appendChild(activateScriptElement(element));\n        }\n    }\n    async mergeProvisionalElements() {\n        const newHeadElements = [...this.newHeadProvisionalElements];\n        for (const element of this.currentHeadProvisionalElements) {\n            if (!this.isCurrentElementInElementList(element, newHeadElements)) {\n                document.head.removeChild(element);\n            }\n        }\n        for (const element of newHeadElements) {\n            document.head.appendChild(element);\n        }\n    }\n    isCurrentElementInElementList(element, elementList) {\n        for (const [index, newElement] of elementList.entries()) {\n            if (element.tagName == \"TITLE\") {\n                if (newElement.tagName != \"TITLE\") {\n                    continue;\n                }\n                if (element.innerHTML == newElement.innerHTML) {\n                    elementList.splice(index, 1);\n                    return true;\n                }\n            }\n            if (newElement.isEqualNode(element)) {\n                elementList.splice(index, 1);\n                return true;\n            }\n        }\n        return false;\n    }\n    removeCurrentHeadProvisionalElements() {\n        for (const element of this.currentHeadProvisionalElements) {\n            document.head.removeChild(element);\n        }\n    }\n    copyNewHeadProvisionalElements() {\n        for (const element of this.newHeadProvisionalElements) {\n            document.head.appendChild(element);\n        }\n    }\n    activateNewBody() {\n        document.adoptNode(this.newElement);\n        this.activateNewBodyScriptElements();\n    }\n    activateNewBodyScriptElements() {\n        for (const inertScriptElement of this.newBodyScriptElements) {\n            const activatedScriptElement = activateScriptElement(inertScriptElement);\n            inertScriptElement.replaceWith(activatedScriptElement);\n        }\n    }\n    async assignNewBody() {\n        await this.renderElement(this.currentElement, this.newElement);\n    }\n    get newHeadStylesheetElements() {\n        return this.newHeadSnapshot.getStylesheetElementsNotInSnapshot(this.currentHeadSnapshot);\n    }\n    get newHeadScriptElements() {\n        return this.newHeadSnapshot.getScriptElementsNotInSnapshot(this.currentHeadSnapshot);\n    }\n    get currentHeadProvisionalElements() {\n        return this.currentHeadSnapshot.provisionalElements;\n    }\n    get newHeadProvisionalElements() {\n        return this.newHeadSnapshot.provisionalElements;\n    }\n    get newBodyScriptElements() {\n        return this.newElement.querySelectorAll(\"script\");\n    }\n}\n\nclass SnapshotCache {\n    constructor(size) {\n        this.keys = [];\n        this.snapshots = {};\n        this.size = size;\n    }\n    has(location) {\n        return toCacheKey(location) in this.snapshots;\n    }\n    get(location) {\n        if (this.has(location)) {\n            const snapshot = this.read(location);\n            this.touch(location);\n            return snapshot;\n        }\n    }\n    put(location, snapshot) {\n        this.write(location, snapshot);\n        this.touch(location);\n        return snapshot;\n    }\n    clear() {\n        this.snapshots = {};\n    }\n    read(location) {\n        return this.snapshots[toCacheKey(location)];\n    }\n    write(location, snapshot) {\n        this.snapshots[toCacheKey(location)] = snapshot;\n    }\n    touch(location) {\n        const key = toCacheKey(location);\n        const index = this.keys.indexOf(key);\n        if (index > -1)\n            this.keys.splice(index, 1);\n        this.keys.unshift(key);\n        this.trim();\n    }\n    trim() {\n        for (const key of this.keys.splice(this.size)) {\n            delete this.snapshots[key];\n        }\n    }\n}\n\nclass PageView extends View {\n    constructor() {\n        super(...arguments);\n        this.snapshotCache = new SnapshotCache(10);\n        this.lastRenderedLocation = new URL(location.href);\n        this.forceReloaded = false;\n    }\n    renderPage(snapshot, isPreview = false, willRender = true, visit) {\n        const renderer = new PageRenderer(this.snapshot, snapshot, PageRenderer.renderElement, isPreview, willRender);\n        if (!renderer.shouldRender) {\n            this.forceReloaded = true;\n        }\n        else {\n            visit === null || visit === void 0 ? void 0 : visit.changeHistory();\n        }\n        return this.render(renderer);\n    }\n    renderError(snapshot, visit) {\n        visit === null || visit === void 0 ? void 0 : visit.changeHistory();\n        const renderer = new ErrorRenderer(this.snapshot, snapshot, ErrorRenderer.renderElement, false);\n        return this.render(renderer);\n    }\n    clearSnapshotCache() {\n        this.snapshotCache.clear();\n    }\n    async cacheSnapshot(snapshot = this.snapshot) {\n        if (snapshot.isCacheable) {\n            this.delegate.viewWillCacheSnapshot();\n            const { lastRenderedLocation: location } = this;\n            await nextEventLoopTick();\n            const cachedSnapshot = snapshot.clone();\n            this.snapshotCache.put(location, cachedSnapshot);\n            return cachedSnapshot;\n        }\n    }\n    getCachedSnapshotForLocation(location) {\n        return this.snapshotCache.get(location);\n    }\n    get snapshot() {\n        return PageSnapshot.fromElement(this.element);\n    }\n}\n\nclass Preloader {\n    constructor(delegate) {\n        this.selector = \"a[data-turbo-preload]\";\n        this.delegate = delegate;\n    }\n    get snapshotCache() {\n        return this.delegate.navigator.view.snapshotCache;\n    }\n    start() {\n        if (document.readyState === \"loading\") {\n            return document.addEventListener(\"DOMContentLoaded\", () => {\n                this.preloadOnLoadLinksForView(document.body);\n            });\n        }\n        else {\n            this.preloadOnLoadLinksForView(document.body);\n        }\n    }\n    preloadOnLoadLinksForView(element) {\n        for (const link of element.querySelectorAll(this.selector)) {\n            this.preloadURL(link);\n        }\n    }\n    async preloadURL(link) {\n        const location = new URL(link.href);\n        if (this.snapshotCache.has(location)) {\n            return;\n        }\n        try {\n            const response = await fetch(location.toString(), { headers: { \"VND.PREFETCH\": \"true\", Accept: \"text/html\" } });\n            const responseText = await response.text();\n            const snapshot = PageSnapshot.fromHTMLString(responseText);\n            this.snapshotCache.put(location, snapshot);\n        }\n        catch (_) {\n        }\n    }\n}\n\nclass Session {\n    constructor() {\n        this.navigator = new Navigator(this);\n        this.history = new History(this);\n        this.preloader = new Preloader(this);\n        this.view = new PageView(this, document.documentElement);\n        this.adapter = new BrowserAdapter(this);\n        this.pageObserver = new PageObserver(this);\n        this.cacheObserver = new CacheObserver();\n        this.linkClickObserver = new LinkClickObserver(this, window);\n        this.formSubmitObserver = new FormSubmitObserver(this, document);\n        this.scrollObserver = new ScrollObserver(this);\n        this.streamObserver = new StreamObserver(this);\n        this.formLinkClickObserver = new FormLinkClickObserver(this, document.documentElement);\n        this.frameRedirector = new FrameRedirector(this, document.documentElement);\n        this.streamMessageRenderer = new StreamMessageRenderer();\n        this.drive = true;\n        this.enabled = true;\n        this.progressBarDelay = 500;\n        this.started = false;\n        this.formMode = \"on\";\n    }\n    start() {\n        if (!this.started) {\n            this.pageObserver.start();\n            this.cacheObserver.start();\n            this.formLinkClickObserver.start();\n            this.linkClickObserver.start();\n            this.formSubmitObserver.start();\n            this.scrollObserver.start();\n            this.streamObserver.start();\n            this.frameRedirector.start();\n            this.history.start();\n            this.preloader.start();\n            this.started = true;\n            this.enabled = true;\n        }\n    }\n    disable() {\n        this.enabled = false;\n    }\n    stop() {\n        if (this.started) {\n            this.pageObserver.stop();\n            this.cacheObserver.stop();\n            this.formLinkClickObserver.stop();\n            this.linkClickObserver.stop();\n            this.formSubmitObserver.stop();\n            this.scrollObserver.stop();\n            this.streamObserver.stop();\n            this.frameRedirector.stop();\n            this.history.stop();\n            this.started = false;\n        }\n    }\n    registerAdapter(adapter) {\n        this.adapter = adapter;\n    }\n    visit(location, options = {}) {\n        const frameElement = options.frame ? document.getElementById(options.frame) : null;\n        if (frameElement instanceof FrameElement) {\n            frameElement.src = location.toString();\n            frameElement.loaded;\n        }\n        else {\n            this.navigator.proposeVisit(expandURL(location), options);\n        }\n    }\n    connectStreamSource(source) {\n        this.streamObserver.connectStreamSource(source);\n    }\n    disconnectStreamSource(source) {\n        this.streamObserver.disconnectStreamSource(source);\n    }\n    renderStreamMessage(message) {\n        this.streamMessageRenderer.render(StreamMessage.wrap(message));\n    }\n    clearCache() {\n        this.view.clearSnapshotCache();\n    }\n    setProgressBarDelay(delay) {\n        this.progressBarDelay = delay;\n    }\n    setFormMode(mode) {\n        this.formMode = mode;\n    }\n    get location() {\n        return this.history.location;\n    }\n    get restorationIdentifier() {\n        return this.history.restorationIdentifier;\n    }\n    historyPoppedToLocationWithRestorationIdentifier(location, restorationIdentifier) {\n        if (this.enabled) {\n            this.navigator.startVisit(location, restorationIdentifier, {\n                action: \"restore\",\n                historyChanged: true,\n            });\n        }\n        else {\n            this.adapter.pageInvalidated({\n                reason: \"turbo_disabled\",\n            });\n        }\n    }\n    scrollPositionChanged(position) {\n        this.history.updateRestorationData({ scrollPosition: position });\n    }\n    willSubmitFormLinkToLocation(link, location) {\n        return this.elementIsNavigatable(link) && locationIsVisitable(location, this.snapshot.rootLocation);\n    }\n    submittedFormLinkToLocation() { }\n    willFollowLinkToLocation(link, location, event) {\n        return (this.elementIsNavigatable(link) &&\n            locationIsVisitable(location, this.snapshot.rootLocation) &&\n            this.applicationAllowsFollowingLinkToLocation(link, location, event));\n    }\n    followedLinkToLocation(link, location) {\n        const action = this.getActionForLink(link);\n        const acceptsStreamResponse = link.hasAttribute(\"data-turbo-stream\");\n        this.visit(location.href, { action, acceptsStreamResponse });\n    }\n    allowsVisitingLocationWithAction(location, action) {\n        return this.locationWithActionIsSamePage(location, action) || this.applicationAllowsVisitingLocation(location);\n    }\n    visitProposedToLocation(location, options) {\n        extendURLWithDeprecatedProperties(location);\n        this.adapter.visitProposedToLocation(location, options);\n    }\n    visitStarted(visit) {\n        if (!visit.acceptsStreamResponse) {\n            markAsBusy(document.documentElement);\n        }\n        extendURLWithDeprecatedProperties(visit.location);\n        if (!visit.silent) {\n            this.notifyApplicationAfterVisitingLocation(visit.location, visit.action);\n        }\n    }\n    visitCompleted(visit) {\n        clearBusyState(document.documentElement);\n        this.notifyApplicationAfterPageLoad(visit.getTimingMetrics());\n    }\n    locationWithActionIsSamePage(location, action) {\n        return this.navigator.locationWithActionIsSamePage(location, action);\n    }\n    visitScrolledToSamePageLocation(oldURL, newURL) {\n        this.notifyApplicationAfterVisitingSamePageLocation(oldURL, newURL);\n    }\n    willSubmitForm(form, submitter) {\n        const action = getAction(form, submitter);\n        return (this.submissionIsNavigatable(form, submitter) &&\n            locationIsVisitable(expandURL(action), this.snapshot.rootLocation));\n    }\n    formSubmitted(form, submitter) {\n        this.navigator.submitForm(form, submitter);\n    }\n    pageBecameInteractive() {\n        this.view.lastRenderedLocation = this.location;\n        this.notifyApplicationAfterPageLoad();\n    }\n    pageLoaded() {\n        this.history.assumeControlOfScrollRestoration();\n    }\n    pageWillUnload() {\n        this.history.relinquishControlOfScrollRestoration();\n    }\n    receivedMessageFromStream(message) {\n        this.renderStreamMessage(message);\n    }\n    viewWillCacheSnapshot() {\n        var _a;\n        if (!((_a = this.navigator.currentVisit) === null || _a === void 0 ? void 0 : _a.silent)) {\n            this.notifyApplicationBeforeCachingSnapshot();\n        }\n    }\n    allowsImmediateRender({ element }, options) {\n        const event = this.notifyApplicationBeforeRender(element, options);\n        const { defaultPrevented, detail: { render }, } = event;\n        if (this.view.renderer && render) {\n            this.view.renderer.renderElement = render;\n        }\n        return !defaultPrevented;\n    }\n    viewRenderedSnapshot(_snapshot, _isPreview) {\n        this.view.lastRenderedLocation = this.history.location;\n        this.notifyApplicationAfterRender();\n    }\n    preloadOnLoadLinksForView(element) {\n        this.preloader.preloadOnLoadLinksForView(element);\n    }\n    viewInvalidated(reason) {\n        this.adapter.pageInvalidated(reason);\n    }\n    frameLoaded(frame) {\n        this.notifyApplicationAfterFrameLoad(frame);\n    }\n    frameRendered(fetchResponse, frame) {\n        this.notifyApplicationAfterFrameRender(fetchResponse, frame);\n    }\n    applicationAllowsFollowingLinkToLocation(link, location, ev) {\n        const event = this.notifyApplicationAfterClickingLinkToLocation(link, location, ev);\n        return !event.defaultPrevented;\n    }\n    applicationAllowsVisitingLocation(location) {\n        const event = this.notifyApplicationBeforeVisitingLocation(location);\n        return !event.defaultPrevented;\n    }\n    notifyApplicationAfterClickingLinkToLocation(link, location, event) {\n        return dispatch(\"turbo:click\", {\n            target: link,\n            detail: { url: location.href, originalEvent: event },\n            cancelable: true,\n        });\n    }\n    notifyApplicationBeforeVisitingLocation(location) {\n        return dispatch(\"turbo:before-visit\", {\n            detail: { url: location.href },\n            cancelable: true,\n        });\n    }\n    notifyApplicationAfterVisitingLocation(location, action) {\n        return dispatch(\"turbo:visit\", { detail: { url: location.href, action } });\n    }\n    notifyApplicationBeforeCachingSnapshot() {\n        return dispatch(\"turbo:before-cache\");\n    }\n    notifyApplicationBeforeRender(newBody, options) {\n        return dispatch(\"turbo:before-render\", {\n            detail: Object.assign({ newBody }, options),\n            cancelable: true,\n        });\n    }\n    notifyApplicationAfterRender() {\n        return dispatch(\"turbo:render\");\n    }\n    notifyApplicationAfterPageLoad(timing = {}) {\n        return dispatch(\"turbo:load\", {\n            detail: { url: this.location.href, timing },\n        });\n    }\n    notifyApplicationAfterVisitingSamePageLocation(oldURL, newURL) {\n        dispatchEvent(new HashChangeEvent(\"hashchange\", {\n            oldURL: oldURL.toString(),\n            newURL: newURL.toString(),\n        }));\n    }\n    notifyApplicationAfterFrameLoad(frame) {\n        return dispatch(\"turbo:frame-load\", { target: frame });\n    }\n    notifyApplicationAfterFrameRender(fetchResponse, frame) {\n        return dispatch(\"turbo:frame-render\", {\n            detail: { fetchResponse },\n            target: frame,\n            cancelable: true,\n        });\n    }\n    submissionIsNavigatable(form, submitter) {\n        if (this.formMode == \"off\") {\n            return false;\n        }\n        else {\n            const submitterIsNavigatable = submitter ? this.elementIsNavigatable(submitter) : true;\n            if (this.formMode == \"optin\") {\n                return submitterIsNavigatable && form.closest('[data-turbo=\"true\"]') != null;\n            }\n            else {\n                return submitterIsNavigatable && this.elementIsNavigatable(form);\n            }\n        }\n    }\n    elementIsNavigatable(element) {\n        const container = findClosestRecursively(element, \"[data-turbo]\");\n        const withinFrame = findClosestRecursively(element, \"turbo-frame\");\n        if (this.drive || withinFrame) {\n            if (container) {\n                return container.getAttribute(\"data-turbo\") != \"false\";\n            }\n            else {\n                return true;\n            }\n        }\n        else {\n            if (container) {\n                return container.getAttribute(\"data-turbo\") == \"true\";\n            }\n            else {\n                return false;\n            }\n        }\n    }\n    getActionForLink(link) {\n        return getVisitAction(link) || \"advance\";\n    }\n    get snapshot() {\n        return this.view.snapshot;\n    }\n}\nfunction extendURLWithDeprecatedProperties(url) {\n    Object.defineProperties(url, deprecatedLocationPropertyDescriptors);\n}\nconst deprecatedLocationPropertyDescriptors = {\n    absoluteURL: {\n        get() {\n            return this.toString();\n        },\n    },\n};\n\nclass Cache {\n    constructor(session) {\n        this.session = session;\n    }\n    clear() {\n        this.session.clearCache();\n    }\n    resetCacheControl() {\n        this.setCacheControl(\"\");\n    }\n    exemptPageFromCache() {\n        this.setCacheControl(\"no-cache\");\n    }\n    exemptPageFromPreview() {\n        this.setCacheControl(\"no-preview\");\n    }\n    setCacheControl(value) {\n        setMetaContent(\"turbo-cache-control\", value);\n    }\n}\n\nconst StreamActions = {\n    after() {\n        this.targetElements.forEach((e) => { var _a; return (_a = e.parentElement) === null || _a === void 0 ? void 0 : _a.insertBefore(this.templateContent, e.nextSibling); });\n    },\n    append() {\n        this.removeDuplicateTargetChildren();\n        this.targetElements.forEach((e) => e.append(this.templateContent));\n    },\n    before() {\n        this.targetElements.forEach((e) => { var _a; return (_a = e.parentElement) === null || _a === void 0 ? void 0 : _a.insertBefore(this.templateContent, e); });\n    },\n    prepend() {\n        this.removeDuplicateTargetChildren();\n        this.targetElements.forEach((e) => e.prepend(this.templateContent));\n    },\n    remove() {\n        this.targetElements.forEach((e) => e.remove());\n    },\n    replace() {\n        this.targetElements.forEach((e) => e.replaceWith(this.templateContent));\n    },\n    update() {\n        this.targetElements.forEach((targetElement) => {\n            targetElement.innerHTML = \"\";\n            targetElement.append(this.templateContent);\n        });\n    },\n};\n\nconst session = new Session();\nconst cache = new Cache(session);\nconst { navigator: navigator$1 } = session;\nfunction start() {\n    session.start();\n}\nfunction registerAdapter(adapter) {\n    session.registerAdapter(adapter);\n}\nfunction visit(location, options) {\n    session.visit(location, options);\n}\nfunction connectStreamSource(source) {\n    session.connectStreamSource(source);\n}\nfunction disconnectStreamSource(source) {\n    session.disconnectStreamSource(source);\n}\nfunction renderStreamMessage(message) {\n    session.renderStreamMessage(message);\n}\nfunction clearCache() {\n    console.warn(\"Please replace `Turbo.clearCache()` with `Turbo.cache.clear()`. The top-level function is deprecated and will be removed in a future version of Turbo.`\");\n    session.clearCache();\n}\nfunction setProgressBarDelay(delay) {\n    session.setProgressBarDelay(delay);\n}\nfunction setConfirmMethod(confirmMethod) {\n    FormSubmission.confirmMethod = confirmMethod;\n}\nfunction setFormMode(mode) {\n    session.setFormMode(mode);\n}\n\nvar Turbo = /*#__PURE__*/Object.freeze({\n    __proto__: null,\n    navigator: navigator$1,\n    session: session,\n    cache: cache,\n    PageRenderer: PageRenderer,\n    PageSnapshot: PageSnapshot,\n    FrameRenderer: FrameRenderer,\n    start: start,\n    registerAdapter: registerAdapter,\n    visit: visit,\n    connectStreamSource: connectStreamSource,\n    disconnectStreamSource: disconnectStreamSource,\n    renderStreamMessage: renderStreamMessage,\n    clearCache: clearCache,\n    setProgressBarDelay: setProgressBarDelay,\n    setConfirmMethod: setConfirmMethod,\n    setFormMode: setFormMode,\n    StreamActions: StreamActions\n});\n\nclass TurboFrameMissingError extends Error {\n}\n\nclass FrameController {\n    constructor(element) {\n        this.fetchResponseLoaded = (_fetchResponse) => { };\n        this.currentFetchRequest = null;\n        this.resolveVisitPromise = () => { };\n        this.connected = false;\n        this.hasBeenLoaded = false;\n        this.ignoredAttributes = new Set();\n        this.action = null;\n        this.visitCachedSnapshot = ({ element }) => {\n            const frame = element.querySelector(\"#\" + this.element.id);\n            if (frame && this.previousFrameElement) {\n                frame.replaceChildren(...this.previousFrameElement.children);\n            }\n            delete this.previousFrameElement;\n        };\n        this.element = element;\n        this.view = new FrameView(this, this.element);\n        this.appearanceObserver = new AppearanceObserver(this, this.element);\n        this.formLinkClickObserver = new FormLinkClickObserver(this, this.element);\n        this.linkInterceptor = new LinkInterceptor(this, this.element);\n        this.restorationIdentifier = uuid();\n        this.formSubmitObserver = new FormSubmitObserver(this, this.element);\n    }\n    connect() {\n        if (!this.connected) {\n            this.connected = true;\n            if (this.loadingStyle == FrameLoadingStyle.lazy) {\n                this.appearanceObserver.start();\n            }\n            else {\n                this.loadSourceURL();\n            }\n            this.formLinkClickObserver.start();\n            this.linkInterceptor.start();\n            this.formSubmitObserver.start();\n        }\n    }\n    disconnect() {\n        if (this.connected) {\n            this.connected = false;\n            this.appearanceObserver.stop();\n            this.formLinkClickObserver.stop();\n            this.linkInterceptor.stop();\n            this.formSubmitObserver.stop();\n        }\n    }\n    disabledChanged() {\n        if (this.loadingStyle == FrameLoadingStyle.eager) {\n            this.loadSourceURL();\n        }\n    }\n    sourceURLChanged() {\n        if (this.isIgnoringChangesTo(\"src\"))\n            return;\n        if (this.element.isConnected) {\n            this.complete = false;\n        }\n        if (this.loadingStyle == FrameLoadingStyle.eager || this.hasBeenLoaded) {\n            this.loadSourceURL();\n        }\n    }\n    sourceURLReloaded() {\n        const { src } = this.element;\n        this.ignoringChangesToAttribute(\"complete\", () => {\n            this.element.removeAttribute(\"complete\");\n        });\n        this.element.src = null;\n        this.element.src = src;\n        return this.element.loaded;\n    }\n    completeChanged() {\n        if (this.isIgnoringChangesTo(\"complete\"))\n            return;\n        this.loadSourceURL();\n    }\n    loadingStyleChanged() {\n        if (this.loadingStyle == FrameLoadingStyle.lazy) {\n            this.appearanceObserver.start();\n        }\n        else {\n            this.appearanceObserver.stop();\n            this.loadSourceURL();\n        }\n    }\n    async loadSourceURL() {\n        if (this.enabled && this.isActive && !this.complete && this.sourceURL) {\n            this.element.loaded = this.visit(expandURL(this.sourceURL));\n            this.appearanceObserver.stop();\n            await this.element.loaded;\n            this.hasBeenLoaded = true;\n        }\n    }\n    async loadResponse(fetchResponse) {\n        if (fetchResponse.redirected || (fetchResponse.succeeded && fetchResponse.isHTML)) {\n            this.sourceURL = fetchResponse.response.url;\n        }\n        try {\n            const html = await fetchResponse.responseHTML;\n            if (html) {\n                const document = parseHTMLDocument(html);\n                const pageSnapshot = PageSnapshot.fromDocument(document);\n                if (pageSnapshot.isVisitable) {\n                    await this.loadFrameResponse(fetchResponse, document);\n                }\n                else {\n                    await this.handleUnvisitableFrameResponse(fetchResponse);\n                }\n            }\n        }\n        finally {\n            this.fetchResponseLoaded = () => { };\n        }\n    }\n    elementAppearedInViewport(element) {\n        this.proposeVisitIfNavigatedWithAction(element, element);\n        this.loadSourceURL();\n    }\n    willSubmitFormLinkToLocation(link) {\n        return this.shouldInterceptNavigation(link);\n    }\n    submittedFormLinkToLocation(link, _location, form) {\n        const frame = this.findFrameElement(link);\n        if (frame)\n            form.setAttribute(\"data-turbo-frame\", frame.id);\n    }\n    shouldInterceptLinkClick(element, _location, _event) {\n        return this.shouldInterceptNavigation(element);\n    }\n    linkClickIntercepted(element, location) {\n        this.navigateFrame(element, location);\n    }\n    willSubmitForm(element, submitter) {\n        return element.closest(\"turbo-frame\") == this.element && this.shouldInterceptNavigation(element, submitter);\n    }\n    formSubmitted(element, submitter) {\n        if (this.formSubmission) {\n            this.formSubmission.stop();\n        }\n        this.formSubmission = new FormSubmission(this, element, submitter);\n        const { fetchRequest } = this.formSubmission;\n        this.prepareRequest(fetchRequest);\n        this.formSubmission.start();\n    }\n    prepareRequest(request) {\n        var _a;\n        request.headers[\"Turbo-Frame\"] = this.id;\n        if ((_a = this.currentNavigationElement) === null || _a === void 0 ? void 0 : _a.hasAttribute(\"data-turbo-stream\")) {\n            request.acceptResponseType(StreamMessage.contentType);\n        }\n    }\n    requestStarted(_request) {\n        markAsBusy(this.element);\n    }\n    requestPreventedHandlingResponse(_request, _response) {\n        this.resolveVisitPromise();\n    }\n    async requestSucceededWithResponse(request, response) {\n        await this.loadResponse(response);\n        this.resolveVisitPromise();\n    }\n    async requestFailedWithResponse(request, response) {\n        await this.loadResponse(response);\n        this.resolveVisitPromise();\n    }\n    requestErrored(request, error) {\n        console.error(error);\n        this.resolveVisitPromise();\n    }\n    requestFinished(_request) {\n        clearBusyState(this.element);\n    }\n    formSubmissionStarted({ formElement }) {\n        markAsBusy(formElement, this.findFrameElement(formElement));\n    }\n    formSubmissionSucceededWithResponse(formSubmission, response) {\n        const frame = this.findFrameElement(formSubmission.formElement, formSubmission.submitter);\n        frame.delegate.proposeVisitIfNavigatedWithAction(frame, formSubmission.formElement, formSubmission.submitter);\n        frame.delegate.loadResponse(response);\n        if (!formSubmission.isSafe) {\n            session.clearCache();\n        }\n    }\n    formSubmissionFailedWithResponse(formSubmission, fetchResponse) {\n        this.element.delegate.loadResponse(fetchResponse);\n        session.clearCache();\n    }\n    formSubmissionErrored(formSubmission, error) {\n        console.error(error);\n    }\n    formSubmissionFinished({ formElement }) {\n        clearBusyState(formElement, this.findFrameElement(formElement));\n    }\n    allowsImmediateRender({ element: newFrame }, options) {\n        const event = dispatch(\"turbo:before-frame-render\", {\n            target: this.element,\n            detail: Object.assign({ newFrame }, options),\n            cancelable: true,\n        });\n        const { defaultPrevented, detail: { render }, } = event;\n        if (this.view.renderer && render) {\n            this.view.renderer.renderElement = render;\n        }\n        return !defaultPrevented;\n    }\n    viewRenderedSnapshot(_snapshot, _isPreview) { }\n    preloadOnLoadLinksForView(element) {\n        session.preloadOnLoadLinksForView(element);\n    }\n    viewInvalidated() { }\n    willRenderFrame(currentElement, _newElement) {\n        this.previousFrameElement = currentElement.cloneNode(true);\n    }\n    async loadFrameResponse(fetchResponse, document) {\n        const newFrameElement = await this.extractForeignFrameElement(document.body);\n        if (newFrameElement) {\n            const snapshot = new Snapshot(newFrameElement);\n            const renderer = new FrameRenderer(this, this.view.snapshot, snapshot, FrameRenderer.renderElement, false, false);\n            if (this.view.renderPromise)\n                await this.view.renderPromise;\n            this.changeHistory();\n            await this.view.render(renderer);\n            this.complete = true;\n            session.frameRendered(fetchResponse, this.element);\n            session.frameLoaded(this.element);\n            this.fetchResponseLoaded(fetchResponse);\n        }\n        else if (this.willHandleFrameMissingFromResponse(fetchResponse)) {\n            this.handleFrameMissingFromResponse(fetchResponse);\n        }\n    }\n    async visit(url) {\n        var _a;\n        const request = new FetchRequest(this, FetchMethod.get, url, new URLSearchParams(), this.element);\n        (_a = this.currentFetchRequest) === null || _a === void 0 ? void 0 : _a.cancel();\n        this.currentFetchRequest = request;\n        return new Promise((resolve) => {\n            this.resolveVisitPromise = () => {\n                this.resolveVisitPromise = () => { };\n                this.currentFetchRequest = null;\n                resolve();\n            };\n            request.perform();\n        });\n    }\n    navigateFrame(element, url, submitter) {\n        const frame = this.findFrameElement(element, submitter);\n        frame.delegate.proposeVisitIfNavigatedWithAction(frame, element, submitter);\n        this.withCurrentNavigationElement(element, () => {\n            frame.src = url;\n        });\n    }\n    proposeVisitIfNavigatedWithAction(frame, element, submitter) {\n        this.action = getVisitAction(submitter, element, frame);\n        if (this.action) {\n            const pageSnapshot = PageSnapshot.fromElement(frame).clone();\n            const { visitCachedSnapshot } = frame.delegate;\n            frame.delegate.fetchResponseLoaded = (fetchResponse) => {\n                if (frame.src) {\n                    const { statusCode, redirected } = fetchResponse;\n                    const responseHTML = frame.ownerDocument.documentElement.outerHTML;\n                    const response = { statusCode, redirected, responseHTML };\n                    const options = {\n                        response,\n                        visitCachedSnapshot,\n                        willRender: false,\n                        updateHistory: false,\n                        restorationIdentifier: this.restorationIdentifier,\n                        snapshot: pageSnapshot,\n                    };\n                    if (this.action)\n                        options.action = this.action;\n                    session.visit(frame.src, options);\n                }\n            };\n        }\n    }\n    changeHistory() {\n        if (this.action) {\n            const method = getHistoryMethodForAction(this.action);\n            session.history.update(method, expandURL(this.element.src || \"\"), this.restorationIdentifier);\n        }\n    }\n    async handleUnvisitableFrameResponse(fetchResponse) {\n        console.warn(`The response (${fetchResponse.statusCode}) from <turbo-frame id=\"${this.element.id}\"> is performing a full page visit due to turbo-visit-control.`);\n        await this.visitResponse(fetchResponse.response);\n    }\n    willHandleFrameMissingFromResponse(fetchResponse) {\n        this.element.setAttribute(\"complete\", \"\");\n        const response = fetchResponse.response;\n        const visit = async (url, options = {}) => {\n            if (url instanceof Response) {\n                this.visitResponse(url);\n            }\n            else {\n                session.visit(url, options);\n            }\n        };\n        const event = dispatch(\"turbo:frame-missing\", {\n            target: this.element,\n            detail: { response, visit },\n            cancelable: true,\n        });\n        return !event.defaultPrevented;\n    }\n    handleFrameMissingFromResponse(fetchResponse) {\n        this.view.missing();\n        this.throwFrameMissingError(fetchResponse);\n    }\n    throwFrameMissingError(fetchResponse) {\n        const message = `The response (${fetchResponse.statusCode}) did not contain the expected <turbo-frame id=\"${this.element.id}\"> and will be ignored. To perform a full page visit instead, set turbo-visit-control to reload.`;\n        throw new TurboFrameMissingError(message);\n    }\n    async visitResponse(response) {\n        const wrapped = new FetchResponse(response);\n        const responseHTML = await wrapped.responseHTML;\n        const { location, redirected, statusCode } = wrapped;\n        return session.visit(location, { response: { redirected, statusCode, responseHTML } });\n    }\n    findFrameElement(element, submitter) {\n        var _a;\n        const id = getAttribute(\"data-turbo-frame\", submitter, element) || this.element.getAttribute(\"target\");\n        return (_a = getFrameElementById(id)) !== null && _a !== void 0 ? _a : this.element;\n    }\n    async extractForeignFrameElement(container) {\n        let element;\n        const id = CSS.escape(this.id);\n        try {\n            element = activateElement(container.querySelector(`turbo-frame#${id}`), this.sourceURL);\n            if (element) {\n                return element;\n            }\n            element = activateElement(container.querySelector(`turbo-frame[src][recurse~=${id}]`), this.sourceURL);\n            if (element) {\n                await element.loaded;\n                return await this.extractForeignFrameElement(element);\n            }\n        }\n        catch (error) {\n            console.error(error);\n            return new FrameElement();\n        }\n        return null;\n    }\n    formActionIsVisitable(form, submitter) {\n        const action = getAction(form, submitter);\n        return locationIsVisitable(expandURL(action), this.rootLocation);\n    }\n    shouldInterceptNavigation(element, submitter) {\n        const id = getAttribute(\"data-turbo-frame\", submitter, element) || this.element.getAttribute(\"target\");\n        if (element instanceof HTMLFormElement && !this.formActionIsVisitable(element, submitter)) {\n            return false;\n        }\n        if (!this.enabled || id == \"_top\") {\n            return false;\n        }\n        if (id) {\n            const frameElement = getFrameElementById(id);\n            if (frameElement) {\n                return !frameElement.disabled;\n            }\n        }\n        if (!session.elementIsNavigatable(element)) {\n            return false;\n        }\n        if (submitter && !session.elementIsNavigatable(submitter)) {\n            return false;\n        }\n        return true;\n    }\n    get id() {\n        return this.element.id;\n    }\n    get enabled() {\n        return !this.element.disabled;\n    }\n    get sourceURL() {\n        if (this.element.src) {\n            return this.element.src;\n        }\n    }\n    set sourceURL(sourceURL) {\n        this.ignoringChangesToAttribute(\"src\", () => {\n            this.element.src = sourceURL !== null && sourceURL !== void 0 ? sourceURL : null;\n        });\n    }\n    get loadingStyle() {\n        return this.element.loading;\n    }\n    get isLoading() {\n        return this.formSubmission !== undefined || this.resolveVisitPromise() !== undefined;\n    }\n    get complete() {\n        return this.element.hasAttribute(\"complete\");\n    }\n    set complete(value) {\n        this.ignoringChangesToAttribute(\"complete\", () => {\n            if (value) {\n                this.element.setAttribute(\"complete\", \"\");\n            }\n            else {\n                this.element.removeAttribute(\"complete\");\n            }\n        });\n    }\n    get isActive() {\n        return this.element.isActive && this.connected;\n    }\n    get rootLocation() {\n        var _a;\n        const meta = this.element.ownerDocument.querySelector(`meta[name=\"turbo-root\"]`);\n        const root = (_a = meta === null || meta === void 0 ? void 0 : meta.content) !== null && _a !== void 0 ? _a : \"/\";\n        return expandURL(root);\n    }\n    isIgnoringChangesTo(attributeName) {\n        return this.ignoredAttributes.has(attributeName);\n    }\n    ignoringChangesToAttribute(attributeName, callback) {\n        this.ignoredAttributes.add(attributeName);\n        callback();\n        this.ignoredAttributes.delete(attributeName);\n    }\n    withCurrentNavigationElement(element, callback) {\n        this.currentNavigationElement = element;\n        callback();\n        delete this.currentNavigationElement;\n    }\n}\nfunction getFrameElementById(id) {\n    if (id != null) {\n        const element = document.getElementById(id);\n        if (element instanceof FrameElement) {\n            return element;\n        }\n    }\n}\nfunction activateElement(element, currentURL) {\n    if (element) {\n        const src = element.getAttribute(\"src\");\n        if (src != null && currentURL != null && urlsAreEqual(src, currentURL)) {\n            throw new Error(`Matching <turbo-frame id=\"${element.id}\"> element has a source URL which references itself`);\n        }\n        if (element.ownerDocument !== document) {\n            element = document.importNode(element, true);\n        }\n        if (element instanceof FrameElement) {\n            element.connectedCallback();\n            element.disconnectedCallback();\n            return element;\n        }\n    }\n}\n\nclass StreamElement extends HTMLElement {\n    static async renderElement(newElement) {\n        await newElement.performAction();\n    }\n    async connectedCallback() {\n        try {\n            await this.render();\n        }\n        catch (error) {\n            console.error(error);\n        }\n        finally {\n            this.disconnect();\n        }\n    }\n    async render() {\n        var _a;\n        return ((_a = this.renderPromise) !== null && _a !== void 0 ? _a : (this.renderPromise = (async () => {\n            const event = this.beforeRenderEvent;\n            if (this.dispatchEvent(event)) {\n                await nextAnimationFrame();\n                await event.detail.render(this);\n            }\n        })()));\n    }\n    disconnect() {\n        try {\n            this.remove();\n        }\n        catch (_a) { }\n    }\n    removeDuplicateTargetChildren() {\n        this.duplicateChildren.forEach((c) => c.remove());\n    }\n    get duplicateChildren() {\n        var _a;\n        const existingChildren = this.targetElements.flatMap((e) => [...e.children]).filter((c) => !!c.id);\n        const newChildrenIds = [...(((_a = this.templateContent) === null || _a === void 0 ? void 0 : _a.children) || [])].filter((c) => !!c.id).map((c) => c.id);\n        return existingChildren.filter((c) => newChildrenIds.includes(c.id));\n    }\n    get performAction() {\n        if (this.action) {\n            const actionFunction = StreamActions[this.action];\n            if (actionFunction) {\n                return actionFunction;\n            }\n            this.raise(\"unknown action\");\n        }\n        this.raise(\"action attribute is missing\");\n    }\n    get targetElements() {\n        if (this.target) {\n            return this.targetElementsById;\n        }\n        else if (this.targets) {\n            return this.targetElementsByQuery;\n        }\n        else {\n            this.raise(\"target or targets attribute is missing\");\n        }\n    }\n    get templateContent() {\n        return this.templateElement.content.cloneNode(true);\n    }\n    get templateElement() {\n        if (this.firstElementChild === null) {\n            const template = this.ownerDocument.createElement(\"template\");\n            this.appendChild(template);\n            return template;\n        }\n        else if (this.firstElementChild instanceof HTMLTemplateElement) {\n            return this.firstElementChild;\n        }\n        this.raise(\"first child element must be a <template> element\");\n    }\n    get action() {\n        return this.getAttribute(\"action\");\n    }\n    get target() {\n        return this.getAttribute(\"target\");\n    }\n    get targets() {\n        return this.getAttribute(\"targets\");\n    }\n    raise(message) {\n        throw new Error(`${this.description}: ${message}`);\n    }\n    get description() {\n        var _a, _b;\n        return (_b = ((_a = this.outerHTML.match(/<[^>]+>/)) !== null && _a !== void 0 ? _a : [])[0]) !== null && _b !== void 0 ? _b : \"<turbo-stream>\";\n    }\n    get beforeRenderEvent() {\n        return new CustomEvent(\"turbo:before-stream-render\", {\n            bubbles: true,\n            cancelable: true,\n            detail: { newStream: this, render: StreamElement.renderElement },\n        });\n    }\n    get targetElementsById() {\n        var _a;\n        const element = (_a = this.ownerDocument) === null || _a === void 0 ? void 0 : _a.getElementById(this.target);\n        if (element !== null) {\n            return [element];\n        }\n        else {\n            return [];\n        }\n    }\n    get targetElementsByQuery() {\n        var _a;\n        const elements = (_a = this.ownerDocument) === null || _a === void 0 ? void 0 : _a.querySelectorAll(this.targets);\n        if (elements.length !== 0) {\n            return Array.prototype.slice.call(elements);\n        }\n        else {\n            return [];\n        }\n    }\n}\n\nclass StreamSourceElement extends HTMLElement {\n    constructor() {\n        super(...arguments);\n        this.streamSource = null;\n    }\n    connectedCallback() {\n        this.streamSource = this.src.match(/^ws{1,2}:/) ? new WebSocket(this.src) : new EventSource(this.src);\n        connectStreamSource(this.streamSource);\n    }\n    disconnectedCallback() {\n        if (this.streamSource) {\n            disconnectStreamSource(this.streamSource);\n        }\n    }\n    get src() {\n        return this.getAttribute(\"src\") || \"\";\n    }\n}\n\nFrameElement.delegateConstructor = FrameController;\nif (customElements.get(\"turbo-frame\") === undefined) {\n    customElements.define(\"turbo-frame\", FrameElement);\n}\nif (customElements.get(\"turbo-stream\") === undefined) {\n    customElements.define(\"turbo-stream\", StreamElement);\n}\nif (customElements.get(\"turbo-stream-source\") === undefined) {\n    customElements.define(\"turbo-stream-source\", StreamSourceElement);\n}\n\n(() => {\n    let element = document.currentScript;\n    if (!element)\n        return;\n    if (element.hasAttribute(\"data-turbo-suppress-warning\"))\n        return;\n    element = element.parentElement;\n    while (element) {\n        if (element == document.body) {\n            return console.warn(unindent `\n        You are loading Turbo from a <script> element inside the <body> element. This is probably not what you meant to do!\n\n        Load your applications JavaScript bundle inside the <head> element instead. <script> elements in <body> are evaluated with each page change.\n\n        For more information, see: https://turbo.hotwired.dev/handbook/building#working-with-script-elements\n\n        \n        Suppress this warning by adding a \"data-turbo-suppress-warning\" attribute to: %s\n      `, element.outerHTML);\n        }\n        element = element.parentElement;\n    }\n})();\n\nwindow.Turbo = Turbo;\nstart();\n\nexport { FrameElement, FrameLoadingStyle, FrameRenderer, PageRenderer, PageSnapshot, StreamActions, StreamElement, StreamSourceElement, cache, clearCache, connectStreamSource, disconnectStreamSource, navigator$1 as navigator, registerAdapter, renderStreamMessage, session, setConfirmMethod, setFormMode, setProgressBarDelay, start, visit };\n","let consumer\n\nexport async function getConsumer() {\n  return consumer || setConsumer(createConsumer().then(setConsumer))\n}\n\nexport function setConsumer(newConsumer) {\n  return consumer = newConsumer\n}\n\nexport async function createConsumer() {\n  const { createConsumer } = await import(/* webpackChunkName: \"actioncable\" */ \"@rails/actioncable/src\")\n  return createConsumer()\n}\n\nexport async function subscribeTo(channel, mixin) {\n  const { subscriptions } = await getConsumer()\n  return subscriptions.create(channel, mixin)\n}\n","// Based on https://github.com/nathan7/snakeize\n//\n// This software is released under the MIT license:\n// Permission is hereby granted, free of charge, to any person obtaining a copy of\n// this software and associated documentation files (the \"Software\"), to deal in\n// the Software without restriction, including without limitation the rights to\n// use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of\n// the Software, and to permit persons to whom the Software is furnished to do so,\n// subject to the following conditions:\n\n// The above copyright notice and this permission notice shall be included in all\n// copies or substantial portions of the Software.\n\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS\n// FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR\n// COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER\n// IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN\n// CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\nexport default function walk (obj) {\n    if (!obj || typeof obj !== 'object') return obj;\n    if (obj instanceof Date || obj instanceof RegExp) return obj;\n    if (Array.isArray(obj)) return obj.map(walk);\n    return Object.keys(obj).reduce(function (acc, key) {\n        var camel = key[0].toLowerCase() + key.slice(1).replace(/([A-Z]+)/g, function (m, x) {\n            return '_' + x.toLowerCase();\n        });\n        acc[camel] = walk(obj[key]);\n        return acc;\n    }, {});\n};","import { connectStreamSource, disconnectStreamSource } from \"@hotwired/turbo\"\nimport { subscribeTo } from \"./cable\"\nimport snakeize from \"./snakeize\"\n\nclass TurboCableStreamSourceElement extends HTMLElement {\n  async connectedCallback() {\n    connectStreamSource(this)\n    this.subscription = await subscribeTo(this.channel, {\n      received: this.dispatchMessageEvent.bind(this),\n      connected: this.subscriptionConnected.bind(this),\n      disconnected: this.subscriptionDisconnected.bind(this)\n    })\n  }\n\n  disconnectedCallback() {\n    disconnectStreamSource(this)\n    if (this.subscription) this.subscription.unsubscribe()\n  }\n\n  dispatchMessageEvent(data) {\n    const event = new MessageEvent(\"message\", { data })\n    return this.dispatchEvent(event)\n  }\n\n  subscriptionConnected() {\n    this.setAttribute(\"connected\", \"\")\n  }\n\n  subscriptionDisconnected() {\n    this.removeAttribute(\"connected\")\n  }\n\n  get channel() {\n    const channel = this.getAttribute(\"channel\")\n    const signed_stream_name = this.getAttribute(\"signed-stream-name\")\n    return { channel, signed_stream_name, ...snakeize({ ...this.dataset }) }\n  }\n}\n\n\nif (customElements.get(\"turbo-cable-stream-source\") === undefined) {\n  customElements.define(\"turbo-cable-stream-source\", TurboCableStreamSourceElement)\n}\n","import \"./cable_stream_source_element\"\n\nimport * as Turbo from \"@hotwired/turbo\"\nexport { Turbo }\n\nimport * as cable from \"./cable\"\nexport { cable }\n\nimport { encodeMethodIntoRequestBody } from \"./fetch_requests\"\n\naddEventListener(\"turbo:before-fetch-request\", encodeMethodIntoRequestBody)\n","export function encodeMethodIntoRequestBody(event) {\n  if (event.target instanceof HTMLFormElement) {\n    const { target: form, detail: { fetchOptions } } = event\n\n    form.addEventListener(\"turbo:submit-start\", ({ detail: { formSubmission: { submitter } } }) => {\n      const body = isBodyInit(fetchOptions.body) ? fetchOptions.body : new URLSearchParams()\n      const method = determineFetchMethod(submitter, body, form)\n\n      if (!/get/i.test(method)) {\n        if (/post/i.test(method)) {\n          body.delete(\"_method\")\n        } else {\n          body.set(\"_method\", method)\n        }\n\n        fetchOptions.method = \"post\"\n      }\n    }, { once: true })\n  }\n}\n\nfunction determineFetchMethod(submitter, body, form) {\n  const formMethod = determineFormMethod(submitter)\n  const overrideMethod = body.get(\"_method\")\n  const method = form.getAttribute(\"method\") || \"get\"\n\n  if (typeof formMethod == \"string\") {\n    return formMethod\n  } else if (typeof overrideMethod == \"string\") {\n    return overrideMethod\n  } else {\n    return method\n  }\n}\n\nfunction determineFormMethod(submitter) {\n  if (submitter instanceof HTMLButtonElement || submitter instanceof HTMLInputElement) {\n    if (submitter.hasAttribute(\"formmethod\")) {\n      return submitter.formMethod\n    } else {\n      return null\n    }\n  } else {\n    return null\n  }\n}\n\nfunction isBodyInit(body) {\n  return body instanceof FormData || body instanceof URLSearchParams\n}\n","/*\nStimulus 3.2.1\nCopyright  2023 Basecamp, LLC\n */\nclass EventListener {\n    constructor(eventTarget, eventName, eventOptions) {\n        this.eventTarget = eventTarget;\n        this.eventName = eventName;\n        this.eventOptions = eventOptions;\n        this.unorderedBindings = new Set();\n    }\n    connect() {\n        this.eventTarget.addEventListener(this.eventName, this, this.eventOptions);\n    }\n    disconnect() {\n        this.eventTarget.removeEventListener(this.eventName, this, this.eventOptions);\n    }\n    bindingConnected(binding) {\n        this.unorderedBindings.add(binding);\n    }\n    bindingDisconnected(binding) {\n        this.unorderedBindings.delete(binding);\n    }\n    handleEvent(event) {\n        const extendedEvent = extendEvent(event);\n        for (const binding of this.bindings) {\n            if (extendedEvent.immediatePropagationStopped) {\n                break;\n            }\n            else {\n                binding.handleEvent(extendedEvent);\n            }\n        }\n    }\n    hasBindings() {\n        return this.unorderedBindings.size > 0;\n    }\n    get bindings() {\n        return Array.from(this.unorderedBindings).sort((left, right) => {\n            const leftIndex = left.index, rightIndex = right.index;\n            return leftIndex < rightIndex ? -1 : leftIndex > rightIndex ? 1 : 0;\n        });\n    }\n}\nfunction extendEvent(event) {\n    if (\"immediatePropagationStopped\" in event) {\n        return event;\n    }\n    else {\n        const { stopImmediatePropagation } = event;\n        return Object.assign(event, {\n            immediatePropagationStopped: false,\n            stopImmediatePropagation() {\n                this.immediatePropagationStopped = true;\n                stopImmediatePropagation.call(this);\n            },\n        });\n    }\n}\n\nclass Dispatcher {\n    constructor(application) {\n        this.application = application;\n        this.eventListenerMaps = new Map();\n        this.started = false;\n    }\n    start() {\n        if (!this.started) {\n            this.started = true;\n            this.eventListeners.forEach((eventListener) => eventListener.connect());\n        }\n    }\n    stop() {\n        if (this.started) {\n            this.started = false;\n            this.eventListeners.forEach((eventListener) => eventListener.disconnect());\n        }\n    }\n    get eventListeners() {\n        return Array.from(this.eventListenerMaps.values()).reduce((listeners, map) => listeners.concat(Array.from(map.values())), []);\n    }\n    bindingConnected(binding) {\n        this.fetchEventListenerForBinding(binding).bindingConnected(binding);\n    }\n    bindingDisconnected(binding, clearEventListeners = false) {\n        this.fetchEventListenerForBinding(binding).bindingDisconnected(binding);\n        if (clearEventListeners)\n            this.clearEventListenersForBinding(binding);\n    }\n    handleError(error, message, detail = {}) {\n        this.application.handleError(error, `Error ${message}`, detail);\n    }\n    clearEventListenersForBinding(binding) {\n        const eventListener = this.fetchEventListenerForBinding(binding);\n        if (!eventListener.hasBindings()) {\n            eventListener.disconnect();\n            this.removeMappedEventListenerFor(binding);\n        }\n    }\n    removeMappedEventListenerFor(binding) {\n        const { eventTarget, eventName, eventOptions } = binding;\n        const eventListenerMap = this.fetchEventListenerMapForEventTarget(eventTarget);\n        const cacheKey = this.cacheKey(eventName, eventOptions);\n        eventListenerMap.delete(cacheKey);\n        if (eventListenerMap.size == 0)\n            this.eventListenerMaps.delete(eventTarget);\n    }\n    fetchEventListenerForBinding(binding) {\n        const { eventTarget, eventName, eventOptions } = binding;\n        return this.fetchEventListener(eventTarget, eventName, eventOptions);\n    }\n    fetchEventListener(eventTarget, eventName, eventOptions) {\n        const eventListenerMap = this.fetchEventListenerMapForEventTarget(eventTarget);\n        const cacheKey = this.cacheKey(eventName, eventOptions);\n        let eventListener = eventListenerMap.get(cacheKey);\n        if (!eventListener) {\n            eventListener = this.createEventListener(eventTarget, eventName, eventOptions);\n            eventListenerMap.set(cacheKey, eventListener);\n        }\n        return eventListener;\n    }\n    createEventListener(eventTarget, eventName, eventOptions) {\n        const eventListener = new EventListener(eventTarget, eventName, eventOptions);\n        if (this.started) {\n            eventListener.connect();\n        }\n        return eventListener;\n    }\n    fetchEventListenerMapForEventTarget(eventTarget) {\n        let eventListenerMap = this.eventListenerMaps.get(eventTarget);\n        if (!eventListenerMap) {\n            eventListenerMap = new Map();\n            this.eventListenerMaps.set(eventTarget, eventListenerMap);\n        }\n        return eventListenerMap;\n    }\n    cacheKey(eventName, eventOptions) {\n        const parts = [eventName];\n        Object.keys(eventOptions)\n            .sort()\n            .forEach((key) => {\n            parts.push(`${eventOptions[key] ? \"\" : \"!\"}${key}`);\n        });\n        return parts.join(\":\");\n    }\n}\n\nconst defaultActionDescriptorFilters = {\n    stop({ event, value }) {\n        if (value)\n            event.stopPropagation();\n        return true;\n    },\n    prevent({ event, value }) {\n        if (value)\n            event.preventDefault();\n        return true;\n    },\n    self({ event, value, element }) {\n        if (value) {\n            return element === event.target;\n        }\n        else {\n            return true;\n        }\n    },\n};\nconst descriptorPattern = /^(?:(?:([^.]+?)\\+)?(.+?)(?:\\.(.+?))?(?:@(window|document))?->)?(.+?)(?:#([^:]+?))(?::(.+))?$/;\nfunction parseActionDescriptorString(descriptorString) {\n    const source = descriptorString.trim();\n    const matches = source.match(descriptorPattern) || [];\n    let eventName = matches[2];\n    let keyFilter = matches[3];\n    if (keyFilter && ![\"keydown\", \"keyup\", \"keypress\"].includes(eventName)) {\n        eventName += `.${keyFilter}`;\n        keyFilter = \"\";\n    }\n    return {\n        eventTarget: parseEventTarget(matches[4]),\n        eventName,\n        eventOptions: matches[7] ? parseEventOptions(matches[7]) : {},\n        identifier: matches[5],\n        methodName: matches[6],\n        keyFilter: matches[1] || keyFilter,\n    };\n}\nfunction parseEventTarget(eventTargetName) {\n    if (eventTargetName == \"window\") {\n        return window;\n    }\n    else if (eventTargetName == \"document\") {\n        return document;\n    }\n}\nfunction parseEventOptions(eventOptions) {\n    return eventOptions\n        .split(\":\")\n        .reduce((options, token) => Object.assign(options, { [token.replace(/^!/, \"\")]: !/^!/.test(token) }), {});\n}\nfunction stringifyEventTarget(eventTarget) {\n    if (eventTarget == window) {\n        return \"window\";\n    }\n    else if (eventTarget == document) {\n        return \"document\";\n    }\n}\n\nfunction camelize(value) {\n    return value.replace(/(?:[_-])([a-z0-9])/g, (_, char) => char.toUpperCase());\n}\nfunction namespaceCamelize(value) {\n    return camelize(value.replace(/--/g, \"-\").replace(/__/g, \"_\"));\n}\nfunction capitalize(value) {\n    return value.charAt(0).toUpperCase() + value.slice(1);\n}\nfunction dasherize(value) {\n    return value.replace(/([A-Z])/g, (_, char) => `-${char.toLowerCase()}`);\n}\nfunction tokenize(value) {\n    return value.match(/[^\\s]+/g) || [];\n}\n\nfunction isSomething(object) {\n    return object !== null && object !== undefined;\n}\nfunction hasProperty(object, property) {\n    return Object.prototype.hasOwnProperty.call(object, property);\n}\n\nconst allModifiers = [\"meta\", \"ctrl\", \"alt\", \"shift\"];\nclass Action {\n    constructor(element, index, descriptor, schema) {\n        this.element = element;\n        this.index = index;\n        this.eventTarget = descriptor.eventTarget || element;\n        this.eventName = descriptor.eventName || getDefaultEventNameForElement(element) || error(\"missing event name\");\n        this.eventOptions = descriptor.eventOptions || {};\n        this.identifier = descriptor.identifier || error(\"missing identifier\");\n        this.methodName = descriptor.methodName || error(\"missing method name\");\n        this.keyFilter = descriptor.keyFilter || \"\";\n        this.schema = schema;\n    }\n    static forToken(token, schema) {\n        return new this(token.element, token.index, parseActionDescriptorString(token.content), schema);\n    }\n    toString() {\n        const eventFilter = this.keyFilter ? `.${this.keyFilter}` : \"\";\n        const eventTarget = this.eventTargetName ? `@${this.eventTargetName}` : \"\";\n        return `${this.eventName}${eventFilter}${eventTarget}->${this.identifier}#${this.methodName}`;\n    }\n    shouldIgnoreKeyboardEvent(event) {\n        if (!this.keyFilter) {\n            return false;\n        }\n        const filters = this.keyFilter.split(\"+\");\n        if (this.keyFilterDissatisfied(event, filters)) {\n            return true;\n        }\n        const standardFilter = filters.filter((key) => !allModifiers.includes(key))[0];\n        if (!standardFilter) {\n            return false;\n        }\n        if (!hasProperty(this.keyMappings, standardFilter)) {\n            error(`contains unknown key filter: ${this.keyFilter}`);\n        }\n        return this.keyMappings[standardFilter].toLowerCase() !== event.key.toLowerCase();\n    }\n    shouldIgnoreMouseEvent(event) {\n        if (!this.keyFilter) {\n            return false;\n        }\n        const filters = [this.keyFilter];\n        if (this.keyFilterDissatisfied(event, filters)) {\n            return true;\n        }\n        return false;\n    }\n    get params() {\n        const params = {};\n        const pattern = new RegExp(`^data-${this.identifier}-(.+)-param$`, \"i\");\n        for (const { name, value } of Array.from(this.element.attributes)) {\n            const match = name.match(pattern);\n            const key = match && match[1];\n            if (key) {\n                params[camelize(key)] = typecast(value);\n            }\n        }\n        return params;\n    }\n    get eventTargetName() {\n        return stringifyEventTarget(this.eventTarget);\n    }\n    get keyMappings() {\n        return this.schema.keyMappings;\n    }\n    keyFilterDissatisfied(event, filters) {\n        const [meta, ctrl, alt, shift] = allModifiers.map((modifier) => filters.includes(modifier));\n        return event.metaKey !== meta || event.ctrlKey !== ctrl || event.altKey !== alt || event.shiftKey !== shift;\n    }\n}\nconst defaultEventNames = {\n    a: () => \"click\",\n    button: () => \"click\",\n    form: () => \"submit\",\n    details: () => \"toggle\",\n    input: (e) => (e.getAttribute(\"type\") == \"submit\" ? \"click\" : \"input\"),\n    select: () => \"change\",\n    textarea: () => \"input\",\n};\nfunction getDefaultEventNameForElement(element) {\n    const tagName = element.tagName.toLowerCase();\n    if (tagName in defaultEventNames) {\n        return defaultEventNames[tagName](element);\n    }\n}\nfunction error(message) {\n    throw new Error(message);\n}\nfunction typecast(value) {\n    try {\n        return JSON.parse(value);\n    }\n    catch (o_O) {\n        return value;\n    }\n}\n\nclass Binding {\n    constructor(context, action) {\n        this.context = context;\n        this.action = action;\n    }\n    get index() {\n        return this.action.index;\n    }\n    get eventTarget() {\n        return this.action.eventTarget;\n    }\n    get eventOptions() {\n        return this.action.eventOptions;\n    }\n    get identifier() {\n        return this.context.identifier;\n    }\n    handleEvent(event) {\n        const actionEvent = this.prepareActionEvent(event);\n        if (this.willBeInvokedByEvent(event) && this.applyEventModifiers(actionEvent)) {\n            this.invokeWithEvent(actionEvent);\n        }\n    }\n    get eventName() {\n        return this.action.eventName;\n    }\n    get method() {\n        const method = this.controller[this.methodName];\n        if (typeof method == \"function\") {\n            return method;\n        }\n        throw new Error(`Action \"${this.action}\" references undefined method \"${this.methodName}\"`);\n    }\n    applyEventModifiers(event) {\n        const { element } = this.action;\n        const { actionDescriptorFilters } = this.context.application;\n        const { controller } = this.context;\n        let passes = true;\n        for (const [name, value] of Object.entries(this.eventOptions)) {\n            if (name in actionDescriptorFilters) {\n                const filter = actionDescriptorFilters[name];\n                passes = passes && filter({ name, value, event, element, controller });\n            }\n            else {\n                continue;\n            }\n        }\n        return passes;\n    }\n    prepareActionEvent(event) {\n        return Object.assign(event, { params: this.action.params });\n    }\n    invokeWithEvent(event) {\n        const { target, currentTarget } = event;\n        try {\n            this.method.call(this.controller, event);\n            this.context.logDebugActivity(this.methodName, { event, target, currentTarget, action: this.methodName });\n        }\n        catch (error) {\n            const { identifier, controller, element, index } = this;\n            const detail = { identifier, controller, element, index, event };\n            this.context.handleError(error, `invoking action \"${this.action}\"`, detail);\n        }\n    }\n    willBeInvokedByEvent(event) {\n        const eventTarget = event.target;\n        if (event instanceof KeyboardEvent && this.action.shouldIgnoreKeyboardEvent(event)) {\n            return false;\n        }\n        if (event instanceof MouseEvent && this.action.shouldIgnoreMouseEvent(event)) {\n            return false;\n        }\n        if (this.element === eventTarget) {\n            return true;\n        }\n        else if (eventTarget instanceof Element && this.element.contains(eventTarget)) {\n            return this.scope.containsElement(eventTarget);\n        }\n        else {\n            return this.scope.containsElement(this.action.element);\n        }\n    }\n    get controller() {\n        return this.context.controller;\n    }\n    get methodName() {\n        return this.action.methodName;\n    }\n    get element() {\n        return this.scope.element;\n    }\n    get scope() {\n        return this.context.scope;\n    }\n}\n\nclass ElementObserver {\n    constructor(element, delegate) {\n        this.mutationObserverInit = { attributes: true, childList: true, subtree: true };\n        this.element = element;\n        this.started = false;\n        this.delegate = delegate;\n        this.elements = new Set();\n        this.mutationObserver = new MutationObserver((mutations) => this.processMutations(mutations));\n    }\n    start() {\n        if (!this.started) {\n            this.started = true;\n            this.mutationObserver.observe(this.element, this.mutationObserverInit);\n            this.refresh();\n        }\n    }\n    pause(callback) {\n        if (this.started) {\n            this.mutationObserver.disconnect();\n            this.started = false;\n        }\n        callback();\n        if (!this.started) {\n            this.mutationObserver.observe(this.element, this.mutationObserverInit);\n            this.started = true;\n        }\n    }\n    stop() {\n        if (this.started) {\n            this.mutationObserver.takeRecords();\n            this.mutationObserver.disconnect();\n            this.started = false;\n        }\n    }\n    refresh() {\n        if (this.started) {\n            const matches = new Set(this.matchElementsInTree());\n            for (const element of Array.from(this.elements)) {\n                if (!matches.has(element)) {\n                    this.removeElement(element);\n                }\n            }\n            for (const element of Array.from(matches)) {\n                this.addElement(element);\n            }\n        }\n    }\n    processMutations(mutations) {\n        if (this.started) {\n            for (const mutation of mutations) {\n                this.processMutation(mutation);\n            }\n        }\n    }\n    processMutation(mutation) {\n        if (mutation.type == \"attributes\") {\n            this.processAttributeChange(mutation.target, mutation.attributeName);\n        }\n        else if (mutation.type == \"childList\") {\n            this.processRemovedNodes(mutation.removedNodes);\n            this.processAddedNodes(mutation.addedNodes);\n        }\n    }\n    processAttributeChange(element, attributeName) {\n        if (this.elements.has(element)) {\n            if (this.delegate.elementAttributeChanged && this.matchElement(element)) {\n                this.delegate.elementAttributeChanged(element, attributeName);\n            }\n            else {\n                this.removeElement(element);\n            }\n        }\n        else if (this.matchElement(element)) {\n            this.addElement(element);\n        }\n    }\n    processRemovedNodes(nodes) {\n        for (const node of Array.from(nodes)) {\n            const element = this.elementFromNode(node);\n            if (element) {\n                this.processTree(element, this.removeElement);\n            }\n        }\n    }\n    processAddedNodes(nodes) {\n        for (const node of Array.from(nodes)) {\n            const element = this.elementFromNode(node);\n            if (element && this.elementIsActive(element)) {\n                this.processTree(element, this.addElement);\n            }\n        }\n    }\n    matchElement(element) {\n        return this.delegate.matchElement(element);\n    }\n    matchElementsInTree(tree = this.element) {\n        return this.delegate.matchElementsInTree(tree);\n    }\n    processTree(tree, processor) {\n        for (const element of this.matchElementsInTree(tree)) {\n            processor.call(this, element);\n        }\n    }\n    elementFromNode(node) {\n        if (node.nodeType == Node.ELEMENT_NODE) {\n            return node;\n        }\n    }\n    elementIsActive(element) {\n        if (element.isConnected != this.element.isConnected) {\n            return false;\n        }\n        else {\n            return this.element.contains(element);\n        }\n    }\n    addElement(element) {\n        if (!this.elements.has(element)) {\n            if (this.elementIsActive(element)) {\n                this.elements.add(element);\n                if (this.delegate.elementMatched) {\n                    this.delegate.elementMatched(element);\n                }\n            }\n        }\n    }\n    removeElement(element) {\n        if (this.elements.has(element)) {\n            this.elements.delete(element);\n            if (this.delegate.elementUnmatched) {\n                this.delegate.elementUnmatched(element);\n            }\n        }\n    }\n}\n\nclass AttributeObserver {\n    constructor(element, attributeName, delegate) {\n        this.attributeName = attributeName;\n        this.delegate = delegate;\n        this.elementObserver = new ElementObserver(element, this);\n    }\n    get element() {\n        return this.elementObserver.element;\n    }\n    get selector() {\n        return `[${this.attributeName}]`;\n    }\n    start() {\n        this.elementObserver.start();\n    }\n    pause(callback) {\n        this.elementObserver.pause(callback);\n    }\n    stop() {\n        this.elementObserver.stop();\n    }\n    refresh() {\n        this.elementObserver.refresh();\n    }\n    get started() {\n        return this.elementObserver.started;\n    }\n    matchElement(element) {\n        return element.hasAttribute(this.attributeName);\n    }\n    matchElementsInTree(tree) {\n        const match = this.matchElement(tree) ? [tree] : [];\n        const matches = Array.from(tree.querySelectorAll(this.selector));\n        return match.concat(matches);\n    }\n    elementMatched(element) {\n        if (this.delegate.elementMatchedAttribute) {\n            this.delegate.elementMatchedAttribute(element, this.attributeName);\n        }\n    }\n    elementUnmatched(element) {\n        if (this.delegate.elementUnmatchedAttribute) {\n            this.delegate.elementUnmatchedAttribute(element, this.attributeName);\n        }\n    }\n    elementAttributeChanged(element, attributeName) {\n        if (this.delegate.elementAttributeValueChanged && this.attributeName == attributeName) {\n            this.delegate.elementAttributeValueChanged(element, attributeName);\n        }\n    }\n}\n\nfunction add(map, key, value) {\n    fetch(map, key).add(value);\n}\nfunction del(map, key, value) {\n    fetch(map, key).delete(value);\n    prune(map, key);\n}\nfunction fetch(map, key) {\n    let values = map.get(key);\n    if (!values) {\n        values = new Set();\n        map.set(key, values);\n    }\n    return values;\n}\nfunction prune(map, key) {\n    const values = map.get(key);\n    if (values != null && values.size == 0) {\n        map.delete(key);\n    }\n}\n\nclass Multimap {\n    constructor() {\n        this.valuesByKey = new Map();\n    }\n    get keys() {\n        return Array.from(this.valuesByKey.keys());\n    }\n    get values() {\n        const sets = Array.from(this.valuesByKey.values());\n        return sets.reduce((values, set) => values.concat(Array.from(set)), []);\n    }\n    get size() {\n        const sets = Array.from(this.valuesByKey.values());\n        return sets.reduce((size, set) => size + set.size, 0);\n    }\n    add(key, value) {\n        add(this.valuesByKey, key, value);\n    }\n    delete(key, value) {\n        del(this.valuesByKey, key, value);\n    }\n    has(key, value) {\n        const values = this.valuesByKey.get(key);\n        return values != null && values.has(value);\n    }\n    hasKey(key) {\n        return this.valuesByKey.has(key);\n    }\n    hasValue(value) {\n        const sets = Array.from(this.valuesByKey.values());\n        return sets.some((set) => set.has(value));\n    }\n    getValuesForKey(key) {\n        const values = this.valuesByKey.get(key);\n        return values ? Array.from(values) : [];\n    }\n    getKeysForValue(value) {\n        return Array.from(this.valuesByKey)\n            .filter(([_key, values]) => values.has(value))\n            .map(([key, _values]) => key);\n    }\n}\n\nclass IndexedMultimap extends Multimap {\n    constructor() {\n        super();\n        this.keysByValue = new Map();\n    }\n    get values() {\n        return Array.from(this.keysByValue.keys());\n    }\n    add(key, value) {\n        super.add(key, value);\n        add(this.keysByValue, value, key);\n    }\n    delete(key, value) {\n        super.delete(key, value);\n        del(this.keysByValue, value, key);\n    }\n    hasValue(value) {\n        return this.keysByValue.has(value);\n    }\n    getKeysForValue(value) {\n        const set = this.keysByValue.get(value);\n        return set ? Array.from(set) : [];\n    }\n}\n\nclass SelectorObserver {\n    constructor(element, selector, delegate, details) {\n        this._selector = selector;\n        this.details = details;\n        this.elementObserver = new ElementObserver(element, this);\n        this.delegate = delegate;\n        this.matchesByElement = new Multimap();\n    }\n    get started() {\n        return this.elementObserver.started;\n    }\n    get selector() {\n        return this._selector;\n    }\n    set selector(selector) {\n        this._selector = selector;\n        this.refresh();\n    }\n    start() {\n        this.elementObserver.start();\n    }\n    pause(callback) {\n        this.elementObserver.pause(callback);\n    }\n    stop() {\n        this.elementObserver.stop();\n    }\n    refresh() {\n        this.elementObserver.refresh();\n    }\n    get element() {\n        return this.elementObserver.element;\n    }\n    matchElement(element) {\n        const { selector } = this;\n        if (selector) {\n            const matches = element.matches(selector);\n            if (this.delegate.selectorMatchElement) {\n                return matches && this.delegate.selectorMatchElement(element, this.details);\n            }\n            return matches;\n        }\n        else {\n            return false;\n        }\n    }\n    matchElementsInTree(tree) {\n        const { selector } = this;\n        if (selector) {\n            const match = this.matchElement(tree) ? [tree] : [];\n            const matches = Array.from(tree.querySelectorAll(selector)).filter((match) => this.matchElement(match));\n            return match.concat(matches);\n        }\n        else {\n            return [];\n        }\n    }\n    elementMatched(element) {\n        const { selector } = this;\n        if (selector) {\n            this.selectorMatched(element, selector);\n        }\n    }\n    elementUnmatched(element) {\n        const selectors = this.matchesByElement.getKeysForValue(element);\n        for (const selector of selectors) {\n            this.selectorUnmatched(element, selector);\n        }\n    }\n    elementAttributeChanged(element, _attributeName) {\n        const { selector } = this;\n        if (selector) {\n            const matches = this.matchElement(element);\n            const matchedBefore = this.matchesByElement.has(selector, element);\n            if (matches && !matchedBefore) {\n                this.selectorMatched(element, selector);\n            }\n            else if (!matches && matchedBefore) {\n                this.selectorUnmatched(element, selector);\n            }\n        }\n    }\n    selectorMatched(element, selector) {\n        this.delegate.selectorMatched(element, selector, this.details);\n        this.matchesByElement.add(selector, element);\n    }\n    selectorUnmatched(element, selector) {\n        this.delegate.selectorUnmatched(element, selector, this.details);\n        this.matchesByElement.delete(selector, element);\n    }\n}\n\nclass StringMapObserver {\n    constructor(element, delegate) {\n        this.element = element;\n        this.delegate = delegate;\n        this.started = false;\n        this.stringMap = new Map();\n        this.mutationObserver = new MutationObserver((mutations) => this.processMutations(mutations));\n    }\n    start() {\n        if (!this.started) {\n            this.started = true;\n            this.mutationObserver.observe(this.element, { attributes: true, attributeOldValue: true });\n            this.refresh();\n        }\n    }\n    stop() {\n        if (this.started) {\n            this.mutationObserver.takeRecords();\n            this.mutationObserver.disconnect();\n            this.started = false;\n        }\n    }\n    refresh() {\n        if (this.started) {\n            for (const attributeName of this.knownAttributeNames) {\n                this.refreshAttribute(attributeName, null);\n            }\n        }\n    }\n    processMutations(mutations) {\n        if (this.started) {\n            for (const mutation of mutations) {\n                this.processMutation(mutation);\n            }\n        }\n    }\n    processMutation(mutation) {\n        const attributeName = mutation.attributeName;\n        if (attributeName) {\n            this.refreshAttribute(attributeName, mutation.oldValue);\n        }\n    }\n    refreshAttribute(attributeName, oldValue) {\n        const key = this.delegate.getStringMapKeyForAttribute(attributeName);\n        if (key != null) {\n            if (!this.stringMap.has(attributeName)) {\n                this.stringMapKeyAdded(key, attributeName);\n            }\n            const value = this.element.getAttribute(attributeName);\n            if (this.stringMap.get(attributeName) != value) {\n                this.stringMapValueChanged(value, key, oldValue);\n            }\n            if (value == null) {\n                const oldValue = this.stringMap.get(attributeName);\n                this.stringMap.delete(attributeName);\n                if (oldValue)\n                    this.stringMapKeyRemoved(key, attributeName, oldValue);\n            }\n            else {\n                this.stringMap.set(attributeName, value);\n            }\n        }\n    }\n    stringMapKeyAdded(key, attributeName) {\n        if (this.delegate.stringMapKeyAdded) {\n            this.delegate.stringMapKeyAdded(key, attributeName);\n        }\n    }\n    stringMapValueChanged(value, key, oldValue) {\n        if (this.delegate.stringMapValueChanged) {\n            this.delegate.stringMapValueChanged(value, key, oldValue);\n        }\n    }\n    stringMapKeyRemoved(key, attributeName, oldValue) {\n        if (this.delegate.stringMapKeyRemoved) {\n            this.delegate.stringMapKeyRemoved(key, attributeName, oldValue);\n        }\n    }\n    get knownAttributeNames() {\n        return Array.from(new Set(this.currentAttributeNames.concat(this.recordedAttributeNames)));\n    }\n    get currentAttributeNames() {\n        return Array.from(this.element.attributes).map((attribute) => attribute.name);\n    }\n    get recordedAttributeNames() {\n        return Array.from(this.stringMap.keys());\n    }\n}\n\nclass TokenListObserver {\n    constructor(element, attributeName, delegate) {\n        this.attributeObserver = new AttributeObserver(element, attributeName, this);\n        this.delegate = delegate;\n        this.tokensByElement = new Multimap();\n    }\n    get started() {\n        return this.attributeObserver.started;\n    }\n    start() {\n        this.attributeObserver.start();\n    }\n    pause(callback) {\n        this.attributeObserver.pause(callback);\n    }\n    stop() {\n        this.attributeObserver.stop();\n    }\n    refresh() {\n        this.attributeObserver.refresh();\n    }\n    get element() {\n        return this.attributeObserver.element;\n    }\n    get attributeName() {\n        return this.attributeObserver.attributeName;\n    }\n    elementMatchedAttribute(element) {\n        this.tokensMatched(this.readTokensForElement(element));\n    }\n    elementAttributeValueChanged(element) {\n        const [unmatchedTokens, matchedTokens] = this.refreshTokensForElement(element);\n        this.tokensUnmatched(unmatchedTokens);\n        this.tokensMatched(matchedTokens);\n    }\n    elementUnmatchedAttribute(element) {\n        this.tokensUnmatched(this.tokensByElement.getValuesForKey(element));\n    }\n    tokensMatched(tokens) {\n        tokens.forEach((token) => this.tokenMatched(token));\n    }\n    tokensUnmatched(tokens) {\n        tokens.forEach((token) => this.tokenUnmatched(token));\n    }\n    tokenMatched(token) {\n        this.delegate.tokenMatched(token);\n        this.tokensByElement.add(token.element, token);\n    }\n    tokenUnmatched(token) {\n        this.delegate.tokenUnmatched(token);\n        this.tokensByElement.delete(token.element, token);\n    }\n    refreshTokensForElement(element) {\n        const previousTokens = this.tokensByElement.getValuesForKey(element);\n        const currentTokens = this.readTokensForElement(element);\n        const firstDifferingIndex = zip(previousTokens, currentTokens).findIndex(([previousToken, currentToken]) => !tokensAreEqual(previousToken, currentToken));\n        if (firstDifferingIndex == -1) {\n            return [[], []];\n        }\n        else {\n            return [previousTokens.slice(firstDifferingIndex), currentTokens.slice(firstDifferingIndex)];\n        }\n    }\n    readTokensForElement(element) {\n        const attributeName = this.attributeName;\n        const tokenString = element.getAttribute(attributeName) || \"\";\n        return parseTokenString(tokenString, element, attributeName);\n    }\n}\nfunction parseTokenString(tokenString, element, attributeName) {\n    return tokenString\n        .trim()\n        .split(/\\s+/)\n        .filter((content) => content.length)\n        .map((content, index) => ({ element, attributeName, content, index }));\n}\nfunction zip(left, right) {\n    const length = Math.max(left.length, right.length);\n    return Array.from({ length }, (_, index) => [left[index], right[index]]);\n}\nfunction tokensAreEqual(left, right) {\n    return left && right && left.index == right.index && left.content == right.content;\n}\n\nclass ValueListObserver {\n    constructor(element, attributeName, delegate) {\n        this.tokenListObserver = new TokenListObserver(element, attributeName, this);\n        this.delegate = delegate;\n        this.parseResultsByToken = new WeakMap();\n        this.valuesByTokenByElement = new WeakMap();\n    }\n    get started() {\n        return this.tokenListObserver.started;\n    }\n    start() {\n        this.tokenListObserver.start();\n    }\n    stop() {\n        this.tokenListObserver.stop();\n    }\n    refresh() {\n        this.tokenListObserver.refresh();\n    }\n    get element() {\n        return this.tokenListObserver.element;\n    }\n    get attributeName() {\n        return this.tokenListObserver.attributeName;\n    }\n    tokenMatched(token) {\n        const { element } = token;\n        const { value } = this.fetchParseResultForToken(token);\n        if (value) {\n            this.fetchValuesByTokenForElement(element).set(token, value);\n            this.delegate.elementMatchedValue(element, value);\n        }\n    }\n    tokenUnmatched(token) {\n        const { element } = token;\n        const { value } = this.fetchParseResultForToken(token);\n        if (value) {\n            this.fetchValuesByTokenForElement(element).delete(token);\n            this.delegate.elementUnmatchedValue(element, value);\n        }\n    }\n    fetchParseResultForToken(token) {\n        let parseResult = this.parseResultsByToken.get(token);\n        if (!parseResult) {\n            parseResult = this.parseToken(token);\n            this.parseResultsByToken.set(token, parseResult);\n        }\n        return parseResult;\n    }\n    fetchValuesByTokenForElement(element) {\n        let valuesByToken = this.valuesByTokenByElement.get(element);\n        if (!valuesByToken) {\n            valuesByToken = new Map();\n            this.valuesByTokenByElement.set(element, valuesByToken);\n        }\n        return valuesByToken;\n    }\n    parseToken(token) {\n        try {\n            const value = this.delegate.parseValueForToken(token);\n            return { value };\n        }\n        catch (error) {\n            return { error };\n        }\n    }\n}\n\nclass BindingObserver {\n    constructor(context, delegate) {\n        this.context = context;\n        this.delegate = delegate;\n        this.bindingsByAction = new Map();\n    }\n    start() {\n        if (!this.valueListObserver) {\n            this.valueListObserver = new ValueListObserver(this.element, this.actionAttribute, this);\n            this.valueListObserver.start();\n        }\n    }\n    stop() {\n        if (this.valueListObserver) {\n            this.valueListObserver.stop();\n            delete this.valueListObserver;\n            this.disconnectAllActions();\n        }\n    }\n    get element() {\n        return this.context.element;\n    }\n    get identifier() {\n        return this.context.identifier;\n    }\n    get actionAttribute() {\n        return this.schema.actionAttribute;\n    }\n    get schema() {\n        return this.context.schema;\n    }\n    get bindings() {\n        return Array.from(this.bindingsByAction.values());\n    }\n    connectAction(action) {\n        const binding = new Binding(this.context, action);\n        this.bindingsByAction.set(action, binding);\n        this.delegate.bindingConnected(binding);\n    }\n    disconnectAction(action) {\n        const binding = this.bindingsByAction.get(action);\n        if (binding) {\n            this.bindingsByAction.delete(action);\n            this.delegate.bindingDisconnected(binding);\n        }\n    }\n    disconnectAllActions() {\n        this.bindings.forEach((binding) => this.delegate.bindingDisconnected(binding, true));\n        this.bindingsByAction.clear();\n    }\n    parseValueForToken(token) {\n        const action = Action.forToken(token, this.schema);\n        if (action.identifier == this.identifier) {\n            return action;\n        }\n    }\n    elementMatchedValue(element, action) {\n        this.connectAction(action);\n    }\n    elementUnmatchedValue(element, action) {\n        this.disconnectAction(action);\n    }\n}\n\nclass ValueObserver {\n    constructor(context, receiver) {\n        this.context = context;\n        this.receiver = receiver;\n        this.stringMapObserver = new StringMapObserver(this.element, this);\n        this.valueDescriptorMap = this.controller.valueDescriptorMap;\n    }\n    start() {\n        this.stringMapObserver.start();\n        this.invokeChangedCallbacksForDefaultValues();\n    }\n    stop() {\n        this.stringMapObserver.stop();\n    }\n    get element() {\n        return this.context.element;\n    }\n    get controller() {\n        return this.context.controller;\n    }\n    getStringMapKeyForAttribute(attributeName) {\n        if (attributeName in this.valueDescriptorMap) {\n            return this.valueDescriptorMap[attributeName].name;\n        }\n    }\n    stringMapKeyAdded(key, attributeName) {\n        const descriptor = this.valueDescriptorMap[attributeName];\n        if (!this.hasValue(key)) {\n            this.invokeChangedCallback(key, descriptor.writer(this.receiver[key]), descriptor.writer(descriptor.defaultValue));\n        }\n    }\n    stringMapValueChanged(value, name, oldValue) {\n        const descriptor = this.valueDescriptorNameMap[name];\n        if (value === null)\n            return;\n        if (oldValue === null) {\n            oldValue = descriptor.writer(descriptor.defaultValue);\n        }\n        this.invokeChangedCallback(name, value, oldValue);\n    }\n    stringMapKeyRemoved(key, attributeName, oldValue) {\n        const descriptor = this.valueDescriptorNameMap[key];\n        if (this.hasValue(key)) {\n            this.invokeChangedCallback(key, descriptor.writer(this.receiver[key]), oldValue);\n        }\n        else {\n            this.invokeChangedCallback(key, descriptor.writer(descriptor.defaultValue), oldValue);\n        }\n    }\n    invokeChangedCallbacksForDefaultValues() {\n        for (const { key, name, defaultValue, writer } of this.valueDescriptors) {\n            if (defaultValue != undefined && !this.controller.data.has(key)) {\n                this.invokeChangedCallback(name, writer(defaultValue), undefined);\n            }\n        }\n    }\n    invokeChangedCallback(name, rawValue, rawOldValue) {\n        const changedMethodName = `${name}Changed`;\n        const changedMethod = this.receiver[changedMethodName];\n        if (typeof changedMethod == \"function\") {\n            const descriptor = this.valueDescriptorNameMap[name];\n            try {\n                const value = descriptor.reader(rawValue);\n                let oldValue = rawOldValue;\n                if (rawOldValue) {\n                    oldValue = descriptor.reader(rawOldValue);\n                }\n                changedMethod.call(this.receiver, value, oldValue);\n            }\n            catch (error) {\n                if (error instanceof TypeError) {\n                    error.message = `Stimulus Value \"${this.context.identifier}.${descriptor.name}\" - ${error.message}`;\n                }\n                throw error;\n            }\n        }\n    }\n    get valueDescriptors() {\n        const { valueDescriptorMap } = this;\n        return Object.keys(valueDescriptorMap).map((key) => valueDescriptorMap[key]);\n    }\n    get valueDescriptorNameMap() {\n        const descriptors = {};\n        Object.keys(this.valueDescriptorMap).forEach((key) => {\n            const descriptor = this.valueDescriptorMap[key];\n            descriptors[descriptor.name] = descriptor;\n        });\n        return descriptors;\n    }\n    hasValue(attributeName) {\n        const descriptor = this.valueDescriptorNameMap[attributeName];\n        const hasMethodName = `has${capitalize(descriptor.name)}`;\n        return this.receiver[hasMethodName];\n    }\n}\n\nclass TargetObserver {\n    constructor(context, delegate) {\n        this.context = context;\n        this.delegate = delegate;\n        this.targetsByName = new Multimap();\n    }\n    start() {\n        if (!this.tokenListObserver) {\n            this.tokenListObserver = new TokenListObserver(this.element, this.attributeName, this);\n            this.tokenListObserver.start();\n        }\n    }\n    stop() {\n        if (this.tokenListObserver) {\n            this.disconnectAllTargets();\n            this.tokenListObserver.stop();\n            delete this.tokenListObserver;\n        }\n    }\n    tokenMatched({ element, content: name }) {\n        if (this.scope.containsElement(element)) {\n            this.connectTarget(element, name);\n        }\n    }\n    tokenUnmatched({ element, content: name }) {\n        this.disconnectTarget(element, name);\n    }\n    connectTarget(element, name) {\n        var _a;\n        if (!this.targetsByName.has(name, element)) {\n            this.targetsByName.add(name, element);\n            (_a = this.tokenListObserver) === null || _a === void 0 ? void 0 : _a.pause(() => this.delegate.targetConnected(element, name));\n        }\n    }\n    disconnectTarget(element, name) {\n        var _a;\n        if (this.targetsByName.has(name, element)) {\n            this.targetsByName.delete(name, element);\n            (_a = this.tokenListObserver) === null || _a === void 0 ? void 0 : _a.pause(() => this.delegate.targetDisconnected(element, name));\n        }\n    }\n    disconnectAllTargets() {\n        for (const name of this.targetsByName.keys) {\n            for (const element of this.targetsByName.getValuesForKey(name)) {\n                this.disconnectTarget(element, name);\n            }\n        }\n    }\n    get attributeName() {\n        return `data-${this.context.identifier}-target`;\n    }\n    get element() {\n        return this.context.element;\n    }\n    get scope() {\n        return this.context.scope;\n    }\n}\n\nfunction readInheritableStaticArrayValues(constructor, propertyName) {\n    const ancestors = getAncestorsForConstructor(constructor);\n    return Array.from(ancestors.reduce((values, constructor) => {\n        getOwnStaticArrayValues(constructor, propertyName).forEach((name) => values.add(name));\n        return values;\n    }, new Set()));\n}\nfunction readInheritableStaticObjectPairs(constructor, propertyName) {\n    const ancestors = getAncestorsForConstructor(constructor);\n    return ancestors.reduce((pairs, constructor) => {\n        pairs.push(...getOwnStaticObjectPairs(constructor, propertyName));\n        return pairs;\n    }, []);\n}\nfunction getAncestorsForConstructor(constructor) {\n    const ancestors = [];\n    while (constructor) {\n        ancestors.push(constructor);\n        constructor = Object.getPrototypeOf(constructor);\n    }\n    return ancestors.reverse();\n}\nfunction getOwnStaticArrayValues(constructor, propertyName) {\n    const definition = constructor[propertyName];\n    return Array.isArray(definition) ? definition : [];\n}\nfunction getOwnStaticObjectPairs(constructor, propertyName) {\n    const definition = constructor[propertyName];\n    return definition ? Object.keys(definition).map((key) => [key, definition[key]]) : [];\n}\n\nclass OutletObserver {\n    constructor(context, delegate) {\n        this.started = false;\n        this.context = context;\n        this.delegate = delegate;\n        this.outletsByName = new Multimap();\n        this.outletElementsByName = new Multimap();\n        this.selectorObserverMap = new Map();\n        this.attributeObserverMap = new Map();\n    }\n    start() {\n        if (!this.started) {\n            this.outletDefinitions.forEach((outletName) => {\n                this.setupSelectorObserverForOutlet(outletName);\n                this.setupAttributeObserverForOutlet(outletName);\n            });\n            this.started = true;\n            this.dependentContexts.forEach((context) => context.refresh());\n        }\n    }\n    refresh() {\n        this.selectorObserverMap.forEach((observer) => observer.refresh());\n        this.attributeObserverMap.forEach((observer) => observer.refresh());\n    }\n    stop() {\n        if (this.started) {\n            this.started = false;\n            this.disconnectAllOutlets();\n            this.stopSelectorObservers();\n            this.stopAttributeObservers();\n        }\n    }\n    stopSelectorObservers() {\n        if (this.selectorObserverMap.size > 0) {\n            this.selectorObserverMap.forEach((observer) => observer.stop());\n            this.selectorObserverMap.clear();\n        }\n    }\n    stopAttributeObservers() {\n        if (this.attributeObserverMap.size > 0) {\n            this.attributeObserverMap.forEach((observer) => observer.stop());\n            this.attributeObserverMap.clear();\n        }\n    }\n    selectorMatched(element, _selector, { outletName }) {\n        const outlet = this.getOutlet(element, outletName);\n        if (outlet) {\n            this.connectOutlet(outlet, element, outletName);\n        }\n    }\n    selectorUnmatched(element, _selector, { outletName }) {\n        const outlet = this.getOutletFromMap(element, outletName);\n        if (outlet) {\n            this.disconnectOutlet(outlet, element, outletName);\n        }\n    }\n    selectorMatchElement(element, { outletName }) {\n        const selector = this.selector(outletName);\n        const hasOutlet = this.hasOutlet(element, outletName);\n        const hasOutletController = element.matches(`[${this.schema.controllerAttribute}~=${outletName}]`);\n        if (selector) {\n            return hasOutlet && hasOutletController && element.matches(selector);\n        }\n        else {\n            return false;\n        }\n    }\n    elementMatchedAttribute(_element, attributeName) {\n        const outletName = this.getOutletNameFromOutletAttributeName(attributeName);\n        if (outletName) {\n            this.updateSelectorObserverForOutlet(outletName);\n        }\n    }\n    elementAttributeValueChanged(_element, attributeName) {\n        const outletName = this.getOutletNameFromOutletAttributeName(attributeName);\n        if (outletName) {\n            this.updateSelectorObserverForOutlet(outletName);\n        }\n    }\n    elementUnmatchedAttribute(_element, attributeName) {\n        const outletName = this.getOutletNameFromOutletAttributeName(attributeName);\n        if (outletName) {\n            this.updateSelectorObserverForOutlet(outletName);\n        }\n    }\n    connectOutlet(outlet, element, outletName) {\n        var _a;\n        if (!this.outletElementsByName.has(outletName, element)) {\n            this.outletsByName.add(outletName, outlet);\n            this.outletElementsByName.add(outletName, element);\n            (_a = this.selectorObserverMap.get(outletName)) === null || _a === void 0 ? void 0 : _a.pause(() => this.delegate.outletConnected(outlet, element, outletName));\n        }\n    }\n    disconnectOutlet(outlet, element, outletName) {\n        var _a;\n        if (this.outletElementsByName.has(outletName, element)) {\n            this.outletsByName.delete(outletName, outlet);\n            this.outletElementsByName.delete(outletName, element);\n            (_a = this.selectorObserverMap\n                .get(outletName)) === null || _a === void 0 ? void 0 : _a.pause(() => this.delegate.outletDisconnected(outlet, element, outletName));\n        }\n    }\n    disconnectAllOutlets() {\n        for (const outletName of this.outletElementsByName.keys) {\n            for (const element of this.outletElementsByName.getValuesForKey(outletName)) {\n                for (const outlet of this.outletsByName.getValuesForKey(outletName)) {\n                    this.disconnectOutlet(outlet, element, outletName);\n                }\n            }\n        }\n    }\n    updateSelectorObserverForOutlet(outletName) {\n        const observer = this.selectorObserverMap.get(outletName);\n        if (observer) {\n            observer.selector = this.selector(outletName);\n        }\n    }\n    setupSelectorObserverForOutlet(outletName) {\n        const selector = this.selector(outletName);\n        const selectorObserver = new SelectorObserver(document.body, selector, this, { outletName });\n        this.selectorObserverMap.set(outletName, selectorObserver);\n        selectorObserver.start();\n    }\n    setupAttributeObserverForOutlet(outletName) {\n        const attributeName = this.attributeNameForOutletName(outletName);\n        const attributeObserver = new AttributeObserver(this.scope.element, attributeName, this);\n        this.attributeObserverMap.set(outletName, attributeObserver);\n        attributeObserver.start();\n    }\n    selector(outletName) {\n        return this.scope.outlets.getSelectorForOutletName(outletName);\n    }\n    attributeNameForOutletName(outletName) {\n        return this.scope.schema.outletAttributeForScope(this.identifier, outletName);\n    }\n    getOutletNameFromOutletAttributeName(attributeName) {\n        return this.outletDefinitions.find((outletName) => this.attributeNameForOutletName(outletName) === attributeName);\n    }\n    get outletDependencies() {\n        const dependencies = new Multimap();\n        this.router.modules.forEach((module) => {\n            const constructor = module.definition.controllerConstructor;\n            const outlets = readInheritableStaticArrayValues(constructor, \"outlets\");\n            outlets.forEach((outlet) => dependencies.add(outlet, module.identifier));\n        });\n        return dependencies;\n    }\n    get outletDefinitions() {\n        return this.outletDependencies.getKeysForValue(this.identifier);\n    }\n    get dependentControllerIdentifiers() {\n        return this.outletDependencies.getValuesForKey(this.identifier);\n    }\n    get dependentContexts() {\n        const identifiers = this.dependentControllerIdentifiers;\n        return this.router.contexts.filter((context) => identifiers.includes(context.identifier));\n    }\n    hasOutlet(element, outletName) {\n        return !!this.getOutlet(element, outletName) || !!this.getOutletFromMap(element, outletName);\n    }\n    getOutlet(element, outletName) {\n        return this.application.getControllerForElementAndIdentifier(element, outletName);\n    }\n    getOutletFromMap(element, outletName) {\n        return this.outletsByName.getValuesForKey(outletName).find((outlet) => outlet.element === element);\n    }\n    get scope() {\n        return this.context.scope;\n    }\n    get schema() {\n        return this.context.schema;\n    }\n    get identifier() {\n        return this.context.identifier;\n    }\n    get application() {\n        return this.context.application;\n    }\n    get router() {\n        return this.application.router;\n    }\n}\n\nclass Context {\n    constructor(module, scope) {\n        this.logDebugActivity = (functionName, detail = {}) => {\n            const { identifier, controller, element } = this;\n            detail = Object.assign({ identifier, controller, element }, detail);\n            this.application.logDebugActivity(this.identifier, functionName, detail);\n        };\n        this.module = module;\n        this.scope = scope;\n        this.controller = new module.controllerConstructor(this);\n        this.bindingObserver = new BindingObserver(this, this.dispatcher);\n        this.valueObserver = new ValueObserver(this, this.controller);\n        this.targetObserver = new TargetObserver(this, this);\n        this.outletObserver = new OutletObserver(this, this);\n        try {\n            this.controller.initialize();\n            this.logDebugActivity(\"initialize\");\n        }\n        catch (error) {\n            this.handleError(error, \"initializing controller\");\n        }\n    }\n    connect() {\n        this.bindingObserver.start();\n        this.valueObserver.start();\n        this.targetObserver.start();\n        this.outletObserver.start();\n        try {\n            this.controller.connect();\n            this.logDebugActivity(\"connect\");\n        }\n        catch (error) {\n            this.handleError(error, \"connecting controller\");\n        }\n    }\n    refresh() {\n        this.outletObserver.refresh();\n    }\n    disconnect() {\n        try {\n            this.controller.disconnect();\n            this.logDebugActivity(\"disconnect\");\n        }\n        catch (error) {\n            this.handleError(error, \"disconnecting controller\");\n        }\n        this.outletObserver.stop();\n        this.targetObserver.stop();\n        this.valueObserver.stop();\n        this.bindingObserver.stop();\n    }\n    get application() {\n        return this.module.application;\n    }\n    get identifier() {\n        return this.module.identifier;\n    }\n    get schema() {\n        return this.application.schema;\n    }\n    get dispatcher() {\n        return this.application.dispatcher;\n    }\n    get element() {\n        return this.scope.element;\n    }\n    get parentElement() {\n        return this.element.parentElement;\n    }\n    handleError(error, message, detail = {}) {\n        const { identifier, controller, element } = this;\n        detail = Object.assign({ identifier, controller, element }, detail);\n        this.application.handleError(error, `Error ${message}`, detail);\n    }\n    targetConnected(element, name) {\n        this.invokeControllerMethod(`${name}TargetConnected`, element);\n    }\n    targetDisconnected(element, name) {\n        this.invokeControllerMethod(`${name}TargetDisconnected`, element);\n    }\n    outletConnected(outlet, element, name) {\n        this.invokeControllerMethod(`${namespaceCamelize(name)}OutletConnected`, outlet, element);\n    }\n    outletDisconnected(outlet, element, name) {\n        this.invokeControllerMethod(`${namespaceCamelize(name)}OutletDisconnected`, outlet, element);\n    }\n    invokeControllerMethod(methodName, ...args) {\n        const controller = this.controller;\n        if (typeof controller[methodName] == \"function\") {\n            controller[methodName](...args);\n        }\n    }\n}\n\nfunction bless(constructor) {\n    return shadow(constructor, getBlessedProperties(constructor));\n}\nfunction shadow(constructor, properties) {\n    const shadowConstructor = extend(constructor);\n    const shadowProperties = getShadowProperties(constructor.prototype, properties);\n    Object.defineProperties(shadowConstructor.prototype, shadowProperties);\n    return shadowConstructor;\n}\nfunction getBlessedProperties(constructor) {\n    const blessings = readInheritableStaticArrayValues(constructor, \"blessings\");\n    return blessings.reduce((blessedProperties, blessing) => {\n        const properties = blessing(constructor);\n        for (const key in properties) {\n            const descriptor = blessedProperties[key] || {};\n            blessedProperties[key] = Object.assign(descriptor, properties[key]);\n        }\n        return blessedProperties;\n    }, {});\n}\nfunction getShadowProperties(prototype, properties) {\n    return getOwnKeys(properties).reduce((shadowProperties, key) => {\n        const descriptor = getShadowedDescriptor(prototype, properties, key);\n        if (descriptor) {\n            Object.assign(shadowProperties, { [key]: descriptor });\n        }\n        return shadowProperties;\n    }, {});\n}\nfunction getShadowedDescriptor(prototype, properties, key) {\n    const shadowingDescriptor = Object.getOwnPropertyDescriptor(prototype, key);\n    const shadowedByValue = shadowingDescriptor && \"value\" in shadowingDescriptor;\n    if (!shadowedByValue) {\n        const descriptor = Object.getOwnPropertyDescriptor(properties, key).value;\n        if (shadowingDescriptor) {\n            descriptor.get = shadowingDescriptor.get || descriptor.get;\n            descriptor.set = shadowingDescriptor.set || descriptor.set;\n        }\n        return descriptor;\n    }\n}\nconst getOwnKeys = (() => {\n    if (typeof Object.getOwnPropertySymbols == \"function\") {\n        return (object) => [...Object.getOwnPropertyNames(object), ...Object.getOwnPropertySymbols(object)];\n    }\n    else {\n        return Object.getOwnPropertyNames;\n    }\n})();\nconst extend = (() => {\n    function extendWithReflect(constructor) {\n        function extended() {\n            return Reflect.construct(constructor, arguments, new.target);\n        }\n        extended.prototype = Object.create(constructor.prototype, {\n            constructor: { value: extended },\n        });\n        Reflect.setPrototypeOf(extended, constructor);\n        return extended;\n    }\n    function testReflectExtension() {\n        const a = function () {\n            this.a.call(this);\n        };\n        const b = extendWithReflect(a);\n        b.prototype.a = function () { };\n        return new b();\n    }\n    try {\n        testReflectExtension();\n        return extendWithReflect;\n    }\n    catch (error) {\n        return (constructor) => class extended extends constructor {\n        };\n    }\n})();\n\nfunction blessDefinition(definition) {\n    return {\n        identifier: definition.identifier,\n        controllerConstructor: bless(definition.controllerConstructor),\n    };\n}\n\nclass Module {\n    constructor(application, definition) {\n        this.application = application;\n        this.definition = blessDefinition(definition);\n        this.contextsByScope = new WeakMap();\n        this.connectedContexts = new Set();\n    }\n    get identifier() {\n        return this.definition.identifier;\n    }\n    get controllerConstructor() {\n        return this.definition.controllerConstructor;\n    }\n    get contexts() {\n        return Array.from(this.connectedContexts);\n    }\n    connectContextForScope(scope) {\n        const context = this.fetchContextForScope(scope);\n        this.connectedContexts.add(context);\n        context.connect();\n    }\n    disconnectContextForScope(scope) {\n        const context = this.contextsByScope.get(scope);\n        if (context) {\n            this.connectedContexts.delete(context);\n            context.disconnect();\n        }\n    }\n    fetchContextForScope(scope) {\n        let context = this.contextsByScope.get(scope);\n        if (!context) {\n            context = new Context(this, scope);\n            this.contextsByScope.set(scope, context);\n        }\n        return context;\n    }\n}\n\nclass ClassMap {\n    constructor(scope) {\n        this.scope = scope;\n    }\n    has(name) {\n        return this.data.has(this.getDataKey(name));\n    }\n    get(name) {\n        return this.getAll(name)[0];\n    }\n    getAll(name) {\n        const tokenString = this.data.get(this.getDataKey(name)) || \"\";\n        return tokenize(tokenString);\n    }\n    getAttributeName(name) {\n        return this.data.getAttributeNameForKey(this.getDataKey(name));\n    }\n    getDataKey(name) {\n        return `${name}-class`;\n    }\n    get data() {\n        return this.scope.data;\n    }\n}\n\nclass DataMap {\n    constructor(scope) {\n        this.scope = scope;\n    }\n    get element() {\n        return this.scope.element;\n    }\n    get identifier() {\n        return this.scope.identifier;\n    }\n    get(key) {\n        const name = this.getAttributeNameForKey(key);\n        return this.element.getAttribute(name);\n    }\n    set(key, value) {\n        const name = this.getAttributeNameForKey(key);\n        this.element.setAttribute(name, value);\n        return this.get(key);\n    }\n    has(key) {\n        const name = this.getAttributeNameForKey(key);\n        return this.element.hasAttribute(name);\n    }\n    delete(key) {\n        if (this.has(key)) {\n            const name = this.getAttributeNameForKey(key);\n            this.element.removeAttribute(name);\n            return true;\n        }\n        else {\n            return false;\n        }\n    }\n    getAttributeNameForKey(key) {\n        return `data-${this.identifier}-${dasherize(key)}`;\n    }\n}\n\nclass Guide {\n    constructor(logger) {\n        this.warnedKeysByObject = new WeakMap();\n        this.logger = logger;\n    }\n    warn(object, key, message) {\n        let warnedKeys = this.warnedKeysByObject.get(object);\n        if (!warnedKeys) {\n            warnedKeys = new Set();\n            this.warnedKeysByObject.set(object, warnedKeys);\n        }\n        if (!warnedKeys.has(key)) {\n            warnedKeys.add(key);\n            this.logger.warn(message, object);\n        }\n    }\n}\n\nfunction attributeValueContainsToken(attributeName, token) {\n    return `[${attributeName}~=\"${token}\"]`;\n}\n\nclass TargetSet {\n    constructor(scope) {\n        this.scope = scope;\n    }\n    get element() {\n        return this.scope.element;\n    }\n    get identifier() {\n        return this.scope.identifier;\n    }\n    get schema() {\n        return this.scope.schema;\n    }\n    has(targetName) {\n        return this.find(targetName) != null;\n    }\n    find(...targetNames) {\n        return targetNames.reduce((target, targetName) => target || this.findTarget(targetName) || this.findLegacyTarget(targetName), undefined);\n    }\n    findAll(...targetNames) {\n        return targetNames.reduce((targets, targetName) => [\n            ...targets,\n            ...this.findAllTargets(targetName),\n            ...this.findAllLegacyTargets(targetName),\n        ], []);\n    }\n    findTarget(targetName) {\n        const selector = this.getSelectorForTargetName(targetName);\n        return this.scope.findElement(selector);\n    }\n    findAllTargets(targetName) {\n        const selector = this.getSelectorForTargetName(targetName);\n        return this.scope.findAllElements(selector);\n    }\n    getSelectorForTargetName(targetName) {\n        const attributeName = this.schema.targetAttributeForScope(this.identifier);\n        return attributeValueContainsToken(attributeName, targetName);\n    }\n    findLegacyTarget(targetName) {\n        const selector = this.getLegacySelectorForTargetName(targetName);\n        return this.deprecate(this.scope.findElement(selector), targetName);\n    }\n    findAllLegacyTargets(targetName) {\n        const selector = this.getLegacySelectorForTargetName(targetName);\n        return this.scope.findAllElements(selector).map((element) => this.deprecate(element, targetName));\n    }\n    getLegacySelectorForTargetName(targetName) {\n        const targetDescriptor = `${this.identifier}.${targetName}`;\n        return attributeValueContainsToken(this.schema.targetAttribute, targetDescriptor);\n    }\n    deprecate(element, targetName) {\n        if (element) {\n            const { identifier } = this;\n            const attributeName = this.schema.targetAttribute;\n            const revisedAttributeName = this.schema.targetAttributeForScope(identifier);\n            this.guide.warn(element, `target:${targetName}`, `Please replace ${attributeName}=\"${identifier}.${targetName}\" with ${revisedAttributeName}=\"${targetName}\". ` +\n                `The ${attributeName} attribute is deprecated and will be removed in a future version of Stimulus.`);\n        }\n        return element;\n    }\n    get guide() {\n        return this.scope.guide;\n    }\n}\n\nclass OutletSet {\n    constructor(scope, controllerElement) {\n        this.scope = scope;\n        this.controllerElement = controllerElement;\n    }\n    get element() {\n        return this.scope.element;\n    }\n    get identifier() {\n        return this.scope.identifier;\n    }\n    get schema() {\n        return this.scope.schema;\n    }\n    has(outletName) {\n        return this.find(outletName) != null;\n    }\n    find(...outletNames) {\n        return outletNames.reduce((outlet, outletName) => outlet || this.findOutlet(outletName), undefined);\n    }\n    findAll(...outletNames) {\n        return outletNames.reduce((outlets, outletName) => [...outlets, ...this.findAllOutlets(outletName)], []);\n    }\n    getSelectorForOutletName(outletName) {\n        const attributeName = this.schema.outletAttributeForScope(this.identifier, outletName);\n        return this.controllerElement.getAttribute(attributeName);\n    }\n    findOutlet(outletName) {\n        const selector = this.getSelectorForOutletName(outletName);\n        if (selector)\n            return this.findElement(selector, outletName);\n    }\n    findAllOutlets(outletName) {\n        const selector = this.getSelectorForOutletName(outletName);\n        return selector ? this.findAllElements(selector, outletName) : [];\n    }\n    findElement(selector, outletName) {\n        const elements = this.scope.queryElements(selector);\n        return elements.filter((element) => this.matchesElement(element, selector, outletName))[0];\n    }\n    findAllElements(selector, outletName) {\n        const elements = this.scope.queryElements(selector);\n        return elements.filter((element) => this.matchesElement(element, selector, outletName));\n    }\n    matchesElement(element, selector, outletName) {\n        const controllerAttribute = element.getAttribute(this.scope.schema.controllerAttribute) || \"\";\n        return element.matches(selector) && controllerAttribute.split(\" \").includes(outletName);\n    }\n}\n\nclass Scope {\n    constructor(schema, element, identifier, logger) {\n        this.targets = new TargetSet(this);\n        this.classes = new ClassMap(this);\n        this.data = new DataMap(this);\n        this.containsElement = (element) => {\n            return element.closest(this.controllerSelector) === this.element;\n        };\n        this.schema = schema;\n        this.element = element;\n        this.identifier = identifier;\n        this.guide = new Guide(logger);\n        this.outlets = new OutletSet(this.documentScope, element);\n    }\n    findElement(selector) {\n        return this.element.matches(selector) ? this.element : this.queryElements(selector).find(this.containsElement);\n    }\n    findAllElements(selector) {\n        return [\n            ...(this.element.matches(selector) ? [this.element] : []),\n            ...this.queryElements(selector).filter(this.containsElement),\n        ];\n    }\n    queryElements(selector) {\n        return Array.from(this.element.querySelectorAll(selector));\n    }\n    get controllerSelector() {\n        return attributeValueContainsToken(this.schema.controllerAttribute, this.identifier);\n    }\n    get isDocumentScope() {\n        return this.element === document.documentElement;\n    }\n    get documentScope() {\n        return this.isDocumentScope\n            ? this\n            : new Scope(this.schema, document.documentElement, this.identifier, this.guide.logger);\n    }\n}\n\nclass ScopeObserver {\n    constructor(element, schema, delegate) {\n        this.element = element;\n        this.schema = schema;\n        this.delegate = delegate;\n        this.valueListObserver = new ValueListObserver(this.element, this.controllerAttribute, this);\n        this.scopesByIdentifierByElement = new WeakMap();\n        this.scopeReferenceCounts = new WeakMap();\n    }\n    start() {\n        this.valueListObserver.start();\n    }\n    stop() {\n        this.valueListObserver.stop();\n    }\n    get controllerAttribute() {\n        return this.schema.controllerAttribute;\n    }\n    parseValueForToken(token) {\n        const { element, content: identifier } = token;\n        return this.parseValueForElementAndIdentifier(element, identifier);\n    }\n    parseValueForElementAndIdentifier(element, identifier) {\n        const scopesByIdentifier = this.fetchScopesByIdentifierForElement(element);\n        let scope = scopesByIdentifier.get(identifier);\n        if (!scope) {\n            scope = this.delegate.createScopeForElementAndIdentifier(element, identifier);\n            scopesByIdentifier.set(identifier, scope);\n        }\n        return scope;\n    }\n    elementMatchedValue(element, value) {\n        const referenceCount = (this.scopeReferenceCounts.get(value) || 0) + 1;\n        this.scopeReferenceCounts.set(value, referenceCount);\n        if (referenceCount == 1) {\n            this.delegate.scopeConnected(value);\n        }\n    }\n    elementUnmatchedValue(element, value) {\n        const referenceCount = this.scopeReferenceCounts.get(value);\n        if (referenceCount) {\n            this.scopeReferenceCounts.set(value, referenceCount - 1);\n            if (referenceCount == 1) {\n                this.delegate.scopeDisconnected(value);\n            }\n        }\n    }\n    fetchScopesByIdentifierForElement(element) {\n        let scopesByIdentifier = this.scopesByIdentifierByElement.get(element);\n        if (!scopesByIdentifier) {\n            scopesByIdentifier = new Map();\n            this.scopesByIdentifierByElement.set(element, scopesByIdentifier);\n        }\n        return scopesByIdentifier;\n    }\n}\n\nclass Router {\n    constructor(application) {\n        this.application = application;\n        this.scopeObserver = new ScopeObserver(this.element, this.schema, this);\n        this.scopesByIdentifier = new Multimap();\n        this.modulesByIdentifier = new Map();\n    }\n    get element() {\n        return this.application.element;\n    }\n    get schema() {\n        return this.application.schema;\n    }\n    get logger() {\n        return this.application.logger;\n    }\n    get controllerAttribute() {\n        return this.schema.controllerAttribute;\n    }\n    get modules() {\n        return Array.from(this.modulesByIdentifier.values());\n    }\n    get contexts() {\n        return this.modules.reduce((contexts, module) => contexts.concat(module.contexts), []);\n    }\n    start() {\n        this.scopeObserver.start();\n    }\n    stop() {\n        this.scopeObserver.stop();\n    }\n    loadDefinition(definition) {\n        this.unloadIdentifier(definition.identifier);\n        const module = new Module(this.application, definition);\n        this.connectModule(module);\n        const afterLoad = definition.controllerConstructor.afterLoad;\n        if (afterLoad) {\n            afterLoad.call(definition.controllerConstructor, definition.identifier, this.application);\n        }\n    }\n    unloadIdentifier(identifier) {\n        const module = this.modulesByIdentifier.get(identifier);\n        if (module) {\n            this.disconnectModule(module);\n        }\n    }\n    getContextForElementAndIdentifier(element, identifier) {\n        const module = this.modulesByIdentifier.get(identifier);\n        if (module) {\n            return module.contexts.find((context) => context.element == element);\n        }\n    }\n    proposeToConnectScopeForElementAndIdentifier(element, identifier) {\n        const scope = this.scopeObserver.parseValueForElementAndIdentifier(element, identifier);\n        if (scope) {\n            this.scopeObserver.elementMatchedValue(scope.element, scope);\n        }\n        else {\n            console.error(`Couldn't find or create scope for identifier: \"${identifier}\" and element:`, element);\n        }\n    }\n    handleError(error, message, detail) {\n        this.application.handleError(error, message, detail);\n    }\n    createScopeForElementAndIdentifier(element, identifier) {\n        return new Scope(this.schema, element, identifier, this.logger);\n    }\n    scopeConnected(scope) {\n        this.scopesByIdentifier.add(scope.identifier, scope);\n        const module = this.modulesByIdentifier.get(scope.identifier);\n        if (module) {\n            module.connectContextForScope(scope);\n        }\n    }\n    scopeDisconnected(scope) {\n        this.scopesByIdentifier.delete(scope.identifier, scope);\n        const module = this.modulesByIdentifier.get(scope.identifier);\n        if (module) {\n            module.disconnectContextForScope(scope);\n        }\n    }\n    connectModule(module) {\n        this.modulesByIdentifier.set(module.identifier, module);\n        const scopes = this.scopesByIdentifier.getValuesForKey(module.identifier);\n        scopes.forEach((scope) => module.connectContextForScope(scope));\n    }\n    disconnectModule(module) {\n        this.modulesByIdentifier.delete(module.identifier);\n        const scopes = this.scopesByIdentifier.getValuesForKey(module.identifier);\n        scopes.forEach((scope) => module.disconnectContextForScope(scope));\n    }\n}\n\nconst defaultSchema = {\n    controllerAttribute: \"data-controller\",\n    actionAttribute: \"data-action\",\n    targetAttribute: \"data-target\",\n    targetAttributeForScope: (identifier) => `data-${identifier}-target`,\n    outletAttributeForScope: (identifier, outlet) => `data-${identifier}-${outlet}-outlet`,\n    keyMappings: Object.assign(Object.assign({ enter: \"Enter\", tab: \"Tab\", esc: \"Escape\", space: \" \", up: \"ArrowUp\", down: \"ArrowDown\", left: \"ArrowLeft\", right: \"ArrowRight\", home: \"Home\", end: \"End\", page_up: \"PageUp\", page_down: \"PageDown\" }, objectFromEntries(\"abcdefghijklmnopqrstuvwxyz\".split(\"\").map((c) => [c, c]))), objectFromEntries(\"0123456789\".split(\"\").map((n) => [n, n]))),\n};\nfunction objectFromEntries(array) {\n    return array.reduce((memo, [k, v]) => (Object.assign(Object.assign({}, memo), { [k]: v })), {});\n}\n\nclass Application {\n    constructor(element = document.documentElement, schema = defaultSchema) {\n        this.logger = console;\n        this.debug = false;\n        this.logDebugActivity = (identifier, functionName, detail = {}) => {\n            if (this.debug) {\n                this.logFormattedMessage(identifier, functionName, detail);\n            }\n        };\n        this.element = element;\n        this.schema = schema;\n        this.dispatcher = new Dispatcher(this);\n        this.router = new Router(this);\n        this.actionDescriptorFilters = Object.assign({}, defaultActionDescriptorFilters);\n    }\n    static start(element, schema) {\n        const application = new this(element, schema);\n        application.start();\n        return application;\n    }\n    async start() {\n        await domReady();\n        this.logDebugActivity(\"application\", \"starting\");\n        this.dispatcher.start();\n        this.router.start();\n        this.logDebugActivity(\"application\", \"start\");\n    }\n    stop() {\n        this.logDebugActivity(\"application\", \"stopping\");\n        this.dispatcher.stop();\n        this.router.stop();\n        this.logDebugActivity(\"application\", \"stop\");\n    }\n    register(identifier, controllerConstructor) {\n        this.load({ identifier, controllerConstructor });\n    }\n    registerActionOption(name, filter) {\n        this.actionDescriptorFilters[name] = filter;\n    }\n    load(head, ...rest) {\n        const definitions = Array.isArray(head) ? head : [head, ...rest];\n        definitions.forEach((definition) => {\n            if (definition.controllerConstructor.shouldLoad) {\n                this.router.loadDefinition(definition);\n            }\n        });\n    }\n    unload(head, ...rest) {\n        const identifiers = Array.isArray(head) ? head : [head, ...rest];\n        identifiers.forEach((identifier) => this.router.unloadIdentifier(identifier));\n    }\n    get controllers() {\n        return this.router.contexts.map((context) => context.controller);\n    }\n    getControllerForElementAndIdentifier(element, identifier) {\n        const context = this.router.getContextForElementAndIdentifier(element, identifier);\n        return context ? context.controller : null;\n    }\n    handleError(error, message, detail) {\n        var _a;\n        this.logger.error(`%s\\n\\n%o\\n\\n%o`, message, error, detail);\n        (_a = window.onerror) === null || _a === void 0 ? void 0 : _a.call(window, message, \"\", 0, 0, error);\n    }\n    logFormattedMessage(identifier, functionName, detail = {}) {\n        detail = Object.assign({ application: this }, detail);\n        this.logger.groupCollapsed(`${identifier} #${functionName}`);\n        this.logger.log(\"details:\", Object.assign({}, detail));\n        this.logger.groupEnd();\n    }\n}\nfunction domReady() {\n    return new Promise((resolve) => {\n        if (document.readyState == \"loading\") {\n            document.addEventListener(\"DOMContentLoaded\", () => resolve());\n        }\n        else {\n            resolve();\n        }\n    });\n}\n\nfunction ClassPropertiesBlessing(constructor) {\n    const classes = readInheritableStaticArrayValues(constructor, \"classes\");\n    return classes.reduce((properties, classDefinition) => {\n        return Object.assign(properties, propertiesForClassDefinition(classDefinition));\n    }, {});\n}\nfunction propertiesForClassDefinition(key) {\n    return {\n        [`${key}Class`]: {\n            get() {\n                const { classes } = this;\n                if (classes.has(key)) {\n                    return classes.get(key);\n                }\n                else {\n                    const attribute = classes.getAttributeName(key);\n                    throw new Error(`Missing attribute \"${attribute}\"`);\n                }\n            },\n        },\n        [`${key}Classes`]: {\n            get() {\n                return this.classes.getAll(key);\n            },\n        },\n        [`has${capitalize(key)}Class`]: {\n            get() {\n                return this.classes.has(key);\n            },\n        },\n    };\n}\n\nfunction OutletPropertiesBlessing(constructor) {\n    const outlets = readInheritableStaticArrayValues(constructor, \"outlets\");\n    return outlets.reduce((properties, outletDefinition) => {\n        return Object.assign(properties, propertiesForOutletDefinition(outletDefinition));\n    }, {});\n}\nfunction getOutletController(controller, element, identifier) {\n    return controller.application.getControllerForElementAndIdentifier(element, identifier);\n}\nfunction getControllerAndEnsureConnectedScope(controller, element, outletName) {\n    let outletController = getOutletController(controller, element, outletName);\n    if (outletController)\n        return outletController;\n    controller.application.router.proposeToConnectScopeForElementAndIdentifier(element, outletName);\n    outletController = getOutletController(controller, element, outletName);\n    if (outletController)\n        return outletController;\n}\nfunction propertiesForOutletDefinition(name) {\n    const camelizedName = namespaceCamelize(name);\n    return {\n        [`${camelizedName}Outlet`]: {\n            get() {\n                const outletElement = this.outlets.find(name);\n                const selector = this.outlets.getSelectorForOutletName(name);\n                if (outletElement) {\n                    const outletController = getControllerAndEnsureConnectedScope(this, outletElement, name);\n                    if (outletController)\n                        return outletController;\n                    throw new Error(`The provided outlet element is missing an outlet controller \"${name}\" instance for host controller \"${this.identifier}\"`);\n                }\n                throw new Error(`Missing outlet element \"${name}\" for host controller \"${this.identifier}\". Stimulus couldn't find a matching outlet element using selector \"${selector}\".`);\n            },\n        },\n        [`${camelizedName}Outlets`]: {\n            get() {\n                const outlets = this.outlets.findAll(name);\n                if (outlets.length > 0) {\n                    return outlets\n                        .map((outletElement) => {\n                        const outletController = getControllerAndEnsureConnectedScope(this, outletElement, name);\n                        if (outletController)\n                            return outletController;\n                        console.warn(`The provided outlet element is missing an outlet controller \"${name}\" instance for host controller \"${this.identifier}\"`, outletElement);\n                    })\n                        .filter((controller) => controller);\n                }\n                return [];\n            },\n        },\n        [`${camelizedName}OutletElement`]: {\n            get() {\n                const outletElement = this.outlets.find(name);\n                const selector = this.outlets.getSelectorForOutletName(name);\n                if (outletElement) {\n                    return outletElement;\n                }\n                else {\n                    throw new Error(`Missing outlet element \"${name}\" for host controller \"${this.identifier}\". Stimulus couldn't find a matching outlet element using selector \"${selector}\".`);\n                }\n            },\n        },\n        [`${camelizedName}OutletElements`]: {\n            get() {\n                return this.outlets.findAll(name);\n            },\n        },\n        [`has${capitalize(camelizedName)}Outlet`]: {\n            get() {\n                return this.outlets.has(name);\n            },\n        },\n    };\n}\n\nfunction TargetPropertiesBlessing(constructor) {\n    const targets = readInheritableStaticArrayValues(constructor, \"targets\");\n    return targets.reduce((properties, targetDefinition) => {\n        return Object.assign(properties, propertiesForTargetDefinition(targetDefinition));\n    }, {});\n}\nfunction propertiesForTargetDefinition(name) {\n    return {\n        [`${name}Target`]: {\n            get() {\n                const target = this.targets.find(name);\n                if (target) {\n                    return target;\n                }\n                else {\n                    throw new Error(`Missing target element \"${name}\" for \"${this.identifier}\" controller`);\n                }\n            },\n        },\n        [`${name}Targets`]: {\n            get() {\n                return this.targets.findAll(name);\n            },\n        },\n        [`has${capitalize(name)}Target`]: {\n            get() {\n                return this.targets.has(name);\n            },\n        },\n    };\n}\n\nfunction ValuePropertiesBlessing(constructor) {\n    const valueDefinitionPairs = readInheritableStaticObjectPairs(constructor, \"values\");\n    const propertyDescriptorMap = {\n        valueDescriptorMap: {\n            get() {\n                return valueDefinitionPairs.reduce((result, valueDefinitionPair) => {\n                    const valueDescriptor = parseValueDefinitionPair(valueDefinitionPair, this.identifier);\n                    const attributeName = this.data.getAttributeNameForKey(valueDescriptor.key);\n                    return Object.assign(result, { [attributeName]: valueDescriptor });\n                }, {});\n            },\n        },\n    };\n    return valueDefinitionPairs.reduce((properties, valueDefinitionPair) => {\n        return Object.assign(properties, propertiesForValueDefinitionPair(valueDefinitionPair));\n    }, propertyDescriptorMap);\n}\nfunction propertiesForValueDefinitionPair(valueDefinitionPair, controller) {\n    const definition = parseValueDefinitionPair(valueDefinitionPair, controller);\n    const { key, name, reader: read, writer: write } = definition;\n    return {\n        [name]: {\n            get() {\n                const value = this.data.get(key);\n                if (value !== null) {\n                    return read(value);\n                }\n                else {\n                    return definition.defaultValue;\n                }\n            },\n            set(value) {\n                if (value === undefined) {\n                    this.data.delete(key);\n                }\n                else {\n                    this.data.set(key, write(value));\n                }\n            },\n        },\n        [`has${capitalize(name)}`]: {\n            get() {\n                return this.data.has(key) || definition.hasCustomDefaultValue;\n            },\n        },\n    };\n}\nfunction parseValueDefinitionPair([token, typeDefinition], controller) {\n    return valueDescriptorForTokenAndTypeDefinition({\n        controller,\n        token,\n        typeDefinition,\n    });\n}\nfunction parseValueTypeConstant(constant) {\n    switch (constant) {\n        case Array:\n            return \"array\";\n        case Boolean:\n            return \"boolean\";\n        case Number:\n            return \"number\";\n        case Object:\n            return \"object\";\n        case String:\n            return \"string\";\n    }\n}\nfunction parseValueTypeDefault(defaultValue) {\n    switch (typeof defaultValue) {\n        case \"boolean\":\n            return \"boolean\";\n        case \"number\":\n            return \"number\";\n        case \"string\":\n            return \"string\";\n    }\n    if (Array.isArray(defaultValue))\n        return \"array\";\n    if (Object.prototype.toString.call(defaultValue) === \"[object Object]\")\n        return \"object\";\n}\nfunction parseValueTypeObject(payload) {\n    const { controller, token, typeObject } = payload;\n    const hasType = isSomething(typeObject.type);\n    const hasDefault = isSomething(typeObject.default);\n    const fullObject = hasType && hasDefault;\n    const onlyType = hasType && !hasDefault;\n    const onlyDefault = !hasType && hasDefault;\n    const typeFromObject = parseValueTypeConstant(typeObject.type);\n    const typeFromDefaultValue = parseValueTypeDefault(payload.typeObject.default);\n    if (onlyType)\n        return typeFromObject;\n    if (onlyDefault)\n        return typeFromDefaultValue;\n    if (typeFromObject !== typeFromDefaultValue) {\n        const propertyPath = controller ? `${controller}.${token}` : token;\n        throw new Error(`The specified default value for the Stimulus Value \"${propertyPath}\" must match the defined type \"${typeFromObject}\". The provided default value of \"${typeObject.default}\" is of type \"${typeFromDefaultValue}\".`);\n    }\n    if (fullObject)\n        return typeFromObject;\n}\nfunction parseValueTypeDefinition(payload) {\n    const { controller, token, typeDefinition } = payload;\n    const typeObject = { controller, token, typeObject: typeDefinition };\n    const typeFromObject = parseValueTypeObject(typeObject);\n    const typeFromDefaultValue = parseValueTypeDefault(typeDefinition);\n    const typeFromConstant = parseValueTypeConstant(typeDefinition);\n    const type = typeFromObject || typeFromDefaultValue || typeFromConstant;\n    if (type)\n        return type;\n    const propertyPath = controller ? `${controller}.${typeDefinition}` : token;\n    throw new Error(`Unknown value type \"${propertyPath}\" for \"${token}\" value`);\n}\nfunction defaultValueForDefinition(typeDefinition) {\n    const constant = parseValueTypeConstant(typeDefinition);\n    if (constant)\n        return defaultValuesByType[constant];\n    const hasDefault = hasProperty(typeDefinition, \"default\");\n    const hasType = hasProperty(typeDefinition, \"type\");\n    const typeObject = typeDefinition;\n    if (hasDefault)\n        return typeObject.default;\n    if (hasType) {\n        const { type } = typeObject;\n        const constantFromType = parseValueTypeConstant(type);\n        if (constantFromType)\n            return defaultValuesByType[constantFromType];\n    }\n    return typeDefinition;\n}\nfunction valueDescriptorForTokenAndTypeDefinition(payload) {\n    const { token, typeDefinition } = payload;\n    const key = `${dasherize(token)}-value`;\n    const type = parseValueTypeDefinition(payload);\n    return {\n        type,\n        key,\n        name: camelize(key),\n        get defaultValue() {\n            return defaultValueForDefinition(typeDefinition);\n        },\n        get hasCustomDefaultValue() {\n            return parseValueTypeDefault(typeDefinition) !== undefined;\n        },\n        reader: readers[type],\n        writer: writers[type] || writers.default,\n    };\n}\nconst defaultValuesByType = {\n    get array() {\n        return [];\n    },\n    boolean: false,\n    number: 0,\n    get object() {\n        return {};\n    },\n    string: \"\",\n};\nconst readers = {\n    array(value) {\n        const array = JSON.parse(value);\n        if (!Array.isArray(array)) {\n            throw new TypeError(`expected value of type \"array\" but instead got value \"${value}\" of type \"${parseValueTypeDefault(array)}\"`);\n        }\n        return array;\n    },\n    boolean(value) {\n        return !(value == \"0\" || String(value).toLowerCase() == \"false\");\n    },\n    number(value) {\n        return Number(value.replace(/_/g, \"\"));\n    },\n    object(value) {\n        const object = JSON.parse(value);\n        if (object === null || typeof object != \"object\" || Array.isArray(object)) {\n            throw new TypeError(`expected value of type \"object\" but instead got value \"${value}\" of type \"${parseValueTypeDefault(object)}\"`);\n        }\n        return object;\n    },\n    string(value) {\n        return value;\n    },\n};\nconst writers = {\n    default: writeString,\n    array: writeJSON,\n    object: writeJSON,\n};\nfunction writeJSON(value) {\n    return JSON.stringify(value);\n}\nfunction writeString(value) {\n    return `${value}`;\n}\n\nclass Controller {\n    constructor(context) {\n        this.context = context;\n    }\n    static get shouldLoad() {\n        return true;\n    }\n    static afterLoad(_identifier, _application) {\n        return;\n    }\n    get application() {\n        return this.context.application;\n    }\n    get scope() {\n        return this.context.scope;\n    }\n    get element() {\n        return this.scope.element;\n    }\n    get identifier() {\n        return this.scope.identifier;\n    }\n    get targets() {\n        return this.scope.targets;\n    }\n    get outlets() {\n        return this.scope.outlets;\n    }\n    get classes() {\n        return this.scope.classes;\n    }\n    get data() {\n        return this.scope.data;\n    }\n    initialize() {\n    }\n    connect() {\n    }\n    disconnect() {\n    }\n    dispatch(eventName, { target = this.element, detail = {}, prefix = this.identifier, bubbles = true, cancelable = true, } = {}) {\n        const type = prefix ? `${prefix}:${eventName}` : eventName;\n        const event = new CustomEvent(type, { detail, bubbles, cancelable });\n        target.dispatchEvent(event);\n        return event;\n    }\n}\nController.blessings = [\n    ClassPropertiesBlessing,\n    TargetPropertiesBlessing,\n    ValuePropertiesBlessing,\n    OutletPropertiesBlessing,\n];\nController.targets = [];\nController.outlets = [];\nController.values = {};\n\nexport { Application, AttributeObserver, Context, Controller, ElementObserver, IndexedMultimap, Multimap, SelectorObserver, StringMapObserver, TokenListObserver, ValueListObserver, add, defaultSchema, del, fetch, prune };\n","import { Application } from \"@hotwired/stimulus\"\n\nconst application = Application.start()\n\n// Configure Stimulus development experience\napplication.debug = false\nwindow.Stimulus   = application\n\nexport { application }\n","// This file is auto-generated by ./bin/rails stimulus:manifest:update\n// Run that command whenever you add a new controller or create them with\n// ./bin/rails generate stimulus controllerName\n\nimport { application } from \"./application\"\n\nimport HelloController from \"./hello_controller\"\napplication.register(\"hello\", HelloController)\n","import { Controller } from \"@hotwired/stimulus\"\n\nexport default class extends Controller {\n  connect() {\n    this.element.textContent = \"Hello World!\"\n  }\n}\n","import Hammer from 'hammerjs';\n\n'use strict';\n\ndocument.addEventListener('turbo:load', function () {\n\n  var swiperContainer = document.querySelector('.swiper');\n  var allCards = document.querySelectorAll('.swiper--card');\n  var nope = document.getElementById('nope');\n  var love = document.getElementById('love');\n\n  function initCards(card, index) {\n    var newCards = document.querySelectorAll('.swiper--card:not(.removed)');\n\n    newCards.forEach(function (card, index) {\n      card.style.zIndex = allCards.length - index;\n      card.style.transform = 'scale(' + (20 - index) / 20 + ') translateY(-' + 30 * index + 'px)';\n      card.style.opacity = (10 - index) / 10;\n    });\n\n    swiperContainer.classList.add('loaded');\n  }\n\n  initCards();\n\n  allCards.forEach(function (el) {\n    var hammertime = new Hammer(el);\n\n    hammertime.on('pan', function (event) {\n      el.classList.add('moving');\n    });\n\n    hammertime.on('pan', function (event) {\n      if (event.deltaX === 0) return;\n      if (event.center.x === 0 && event.center.y === 0) return;\n\n      swiperContainer.classList.toggle('swiper_love', event.deltaX > 0);\n      swiperContainer.classList.toggle('swiper_nope', event.deltaX < 0);\n\n      var xMulti = event.deltaX * 0.03;\n      var yMulti = event.deltaY / 80;\n      var rotate = xMulti * yMulti;\n\n      event.target.style.transform = 'translate(' + event.deltaX + 'px, ' + event.deltaY + 'px) rotate(' + rotate + 'deg)';\n    });\n\n    hammertime.on('panend', function (event) {\n      el.classList.remove('moving');\n      swiperContainer.classList.remove('swiper_love');\n      swiperContainer.classList.remove('swiper_nope');\n\n      var moveOutWidth = document.body.clientWidth;\n      var keep = Math.abs(event.deltaX) < 80 || Math.abs(event.velocityX) < 0.5;\n\n      event.target.classList.toggle('removed', !keep);\n\n      if (keep) {\n        event.target.style.transform = '';\n      } else {\n        var endX = Math.max(Math.abs(event.velocityX) * moveOutWidth, moveOutWidth);\n        var toX = event.deltaX > 0 ? endX : -endX;\n        var endY = Math.abs(event.velocityY) * moveOutWidth;\n        var toY = event.deltaY > 0 ? endY : -endY;\n        var xMulti = event.deltaX * 0.03;\n        var yMulti = event.deltaY / 80;\n        var rotate = xMulti * yMulti;\n\n        event.target.style.transform = 'translate(' + toX + 'px, ' + (toY + event.deltaY) + 'px) rotate(' + rotate + 'deg)';\n        initCards();\n      }\n    });\n  });\n\n  function createButtonListener(love) {\n    return function (event) {\n      var cards = document.querySelectorAll('.swiper--card:not(.removed)');\n      var moveOutWidth = document.body.clientWidth * 1.5;\n\n      if (!cards.length) return false;\n\n      var card = cards[0];\n\n      card.classList.add('removed');\n\n      if (love) {\n        card.style.transform = 'translate(' + moveOutWidth + 'px, -100px) rotate(-30deg)';\n      } else {\n        card.style.transform = 'translate(-' + moveOutWidth + 'px, -100px) rotate(30deg)';\n      }\n\n      initCards();\n\n      event.preventDefault();\n    };\n  }\n\n  var nopeListener = createButtonListener(false);\n  var loveListener = createButtonListener(true);\n\n  nope.addEventListener('click', nopeListener);\n  love.addEventListener('click', loveListener);\n\n});\n"],"names":["logger","self","console","WebSocket","log","messages","this","enabled","push","Date","now","adapters","getTime","secondsSince","time","ConnectionMonitor","constructor","connection","visibilityDidChange","bind","reconnectAttempts","start","isRunning","startedAt","stoppedAt","startPolling","addEventListener","staleThreshold","stop","stopPolling","removeEventListener","recordPing","pingedAt","recordConnect","disconnectedAt","recordDisconnect","poll","clearTimeout","pollTimeout","setTimeout","reconnectIfStale","getPollInterval","reconnectionBackoffRate","Math","pow","min","random","connectionIsStale","refreshedAt","disconnectedRecently","reopen","document","visibilityState","isOpen","message_types","protocols","supportedProtocols","slice","length","indexOf","Connection","consumer","open","subscriptions","monitor","disconnected","send","data","webSocket","JSON","stringify","isActive","getState","uninstallEventHandlers","url","installEventHandlers","close","allowReconnect","error","reopenDelay","getProtocol","protocol","isState","isProtocolSupported","call","states","state","readyState","toLowerCase","eventName","events","handler","prototype","message","event","identifier","reason","reconnect","type","parse","welcome","reload","disconnect","ping","confirmation","confirmSubscription","notify","rejection","reject","notifyAll","willAttemptReconnect","Subscription","params","mixin","object","properties","key","value","extend","perform","action","command","unsubscribe","remove","pendingSubscriptions","guarantee","subscription","startGuaranteeing","forget","filter","s","stopGuaranteeing","retrySubscribing","retryTimeout","map","subscribe","Subscriptions","guarantor","create","channelName","channel","add","ensureActiveConnection","findAll","sendCommand","callbackName","args","undefined","Consumer","_url","test","a","createElement","href","replace","createWebSocketURL","connect","createConsumer","name","element","head","querySelector","getAttribute","getConfig","default_mount_path","window","exportName","assign","VENDOR_PREFIXES","TEST_ELEMENT","TYPE_FUNCTION","round","abs","setTimeoutContext","fn","timeout","context","bindFn","invokeArrayArg","arg","Array","isArray","each","obj","iterator","i","forEach","hasOwnProperty","deprecate","method","deprecationMessage","e","Error","stack","warn","apply","arguments","Object","target","TypeError","output","index","source","nextKey","dest","src","merge","keys","inherit","child","base","childP","baseP","_super","boolOrFn","val","ifUndefined","val1","val2","addEventListeners","types","splitStr","removeEventListeners","hasParent","node","parent","parentNode","inStr","str","find","trim","split","inArray","findByKey","toArray","uniqueArray","sort","results","values","b","prefixed","property","prefix","prop","camelProp","toUpperCase","_uniqueId","getWindowForElement","doc","ownerDocument","defaultView","parentWindow","SUPPORT_TOUCH","SUPPORT_POINTER_EVENTS","SUPPORT_ONLY_TOUCH","navigator","userAgent","INPUT_TYPE_TOUCH","INPUT_TYPE_MOUSE","COMPUTE_INTERVAL","INPUT_START","INPUT_END","INPUT_CANCEL","DIRECTION_NONE","DIRECTION_LEFT","DIRECTION_RIGHT","DIRECTION_UP","DIRECTION_DOWN","DIRECTION_HORIZONTAL","DIRECTION_VERTICAL","DIRECTION_ALL","PROPS_XY","PROPS_CLIENT_XY","Input","manager","callback","options","inputTarget","domHandler","ev","enable","init","inputHandler","eventType","input","pointersLen","pointers","changedPointersLen","changedPointers","isFirst","isFinal","session","pointersLength","firstInput","simpleCloneInputData","firstMultiple","offsetCenter","center","getCenter","timeStamp","deltaTime","angle","getAngle","distance","getDistance","offset","offsetDelta","prevDelta","prevInput","x","deltaX","y","deltaY","computeDeltaXY","offsetDirection","getDirection","end","overallVelocity","getVelocity","overallVelocityX","overallVelocityY","scale","rotation","getRotation","maxPointers","velocity","velocityX","velocityY","direction","last","lastInterval","v","computeIntervalInputData","srcEvent","computeInputData","emit","recognize","clientX","clientY","p1","p2","props","sqrt","atan2","PI","evEl","evTarget","evWin","destroy","MOUSE_INPUT_MAP","mousedown","mousemove","mouseup","MOUSE_ELEMENT_EVENTS","MOUSE_WINDOW_EVENTS","MouseInput","pressed","button","which","pointerType","POINTER_INPUT_MAP","pointerdown","pointermove","pointerup","pointercancel","pointerout","IE10_POINTER_TYPE_ENUM","POINTER_ELEMENT_EVENTS","POINTER_WINDOW_EVENTS","PointerEventInput","store","pointerEvents","MSPointerEvent","PointerEvent","removePointer","eventTypeNormalized","isTouch","storeIndex","pointerId","splice","SINGLE_TOUCH_INPUT_MAP","touchstart","touchmove","touchend","touchcancel","SingleTouchInput","started","normalizeSingleTouches","all","touches","changed","changedTouches","concat","TOUCH_INPUT_MAP","TOUCH_TARGET_EVENTS","TouchInput","targetIds","getTouches","allTouches","targetTouches","changedTargetTouches","touch","DEDUP_TIMEOUT","TouchMouseInput","mouse","primaryTouch","lastTouches","recordTouches","eventData","setLastTouch","lastTouch","lts","isSyntheticEvent","t","dx","dy","inputEvent","inputData","isMouse","sourceCapabilities","firesTouchEvents","PREFIXED_TOUCH_ACTION","style","NATIVE_TOUCH_ACTION","TOUCH_ACTION_COMPUTE","TOUCH_ACTION_AUTO","TOUCH_ACTION_MANIPULATION","TOUCH_ACTION_NONE","TOUCH_ACTION_PAN_X","TOUCH_ACTION_PAN_Y","TOUCH_ACTION_MAP","touchMap","cssSupports","CSS","supports","getTouchActionProps","TouchAction","set","compute","actions","update","touchAction","recognizers","recognizer","getTouchAction","hasPanX","hasPanY","cleanTouchActions","join","preventDefaults","prevented","preventDefault","hasNone","isTapPointer","isTapMovement","isTapTouchTime","preventSrc","STATE_POSSIBLE","STATE_FAILED","Recognizer","defaults","id","simultaneous","requireFail","stateStr","directionStr","getRecognizerByNameIfManager","otherRecognizer","get","AttrRecognizer","PanRecognizer","pX","pY","PinchRecognizer","PressRecognizer","_timer","_input","RotateRecognizer","SwipeRecognizer","TapRecognizer","pTime","pCenter","count","Hammer","preset","Manager","handlers","oldCssProps","inputClass","toggleCssProps","item","recognizeWith","requireFailure","cssProps","dropRecognizeWith","dropRequireFailure","hasRequireFailures","canRecognizeWith","additionalEvent","tryEmit","canEmit","inputDataClone","reset","process","attrTest","optionPointers","isRecognized","isValid","threshold","directionTest","hasMoved","inOut","validPointers","validMovement","validTime","taps","interval","posThreshold","validTouchTime","failTimeout","validInterval","validMultiTap","tapCount","VERSION","domEvents","userSelect","touchSelect","touchCallout","contentZooming","userDrag","tapHighlightColor","force","stopped","curRecognizer","existing","on","off","gestureEvent","createEvent","initEvent","gesture","dispatchEvent","triggerDomEvent","INPUT_MOVE","STATE_BEGAN","STATE_CHANGED","STATE_ENDED","STATE_RECOGNIZED","STATE_CANCELLED","Tap","Pan","Swipe","Pinch","Rotate","Press","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","exports","module","__webpack_modules__","n","getter","__esModule","d","definition","o","defineProperty","enumerable","Reflect","customElements","polyfillWrapFlushCallback","BuiltInHTMLElement","HTMLElement","construct","setPrototypeOf","raise","errorConstructor","requestSubmit","submitter","form","DOMException","validateSubmitter","click","hidden","appendChild","removeChild","HTMLFormElement","submittersByForm","WeakMap","clickCaptured","Element","Node","parentElement","candidate","closest","findSubmitterFromClickTarget","FrameLoadingStyle","FetchMethod","FormSubmissionState","FormEnctype","TimingMetric","VisitState","Event","vendor","SubmitEvent","FrameElement","observedAttributes","super","loaded","Promise","resolve","delegate","delegateConstructor","connectedCallback","disconnectedCallback","sourceURLReloaded","attributeChangedCallback","loadingStyleChanged","completeChanged","sourceURLChanged","disabledChanged","setAttribute","removeAttribute","loading","lazy","eager","disabled","hasAttribute","autoscroll","complete","isLoading","isPreview","_a","_b","documentElement","expandURL","locatable","URL","toString","baseURI","getAnchor","anchorMatch","hash","match","getAction","locationIsVisitable","location","rootLocation","baseURL","origin","pathname","endsWith","getPrefix","startsWith","isPrefixedBy","getPathComponents","getLastPathComponent","getRequestURL","anchor","toCacheKey","FetchResponse","response","succeeded","ok","failed","clientError","statusCode","serverError","redirected","isHTML","contentType","status","header","responseText","clone","text","responseHTML","headers","activateScriptElement","createdScriptElement","cspNonce","getMetaContent","nonce","textContent","async","destinationElement","sourceElement","attributes","copyElementAttributes","dispatch","cancelable","detail","CustomEvent","bubbles","composed","isConnected","nextAnimationFrame","requestAnimationFrame","parseHTMLDocument","html","DOMParser","parseFromString","unindent","strings","lines","reduce","result","string","interpolate","indent","line","uuid","from","_","floor","attributeName","elements","markAsBusy","localName","clearBusyState","waitForLoad","timeoutInMilliseconds","onComplete","once","getHistoryMethodForAction","history","replaceState","pushState","getVisitAction","isAction","getMetaElement","content","findClosestRecursively","selector","assignedSlot","getRootNode","host","FetchRequest","body","URLSearchParams","abortController","AbortController","resolveRequestPromise","_value","defaultHeaders","searchParams","entries","cancel","abort","fetchOptions","prepareRequest","allowRequestToBeIntercepted","requestStarted","fetch","receive","willDelegateErrorHandling","requestErrored","requestFinished","fetchResponse","defaultPrevented","requestPreventedHandlingResponse","requestSucceededWithResponse","requestFailedWithResponse","credentials","redirect","isSafe","signal","abortSignal","referrer","Accept","acceptResponseType","mimeType","requestInterception","resume","request","AppearanceObserver","intersect","lastEntry","isIntersecting","elementAppearedInViewport","intersectionObserver","IntersectionObserver","observe","unobserve","StreamMessage","wrap","template","innerHTML","createDocumentFragment","fragment","querySelectorAll","streamElement","importNode","inertScriptElement","templateElement","replaceWith","importStreamElements","FormSubmission","confirmMethod","_element","_submitter","confirm","formElement","mustRedirect","initialized","formData","FormData","append","buildFormData","File","search","mergeFormDataEntries","fetchRequest","post","put","patch","delete","fetchMethodFromString","formElementAction","enctype","urlEncoded","stringFormData","encoding","multipart","plain","formEnctypeFromString","requesting","confirmationMessage","stopping","token","cookieName","cookie","decodeURIComponent","getCookieValue","requestAcceptsTurboStreamResponse","_request","waiting","setSubmitsWith","formSubmission","formSubmissionStarted","success","formSubmissionFailedWithResponse","requestMustRedirect","responseSucceededWithoutRedirect","formSubmissionErrored","receiving","formSubmissionSucceededWithResponse","resetSubmitterText","formSubmissionFinished","submitsWith","matches","originalSubmitText","some","Snapshot","activeElement","children","hasAnchor","getElementForAnchor","firstAutofocusableElement","permanentElements","queryPermanentElementsAll","getPermanentElementById","getPermanentElementMapForSnapshot","snapshot","permanentElementMap","currentPermanentElement","newPermanentElement","FormSubmitObserver","eventTarget","submitCaptured","submitBubbled","submissionDoesNotDismissDialog","getElementsByName","HTMLIFrameElement","submissionDoesNotTargetIFrame","willSubmitForm","stopImmediatePropagation","formSubmitted","View","resolveRenderPromise","resolveInterceptionPromise","scrollToAnchor","scrollToElement","focusElement","scrollToPosition","scrollToAnchorFromLocation","scrollIntoView","focus","scrollRoot","scrollTo","scrollToTop","render","renderer","shouldRender","newSnapshot","renderPromise","prepareToRenderSnapshot","renderInterception","renderElement","allowsImmediateRender","renderSnapshot","viewRenderedSnapshot","preloadOnLoadLinksForView","finishRenderingSnapshot","invalidate","reloadReason","viewInvalidated","markAsPreview","prepareToRender","finishRendering","FrameView","missing","LinkInterceptor","clickBubbled","respondsToEventTarget","clickEvent","linkClicked","shouldInterceptLinkClick","originalEvent","linkClickIntercepted","willVisit","_event","LinkClickObserver","MouseEvent","clickEventIsSignificant","composedPath","link","findLinkFromClickTarget","doesNotTargetIFrame","getLocationForLink","willFollowLinkToLocation","followedLinkToLocation","isContentEditable","altKey","ctrlKey","metaKey","shiftKey","FormLinkClickObserver","linkInterceptor","willSubmitFormLinkToLocation","turboFrame","turboAction","turboConfirm","submittedFormLinkToLocation","Bardo","preservingPermanentElements","bardo","enter","leave","enteringBardo","replaceNewPermanentElementWithPlaceholder","replaceCurrentPermanentElementWithClone","replacePlaceholderWithPermanentElement","leavingBardo","permanentElement","placeholder","createPlaceholderForPermanentElement","cloneNode","getPlaceholderById","placeholders","Renderer","currentSnapshot","willRender","promise","resolvingFunctions","focusFirstAutofocusableElement","connectedSnapshot","elementIsFocusable","contains","currentElement","newElement","FrameRenderer","destinationRange","createRange","selectNodeContents","deleteContents","frameElement","sourceRange","extractContents","loadFrameElement","scrollFrameIntoView","activateScriptElements","willRenderFrame","firstElementChild","block","behavior","defaultValue","readScrollBehavior","newScriptElements","activatedScriptElement","ProgressBar","defaultCSS","animationDuration","hiding","visible","trickle","setValue","stylesheetElement","createStylesheetElement","progressElement","createProgressElement","installStylesheetElement","show","installProgressElement","startTrickling","hide","fadeProgressElement","uninstallProgressElement","stopTrickling","refresh","insertBefore","firstChild","width","opacity","trickleInterval","setInterval","clearInterval","className","HeadSnapshot","detailsByOuterHTML","elementIsNoscript","elementWithoutNonce","outerHTML","details","elementType","tracked","elementIsTracked","trackedElementSignature","getScriptElementsNotInSnapshot","getElementsMatchingTypeNotInSnapshot","getStylesheetElementsNotInSnapshot","matchedType","provisionalElements","getMetaValue","findMetaElementByName","elementIsMetaElementWithName","elementIsScript","tagName","elementIsStylesheet","PageSnapshot","fromHTMLString","fromDocument","fromElement","headSnapshot","clonedElement","selectElements","clonedSelectElements","option","selectedOptions","selected","clonedPasswordInput","headElement","getSetting","cacheControlValue","isPreviewable","isCacheable","isVisitable","defaultOptions","historyChanged","visitCachedSnapshot","updateHistory","shouldCacheSnapshot","acceptsStreamResponse","SystemStatusCode","PageStage","Visit","restorationIdentifier","timingMetrics","followedRedirect","scrolled","snapshotCached","snapshotHTML","isSamePage","locationWithActionIsSamePage","adapter","view","restorationData","getRestorationDataForIdentifier","silent","recordTimingMetric","visitStart","visitStarted","cancelRender","canceled","visitEnd","completed","followRedirect","visitCompleted","fail","visitFailed","changeHistory","issueRequest","hasPreloadedResponse","simulateRequest","shouldIssueRequest","startRequest","recordResponse","finishRequest","requestStart","visitRequestStarted","isSuccessful","visitRequestCompleted","visitRequestFailedWithStatusCode","requestEnd","visitRequestFinished","loadResponse","cacheSnapshot","renderPage","performScroll","visitRendered","renderError","getCachedSnapshot","getCachedSnapshotForLocation","getPreloadedSnapshot","hasCachedSnapshot","loadCachedSnapshot","redirectedToLocation","visitProposedToLocation","goToSamePageAnchor","_response","contentTypeMismatch","_error","networkFailure","forceReloaded","scrollToRestoredPosition","visitScrolledToSamePageLocation","lastRenderedLocation","scrollPosition","metric","getTimingMetrics","then","frame","cancelAnimationFrame","BrowserAdapter","progressBar","showProgressBar","startVisit","visit","showVisitProgressBarAfterDelay","timeoutFailure","_visit","hideVisitProgressBar","pageInvalidated","_formSubmission","showFormProgressBarAfterDelay","hideFormProgressBar","visitProgressBarTimeout","progressBarDelay","formProgressBarTimeout","CacheObserver","deprecatedSelector","removeTemporaryElements","temporaryElements","temporaryElementsWithDeprecation","FrameRedirector","formSubmitObserver","_location","shouldRedirect","findFrameElement","shouldSubmit","meta","submissionIsNavigatable","elementIsNavigatable","History","pageLoaded","onPopState","shouldHandlePopState","turbo","historyPoppedToLocationWithRestorationIdentifier","onPageLoad","updateRestorationData","additionalData","assumeControlOfScrollRestoration","previousScrollRestoration","scrollRestoration","relinquishControlOfScrollRestoration","pageIsLoaded","Navigator","proposeVisit","allowsVisitingLocationWithAction","currentVisit","submitForm","clearSnapshotCache","visitOptions","getActionForFormSubmission","currentAnchor","isRestorationToTop","oldURL","newURL","PageObserver","stage","initial","interpretReadyState","pageIsInteractive","pageIsComplete","pageWillUnload","interactive","pageBecameInteractive","ScrollObserver","onScroll","updatePosition","pageXOffset","pageYOffset","position","scrollPositionChanged","StreamMessageRenderer","permanentElementsInDocument","permanentElementInDocument","elementInStream","getPermanentElementMapForFragment","StreamObserver","sources","Set","inspectFetchResponse","fetchResponseFromEvent","fetchResponseIsStream","receiveMessageResponse","receiveMessageEvent","receiveMessageHTML","connectStreamSource","streamSourceIsConnected","disconnectStreamSource","has","receivedMessageFromStream","ErrorRenderer","replaceChild","replaceHeadAndBody","newHead","replaceableElement","scriptElements","PageRenderer","HTMLBodyElement","trackedElementsAreIdentical","mergeHead","replaceBody","currentHeadSnapshot","newHeadSnapshot","mergedHeadElements","mergeProvisionalElements","newStylesheetElements","copyNewHeadStylesheetElements","copyNewHeadScriptElements","activateNewBody","assignNewBody","loadingElements","newHeadStylesheetElements","newHeadScriptElements","newHeadElements","newHeadProvisionalElements","currentHeadProvisionalElements","isCurrentElementInElementList","elementList","isEqualNode","removeCurrentHeadProvisionalElements","copyNewHeadProvisionalElements","adoptNode","activateNewBodyScriptElements","newBodyScriptElements","SnapshotCache","size","snapshots","read","write","clear","unshift","PageView","snapshotCache","viewWillCacheSnapshot","cachedSnapshot","Preloader","preloadURL","extendURLWithDeprecatedProperties","defineProperties","deprecatedLocationPropertyDescriptors","absoluteURL","StreamActions","after","targetElements","templateContent","nextSibling","removeDuplicateTargetChildren","before","prepend","targetElement","preloader","pageObserver","cacheObserver","linkClickObserver","scrollObserver","streamObserver","formLinkClickObserver","frameRedirector","streamMessageRenderer","drive","formMode","disable","registerAdapter","getElementById","renderStreamMessage","clearCache","setProgressBarDelay","delay","setFormMode","mode","applicationAllowsFollowingLinkToLocation","getActionForLink","applicationAllowsVisitingLocation","notifyApplicationAfterVisitingLocation","notifyApplicationAfterPageLoad","notifyApplicationAfterVisitingSamePageLocation","notifyApplicationBeforeCachingSnapshot","notifyApplicationBeforeRender","_snapshot","_isPreview","notifyApplicationAfterRender","frameLoaded","notifyApplicationAfterFrameLoad","frameRendered","notifyApplicationAfterFrameRender","notifyApplicationAfterClickingLinkToLocation","notifyApplicationBeforeVisitingLocation","newBody","timing","HashChangeEvent","submitterIsNavigatable","container","withinFrame","cache","resetCacheControl","setCacheControl","exemptPageFromCache","exemptPageFromPreview","setMetaContent","navigator$1","Turbo","freeze","__proto__","setConfirmMethod","TurboFrameMissingError","getFrameElementById","activateElement","currentURL","right","StreamElement","performAction","beforeRenderEvent","duplicateChildren","c","existingChildren","flatMap","newChildrenIds","includes","actionFunction","targetElementsById","targets","targetElementsByQuery","HTMLTemplateElement","description","newStream","StreamSourceElement","streamSource","EventSource","setConsumer","newConsumer","walk","RegExp","acc","m","fetchResponseLoaded","_fetchResponse","currentFetchRequest","resolveVisitPromise","connected","hasBeenLoaded","ignoredAttributes","previousFrameElement","replaceChildren","appearanceObserver","loadingStyle","loadSourceURL","isIgnoringChangesTo","ignoringChangesToAttribute","sourceURL","loadFrameResponse","handleUnvisitableFrameResponse","proposeVisitIfNavigatedWithAction","shouldInterceptNavigation","navigateFrame","currentNavigationElement","newFrame","_newElement","newFrameElement","extractForeignFrameElement","willHandleFrameMissingFromResponse","handleFrameMissingFromResponse","withCurrentNavigationElement","pageSnapshot","visitResponse","Response","throwFrameMissingError","wrapped","escape","formActionIsVisitable","define","currentScript","TurboCableStreamSourceElement","getConsumer","subscribeTo","received","dispatchMessageEvent","subscriptionConnected","subscriptionDisconnected","MessageEvent","signed_stream_name","dataset","isBodyInit","formMethod","HTMLButtonElement","HTMLInputElement","determineFormMethod","overrideMethod","determineFetchMethod","EventListener","eventOptions","unorderedBindings","bindingConnected","binding","bindingDisconnected","handleEvent","extendedEvent","immediatePropagationStopped","extendEvent","bindings","hasBindings","left","leftIndex","rightIndex","Dispatcher","application","eventListenerMaps","Map","eventListeners","eventListener","listeners","fetchEventListenerForBinding","clearEventListeners","clearEventListenersForBinding","handleError","removeMappedEventListenerFor","eventListenerMap","fetchEventListenerMapForEventTarget","cacheKey","fetchEventListener","createEventListener","parts","defaultActionDescriptorFilters","stopPropagation","prevent","descriptorPattern","camelize","char","namespaceCamelize","capitalize","charAt","dasherize","isSomething","hasProperty","allModifiers","Action","descriptor","schema","defaultEventNames","getDefaultEventNameForElement","methodName","keyFilter","forToken","descriptorString","eventTargetName","parseActionDescriptorString","eventFilter","shouldIgnoreKeyboardEvent","filters","keyFilterDissatisfied","standardFilter","keyMappings","shouldIgnoreMouseEvent","pattern","typecast","ctrl","alt","shift","modifier","select","textarea","o_O","Binding","actionEvent","prepareActionEvent","willBeInvokedByEvent","applyEventModifiers","invokeWithEvent","controller","actionDescriptorFilters","passes","currentTarget","logDebugActivity","KeyboardEvent","scope","containsElement","ElementObserver","mutationObserverInit","childList","subtree","mutationObserver","MutationObserver","mutations","processMutations","pause","takeRecords","matchElementsInTree","removeElement","addElement","mutation","processMutation","processAttributeChange","processRemovedNodes","removedNodes","processAddedNodes","addedNodes","elementAttributeChanged","matchElement","nodes","elementFromNode","processTree","elementIsActive","tree","processor","nodeType","ELEMENT_NODE","elementMatched","elementUnmatched","AttributeObserver","elementObserver","elementMatchedAttribute","elementUnmatchedAttribute","elementAttributeValueChanged","Multimap","valuesByKey","prune","del","hasKey","hasValue","getValuesForKey","getKeysForValue","_key","_values","SelectorObserver","_selector","matchesByElement","selectorMatchElement","selectorMatched","selectors","selectorUnmatched","_attributeName","matchedBefore","StringMapObserver","stringMap","attributeOldValue","knownAttributeNames","refreshAttribute","oldValue","getStringMapKeyForAttribute","stringMapKeyAdded","stringMapValueChanged","stringMapKeyRemoved","currentAttributeNames","recordedAttributeNames","attribute","TokenListObserver","attributeObserver","tokensByElement","tokensMatched","readTokensForElement","unmatchedTokens","matchedTokens","refreshTokensForElement","tokensUnmatched","tokens","tokenMatched","tokenUnmatched","previousTokens","currentTokens","firstDifferingIndex","max","zip","findIndex","previousToken","currentToken","tokenString","parseTokenString","ValueListObserver","tokenListObserver","parseResultsByToken","valuesByTokenByElement","fetchParseResultForToken","fetchValuesByTokenForElement","elementMatchedValue","elementUnmatchedValue","parseResult","parseToken","valuesByToken","parseValueForToken","BindingObserver","bindingsByAction","valueListObserver","actionAttribute","disconnectAllActions","connectAction","disconnectAction","ValueObserver","receiver","stringMapObserver","valueDescriptorMap","invokeChangedCallbacksForDefaultValues","invokeChangedCallback","writer","valueDescriptorNameMap","valueDescriptors","rawValue","rawOldValue","changedMethodName","changedMethod","reader","descriptors","hasMethodName","TargetObserver","targetsByName","disconnectAllTargets","connectTarget","disconnectTarget","targetConnected","targetDisconnected","readInheritableStaticArrayValues","propertyName","ancestors","getAncestorsForConstructor","getOwnStaticArrayValues","getPrototypeOf","reverse","OutletObserver","outletsByName","outletElementsByName","selectorObserverMap","attributeObserverMap","outletDefinitions","outletName","setupSelectorObserverForOutlet","setupAttributeObserverForOutlet","dependentContexts","observer","disconnectAllOutlets","stopSelectorObservers","stopAttributeObservers","outlet","getOutlet","connectOutlet","getOutletFromMap","disconnectOutlet","hasOutlet","hasOutletController","controllerAttribute","getOutletNameFromOutletAttributeName","updateSelectorObserverForOutlet","outletConnected","outletDisconnected","selectorObserver","attributeNameForOutletName","outlets","getSelectorForOutletName","outletAttributeForScope","outletDependencies","dependencies","router","modules","controllerConstructor","dependentControllerIdentifiers","identifiers","contexts","getControllerForElementAndIdentifier","Context","functionName","bindingObserver","dispatcher","valueObserver","targetObserver","outletObserver","initialize","invokeControllerMethod","getOwnKeys","getOwnPropertySymbols","getOwnPropertyNames","extendWithReflect","extended","testReflectExtension","Module","shadowConstructor","shadowProperties","shadowingDescriptor","getOwnPropertyDescriptor","getShadowedDescriptor","getShadowProperties","shadow","blessedProperties","blessing","getBlessedProperties","blessDefinition","contextsByScope","connectedContexts","connectContextForScope","fetchContextForScope","disconnectContextForScope","ClassMap","getDataKey","getAll","getAttributeName","getAttributeNameForKey","DataMap","Guide","warnedKeysByObject","warnedKeys","attributeValueContainsToken","TargetSet","targetName","targetNames","findTarget","findLegacyTarget","findAllTargets","findAllLegacyTargets","getSelectorForTargetName","findElement","findAllElements","targetAttributeForScope","getLegacySelectorForTargetName","targetDescriptor","targetAttribute","revisedAttributeName","guide","OutletSet","controllerElement","outletNames","findOutlet","findAllOutlets","queryElements","matchesElement","Scope","classes","controllerSelector","documentScope","isDocumentScope","ScopeObserver","scopesByIdentifierByElement","scopeReferenceCounts","parseValueForElementAndIdentifier","scopesByIdentifier","fetchScopesByIdentifierForElement","createScopeForElementAndIdentifier","referenceCount","scopeConnected","scopeDisconnected","Router","scopeObserver","modulesByIdentifier","loadDefinition","unloadIdentifier","connectModule","afterLoad","disconnectModule","getContextForElementAndIdentifier","proposeToConnectScopeForElementAndIdentifier","defaultSchema","tab","esc","space","up","down","home","page_up","page_down","objectFromEntries","array","memo","k","getOutletController","getControllerAndEnsureConnectedScope","outletController","parseValueDefinitionPair","typeDefinition","payload","typeFromObject","typeObject","hasType","hasDefault","default","fullObject","onlyType","onlyDefault","parseValueTypeConstant","typeFromDefaultValue","parseValueTypeDefault","parseValueTypeObject","typeFromConstant","parseValueTypeDefinition","constant","defaultValuesByType","constantFromType","defaultValueForDefinition","hasCustomDefaultValue","readers","writers","valueDescriptorForTokenAndTypeDefinition","Boolean","Number","String","boolean","number","writeJSON","Controller","shouldLoad","_identifier","_application","blessings","classDefinition","targetDefinition","valueDefinitionPairs","pairs","getOwnStaticObjectPairs","readInheritableStaticObjectPairs","propertyDescriptorMap","valueDefinitionPair","valueDescriptor","propertiesForValueDefinitionPair","outletDefinition","camelizedName","outletElement","propertiesForOutletDefinition","debug","logFormattedMessage","register","load","registerActionOption","rest","unload","controllers","onerror","groupCollapsed","groupEnd","Stimulus","swiperContainer","allCards","nope","love","initCards","card","zIndex","transform","classList","createButtonListener","cards","moveOutWidth","clientWidth","el","hammertime","toggle","rotate","keep","endX","toX","endY","toY","nopeListener","loveListener"],"sourceRoot":""}